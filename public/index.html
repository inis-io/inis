<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1">
    <!--让IE使用最新的渲染模式，支持CSS3-->
    <meta http-equiv="X-UA-Compatible" content="IE-edge,chrome=1">

    <title>Title {{.title}}</title>
    <script>
        globalThis.inis = JSON.parse('{{.INIS}}')
    </script>
    <!-- favicon.ico -->
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
    <script src="https://api.inis.cn/admin/utils/helper.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/vue-router@4.0.15/dist/vue-router.global.js"></script>
<!--    <script src="https://cdn.socket.io/4.4.1/socket.io.min.js" crossorigin="anonymous"></script>-->
    <script src="https://cdn.socket.io/3.1.3/socket.io.min.js" crossorigin="anonymous"></script>
</head>
<body>

<div id="app">
    <h1>{{.title}} 2</h1>
    <script type="text/javascript">

        const socket = io({
            transports: ['websocket']
        })

        // 连接成功
        socket.on('connect', () => {
            console.log('connect', socket.connected)
        })

        // 连接失败
        socket.on('error', (error) => {
            console.log('error', error)
        })

        // 连接断开
        socket.on('disconnect', (reason) => {
            console.log('disconnect', reason)
        })

        // 监听服务端消息
        socket.on('message', (data) => {
            console.log('message', data)
        })

        // 监听广播消息
        socket.on('bcast', (data) => {
            console.log('bcast', data)
        })
    </script>
</div>
</body>
</html>