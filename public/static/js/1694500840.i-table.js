import{r as e,a,J as t,o,c as n,K as r,e as l,k as i,w as s,H as c,F as p,j as g,Y as d,t as u,l as m,Q as y,b,d as h,p as f,u as C,m as k,$ as w}from"./1694500840.index.js";const v={class:"mt-2"},S={key:0,class:"float-start"},x={class:"float-end custom"},z={__name:"i-table",props:{opts:{type:Object,default:{url:"",method:"get",params:{},headers:{},columns:[],menu:{}},required:!0},table:{type:Object,default:{defaultSort:{prop:"id",order:"descending"},rowStyle:{backgroundColor:"rgba(var(--theme-color), calc(var(--theme-opacity) * 0.8))"},cellStyle:{backgroundColor:"transparent",border:"unset",padding:"10px 0"},headerRowStyle:{backgroundColor:"transparent !important"},headerCellStyle:{backgroundColor:"rgba(var(--theme-color), var(--theme-opacity))",border:"unset"},style:{background:"rgba(var(--theme-color), calc(var(--theme-opacity) * 0.15))",backdropFilter:"blur(10px)",borderRadius:"8px"}}},pagination:{type:Object,default:{count:5,single:!0,class:"custom",background:!0,sizes:[10,50,100,500],layout:"sizes, prev, pager, next"}}},emits:["selection:change"],setup(z,{expose:_,emit:R}){const j=z,$=e({item:{data:[],count:0,page:{code:1,total:1},limit:j.pagination.sizes[0],order:"create_time asc",loading:{data:!1,page:!1},selection:[]},config:{table:{defaultSort:{prop:"id",order:"descending"},rowStyle:{backgroundColor:"rgba(var(--theme-color), calc(var(--theme-opacity) * 0.8))"},cellStyle:{backgroundColor:"transparent",border:"unset"},headerRowStyle:{backgroundColor:"transparent !important"},headerCellStyle:{backgroundColor:"rgba(var(--theme-color), var(--theme-opacity))",border:"unset"},style:{background:"rgba(var(--theme-color), calc(var(--theme-opacity) * 0.65))",backdropFilter:"var(--theme-blur)"},...j.table},pagination:{count:5,single:!0,class:"custom",background:!0,sizes:[10,50,100,500],layout:"sizes, prev, pager, next",...j.pagination},opts:{url:"",method:"get",params:{},headers:{},columns:[],menu:{},...j.opts}}}),A={init:async(e=$.item.page.code,a=$.item.limit)=>{$.item.loading.data=!0;const{data:t,code:o,msg:n}=await f[$.config.opts.method]($.config.opts.url,{page:e,limit:a,order:$.item.order,...$.config.opts.params});if(!C.in.array(o,[200,204]))return k.error(n);$.item.data=t.data,$.item.count=t.count,$.item.page.total=t.page,$.item.page.code=e,$.item.loading.data=!1,$.item.loading.page=!1},empty:e=>C.is.empty(e),inArray:(e,a)=>C.in.array(e,a),format:e=>C.format.number(e),nature:e=>C.time.nature(e)},F={sizeChange:e=>{$.item.limit=e,A.init()},currentChange:e=>A.init(e),mouseMenu(e,a,t){const{x:o,y:n}=t,r=w({el:t.currentTarget,params:{row:{...e},select:[...$.item.selection.map((e=>({...e})))]},...$.config.opts.menu});$.config.opts.menu.hidden||r.show(o,n),t.preventDefault()},selectionChange(e){$.item.selection=e,R("selection:change",e)}};return _({init:A.init}),(e,f)=>{const C=a("el-table-column"),k=a("el-table"),w=a("el-pagination"),z=t("loading");return o(),n(p,null,[r((o(),i(k,{ref:"selected","element-loading-text":"数据加载中 ...","element-loading-size":"20",onSelectionChange:F.selectionChange,onRowContextmenu:F.mouseMenu,data:l($).item.data,"row-style":l($).config.table.rowStyle,"cell-style":l($).config.table.cellStyle,"header-row-style":l($).config.table.headerRowStyle,"header-cell-style":l($).config.table.headerCellStyle,"default-sort":l($).config.table.defaultSort,style:y(l($).config.table.style)},{default:s((()=>[c(e.$slots,"start"),c(e.$slots,"default"),(o(!0),n(p,null,g(l($).config.opts.columns,((a,t)=>(o(),i(C,{key:t,prop:a.prop,label:a.label,width:a.width,"class-name":a.class,fixed:a.fixed,sortable:a.sortable,align:A.inArray(a.prop,["create_time","update_time"])?"center":a.align},d({_:2},[a.slot?{name:"default",fn:s((t=>[c(e.$slots,"i-"+a.prop,{scope:t.row})])),key:"0"}:{name:"default",fn:s((e=>[A.inArray(a.prop,["create_time","update_time"])?(o(),n("span",{key:0},[A.empty(e.row[a.prop])?(o(),n("strong",{key:1},"-")):(o(),n("span",{key:0},u(A.nature(e.row[a.prop])),1))])):m("",!0)])),key:"1"}]),1032,["prop","label","width","class-name","fixed","sortable","align"])))),128)),c(e.$slots,"end")])),_:3},8,["onSelectionChange","onRowContextmenu","data","row-style","cell-style","header-row-style","header-cell-style","default-sort","style"])),[[z,l($).item.loading.data]]),b("div",v,[l($).item.count>0?(o(),n("div",S," 总计 "+u(l($).item.count)+" 条数据 ",1)):m("",!0),b("div",x,[h(w,{background:l($).config.pagination.background,onSizeChange:F.sizeChange,onCurrentChange:F.currentChange,"page-sizes":l($).config.pagination.sizes,layout:l($).config.pagination.layout,"popper-class":l($).config.pagination.class,"pager-count":l($).config.pagination.count,"hide-on-single-page":l($).config.pagination.single,"page-size":l($).item.limit,"page-count":l($).item.page.total},null,8,["background","onSizeChange","onCurrentChange","page-sizes","layout","popper-class","pager-count","hide-on-single-page","page-size","page-count"])])])],64)}}};export{z as _};
