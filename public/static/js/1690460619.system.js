import{r as e,h as s,p as t,m as a,u as l,i as n,a as o,B as c,o as i,c as u,C as r,e as d,b as m,d as p,w as f,f as g,q as b,k as h,l as v,F as y,j as w,t as _,L as x,K as V,N as k,g as z,P as S}from"./1690460619.index.js";import{_ as C}from"./1690460619.api-key.js";import{_ as U,a as O}from"./1690460619.page-limit.js";import{_ as q}from"./1690460619.qps-black.js";import{_ as K}from"./1690460619.article-page.js";const R={class:"card"},J={class:"card-body"},A={class:"text-muted text-uppercase mt-0"},I=m("br",null,null,-1),N={class:"d-inline-flex align-items-center"},j=m("span",{class:"ms-1"},"邮件服务",-1),D={class:"m-b-20"},$=m("span",{class:"badge bg-danger font-white"}," 推荐 ",-1),B={class:"text-muted"},P=m("strong",{class:"flex-center"},"配置邮件服务",-1),E={class:"row"},T={class:"col-md-6"},W={class:"form-group mb-3"},L={class:"form-label required"},M=m("span",{class:"ms-1"},"邮件服务器地址：",-1),X={class:"col-md-6"},G={class:"form-group mb-3"},H={class:"form-label required"},F=m("span",{class:"ms-1"},"邮件服务端口：",-1),Q={class:"row"},Y={class:"col-md-6"},Z={class:"form-group mb-3"},ee={class:"form-label required"},se=m("span",{class:"ms-1"},"邮件账号：",-1),te={class:"col-md-6"},ae={class:"form-group mb-3"},le={class:"form-label required"},ne=m("span",{class:"ms-1"},"服务密码：",-1),oe={class:"row"},ce={class:"col-md-6"},ie={class:"form-group mb-3"},ue={class:"form-label"},re=m("span",{class:"ms-1"},"邮件昵称：",-1),de={class:"col-md-6"},me={class:"form-group mb-3"},pe={class:"form-label"},fe=m("span",{class:"ms-1"},"邮件签名：",-1),ge={class:"col-12"},be={class:"form-group mb-3"},he={class:"form-label"},ve=m("span",{class:"ms-1"},"接收者邮箱：",-1),ye=m("span",{class:"ms-1"},"邮件服务测试",-1),we={__name:"sms-email",emits:["refresh"],setup(w,{expose:_,emit:x}){const V=e({struct:{email:null,host:null,port:null,account:null,password:null,nickname:null,sign_name:null,drive:{email:null,default:null}},status:{finish:!1,active:!1,dialog:!1,loading:!0,wait:!1,test:!1},backup:{}});s((async()=>{await k.init()}));const k={init:async()=>{V.status.finish=!1,V.status.loading=!0;const{code:e,data:s}=await t.get("/api/toml/sms",{name:"email"});V.status.loading=!1,200===e&&(V.struct=s,V.backup=JSON.parse(JSON.stringify(s)),V.status.finish=!0)},show(){if(!V.status.finish)return a.warn("邮件服务配置获取失败，无法进行配置！");V.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await t.put("/api/toml/sms-drive",{email:e?"email":""});200!==s&&(V.status.active=!e,a.error(l))},save:async()=>{if(!l.object.equal(V.struct,V.backup,["host","port","account","password"]))return a.warn("请先完成邮件服务测试");if(l.is.empty(V.struct.host))return a.warn("请填写邮件服务器地址！");if(l.is.empty(V.struct.port))return a.warn("请填写邮件服务器端口！");if(l.is.empty(V.struct.account))return a.warn("请填写邮件账号！");if(l.is.empty(V.struct.password))return a.warn("请填写服务密码！");if(l.is.empty(V.struct.sign_name))return a.warn("请填写邮件签名！");V.status.wait=!0;const{code:e,msg:s}=await t.put("/api/toml/sms-email",V.struct);if(V.status.wait=!1,200!==e)return a.error("保存失败："+s);V.status.dialog=!1},test:async()=>{if(l.is.empty(V.struct.email))return a.warn("请填写接收者邮箱！");if(l.is.empty(V.struct.host))return a.warn("请填写邮件服务器地址！");if(l.is.empty(V.struct.port))return a.warn("请填写邮件服务器端口！");if(l.is.empty(V.struct.account))return a.warn("请填写邮件账号！");if(l.is.empty(V.struct.password))return a.warn("请填写服务密码！");if(l.is.empty(V.struct.sign_name))return a.warn("请填写邮件签名！");if(!l.is.email(V.struct.email))return a.warn("接收者邮箱格式不正确！");V.status.test=!0;const{code:e,msg:s,data:n}=await t.post("/api/toml/test-sms-email",V.struct);if(V.status.test=!1,200===e)return V.backup=JSON.parse(JSON.stringify(V.struct)),a.success(s);a.error(`${s}<br>${n}`)}};return n((()=>V.struct),(()=>{V.status.active="email"===V.struct.drive.email}),{deep:!0}),_({init:k.init}),(e,s)=>{const t=o("i-svg"),a=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),w=o("el-input-number"),_=o("el-button"),x=o("el-dialog"),z=c("load");return i(),u(y,null,[r((i(),u("div",R,[m("div",J,[p(t,{name:"email",color:"rgb(var(--assist-color))",size:"55px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",A,[p(a,{placement:"top"},{content:f((()=>[g(" ● 用于发送验证码、通知等邮件相关的服务"),I,g(" ● 注册、找回密码、通知等功能都需要依赖此服务 ")])),default:f((()=>[m("span",N,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),j])])),_:1})]),m("h2",D,[p(l,{modelValue:d(V).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(V).status.active=e),onChange:k.change,disabled:!d(V).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),$,m("span",B,[g(" 因为不花钱，"),m("span",{onClick:s[1]||(s[1]=e=>k.show()),class:"text-white pointer"},"点我配置")])])])),[[z,[d(V).status.loading,null,null]]]),p(x,{modelValue:d(V).status.dialog,"onUpdate:modelValue":s[13]||(s[13]=e=>d(V).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[P])),default:f((()=>[m("div",E,[m("div",T,[m("div",W,[m("label",L,[p(a,{content:"邮件服务器地址，如：smtp.qq.com",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),M])])),_:1})]),p(n,{modelValue:d(V).struct.host,"onUpdate:modelValue":s[2]||(s[2]=e=>d(V).struct.host=e)},null,8,["modelValue"])])]),m("div",X,[m("div",G,[m("label",H,[p(a,{content:"邮件服务端口，如：465",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),F])])),_:1})]),p(w,{modelValue:d(V).struct.port,"onUpdate:modelValue":s[3]||(s[3]=e=>d(V).struct.port=e),class:"w-100 d-flex","controls-position":"right",min:1},null,8,["modelValue"])])])]),m("div",Q,[m("div",Y,[m("div",Z,[m("label",ee,[p(a,{content:"邮件账号，如：xxx@qq.com",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),se])])),_:1})]),p(n,{modelValue:d(V).struct.account,"onUpdate:modelValue":s[4]||(s[4]=e=>d(V).struct.account=e)},null,8,["modelValue"])])]),m("div",te,[m("div",ae,[m("label",le,[p(a,{content:"服务密码，不是邮箱密码",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),ne])])),_:1})]),p(n,{modelValue:d(V).struct.password,"onUpdate:modelValue":s[5]||(s[5]=e=>d(V).struct.password=e),"show-password":""},null,8,["modelValue"])])])]),m("div",oe,[m("div",ce,[m("div",ie,[m("label",ue,[p(a,{content:"邮件昵称，可以为空",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),re])])),_:1})]),p(n,{modelValue:d(V).struct.nickname,"onUpdate:modelValue":s[6]||(s[6]=e=>d(V).struct.nickname=e)},null,8,["modelValue"])])]),m("div",de,[m("div",me,[m("label",pe,[p(a,{content:"邮件签名，也就是邮件的主题或标题，不推荐为空",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),fe])])),_:1})]),p(n,{modelValue:d(V).struct.sign_name,"onUpdate:modelValue":s[7]||(s[7]=e=>d(V).struct.sign_name=e)},null,8,["modelValue"])])]),m("div",ge,[m("div",be,[m("label",he,[p(a,{content:"用于邮件服务测试接收测试信息的邮箱",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),ve])])),_:1})]),p(n,{modelValue:d(V).struct.email,"onUpdate:modelValue":s[9]||(s[9]=e=>d(V).struct.email=e),onKeydown:s[10]||(s[10]=b((e=>k.test()),["enter"])),class:"custom",placeholder:"请输入邮箱"},{suffix:f((()=>[p(_,{onClick:s[8]||(s[8]=e=>k.test()),loading:d(V).status.test},{default:f((()=>[d(V).status.test?v("",!0):(i(),h(t,{key:0,name:"email",size:"14px"})),ye])),_:1},8,["loading"])])),_:1},8,["modelValue"])])])])])),footer:f((()=>[p(_,{onClick:s[11]||(s[11]=e=>d(V).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(_,{onClick:s[12]||(s[12]=e=>k.save()),loading:d(V).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},_e={class:"card"},xe={class:"card-body"},Ve={class:"text-muted text-uppercase mt-0"},ke=m("br",null,null,-1),ze={class:"d-inline-flex align-items-center"},Se=m("span",{class:"ms-1"},"阿里云短信",-1),Ce={class:"m-b-20"},Ue=m("span",{class:"badge bg-warning font-white"}," 企业 ",-1),Oe={class:"text-muted"},qe=m("strong",{class:"flex-center"},"配置阿里云短信服务",-1),Ke={class:"row"},Re={class:"col-md-6"},Je={class:"form-group mb-3"},Ae={class:"form-label required"},Ie=m("span",{class:"ms-1"},"AccessKey ID：",-1),Ne={class:"col-md-6"},je={class:"form-group mb-3"},De={class:"form-label required"},$e=m("span",{class:"ms-1"},"AccessKey Secret：",-1),Be={class:"row"},Pe={class:"col-md-4"},Ee={class:"form-group mb-3"},Te={class:"form-label required"},We=m("span",{class:"ms-1"},"endpoint：",-1),Le={class:"col-md-4"},Me={class:"form-group mb-3"},Xe={class:"form-label required"},Ge=m("span",{class:"ms-1"},"短信签名：",-1),He={class:"col-md-4"},Fe={class:"form-group mb-3"},Qe={class:"form-label required"},Ye=m("span",{class:"ms-1"},"验证码模板：",-1),Ze={class:"row"},es={class:"col-12"},ss={class:"form-group mb-3"},ts={class:"form-label"},as=m("span",{class:"ms-1"},"接收者手机号：",-1),ls=m("span",{class:"ms-1"},"阿里云短信测试",-1),ns={__name:"sms-aliyun",emits:["refresh"],setup(w,{expose:_,emit:x}){const V=e({struct:{access_key_id:null,access_key_secret:null,endpoint:null,sign_name:null,verify_code:null,phone:null,drive:{sms:null,default:null}},status:{finish:!1,active:!1,dialog:!1,loading:!0,test:!1,wait:!1},backup:{}});s((async()=>{await k.init()}));const k={init:async()=>{V.status.finish=!1,V.status.loading=!0;const{code:e,data:s}=await t.get("/api/toml/sms",{name:"aliyun"});V.status.loading=!1,200===e&&(V.struct=s,V.backup=JSON.parse(JSON.stringify(s)),V.status.finish=!0)},show(){if(!V.status.finish)return a.warn("SMS服务配置获取失败，无法进行配置！");V.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await t.put("/api/toml/sms-drive",{sms:e?"aliyun":""});if(200===s)return x("refresh","sms-tencent");V.status.active=!e,a.error(l)},save:async()=>{if(!l.object.equal(V.struct,V.backup,["access_key_id","access_key_secret","endpoint","sign_name","verify_code"]))return a.warn("请先完成阿里云短信测试");if(l.is.empty(V.struct.access_key_id))return a.warn("请填写阿里云AccessKey ID！");if(l.is.empty(V.struct.access_key_secret))return a.warn("请填写阿里云AccessKey Secret！");if(l.is.empty(V.struct.endpoint))return a.warn("请填写阿里云短信服务endpoint！");if(l.is.empty(V.struct.sign_name))return a.warn("请填写短信签名！");if(l.is.empty(V.struct.verify_code))return a.warn("请填写验证码模板！");V.status.wait=!0;const{code:e,msg:s}=await t.put("/api/toml/sms-aliyun",V.struct);if(V.status.wait=!1,200!==e)return a.error("保存失败："+s);V.status.dialog=!1},test:async()=>{if(l.is.empty(V.struct.phone))return a.warn("请填写接收者手机号！");if(l.is.empty(V.struct.access_key_id))return a.warn("请填写阿里云AccessKey ID！");if(l.is.empty(V.struct.access_key_secret))return a.warn("请填写阿里云AccessKey Secret！");if(l.is.empty(V.struct.endpoint))return a.warn("请填写阿里云短信服务endpoint！");if(l.is.empty(V.struct.sign_name))return a.warn("请填写短信签名！");if(l.is.empty(V.struct.verify_code))return a.warn("请填写验证码模板！");if(!l.is.phone(V.struct.phone))return a.warn("接收者手机号格式不正确！");V.status.test=!0;const{code:e,msg:s,data:n}=await t.post("/api/toml/test-sms-aliyun",V.struct);if(V.status.test=!1,200===e)return V.backup=JSON.parse(JSON.stringify(V.struct)),a.success(s);a.error(`${s}<br>${n}`)}};return n((()=>V.struct),(()=>{V.status.active="aliyun"===V.struct.drive.sms}),{deep:!0}),_({init:k.init}),(e,s)=>{const t=o("i-svg"),a=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),w=o("el-button"),_=o("el-dialog"),x=c("load");return i(),u(y,null,[r((i(),u("div",_e,[m("div",xe,[p(t,{name:"aliyun",color:"rgb(var(--assist-color))",size:"60px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",Ve,[p(a,{placement:"top"},{content:f((()=>[g(" ● 用于发送验证码相关的服务"),ke,g(" ● 注册、找回密码、通知等功能都需要依赖此服务 ")])),default:f((()=>[m("span",ze,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),Se])])),_:1})]),m("h2",Ce,[p(l,{modelValue:d(V).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(V).status.active=e),onChange:k.change,disabled:!d(V).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),Ue,m("span",Oe,[g(" 企业推荐这个，"),m("span",{onClick:s[1]||(s[1]=e=>k.show()),class:"text-white pointer"},"点我配置")])])])),[[x,[d(V).status.loading,null,null]]]),p(_,{modelValue:d(V).status.dialog,"onUpdate:modelValue":s[12]||(s[12]=e=>d(V).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[qe])),default:f((()=>[m("div",Ke,[m("div",Re,[m("div",Je,[m("label",Ae,[p(a,{content:"阿里云 AccessKey ID",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Ie])])),_:1})]),p(n,{modelValue:d(V).struct.access_key_id,"onUpdate:modelValue":s[2]||(s[2]=e=>d(V).struct.access_key_id=e),"show-password":""},null,8,["modelValue"])])]),m("div",Ne,[m("div",je,[m("label",De,[p(a,{content:"阿里云 AccessKey Secret",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),$e])])),_:1})]),p(n,{modelValue:d(V).struct.access_key_secret,"onUpdate:modelValue":s[3]||(s[3]=e=>d(V).struct.access_key_secret=e),"show-password":""},null,8,["modelValue"])])])]),m("div",Be,[m("div",Pe,[m("div",Ee,[m("label",Te,[p(a,{content:"阿里云 短信服务 endpoint，如：dysmsapi.aliyuncs.com",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),We])])),_:1})]),p(n,{modelValue:d(V).struct.endpoint,"onUpdate:modelValue":s[4]||(s[4]=e=>d(V).struct.endpoint=e)},null,8,["modelValue"])])]),m("div",Le,[m("div",Me,[m("label",Xe,[p(a,{content:"短信签名，如：萌卜兔",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Ge])])),_:1})]),p(n,{modelValue:d(V).struct.sign_name,"onUpdate:modelValue":s[5]||(s[5]=e=>d(V).struct.sign_name=e)},null,8,["modelValue"])])]),m("div",He,[m("div",Fe,[m("label",Qe,[p(a,{content:"验证码模板，如：SMS_XXX02",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Ye])])),_:1})]),p(n,{modelValue:d(V).struct.verify_code,"onUpdate:modelValue":s[6]||(s[6]=e=>d(V).struct.verify_code=e)},null,8,["modelValue"])])])]),m("div",Ze,[m("div",es,[m("div",ss,[m("label",ts,[p(a,{content:"用于阿里云短信测试接收测试信息的手机号",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),as])])),_:1})]),p(n,{modelValue:d(V).struct.phone,"onUpdate:modelValue":s[8]||(s[8]=e=>d(V).struct.phone=e),onKeydown:s[9]||(s[9]=b((e=>k.test()),["enter"])),class:"custom",placeholder:"请输入手机号"},{suffix:f((()=>[p(w,{onClick:s[7]||(s[7]=e=>k.test()),loading:d(V).status.test},{default:f((()=>[d(V).status.test?v("",!0):(i(),h(t,{key:0,name:"phone",size:"14px"})),ls])),_:1},8,["loading"])])),_:1},8,["modelValue"])])])])])),footer:f((()=>[p(w,{onClick:s[10]||(s[10]=e=>d(V).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(w,{onClick:s[11]||(s[11]=e=>k.save()),loading:d(V).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},os={class:"card"},cs={class:"card-body"},is={class:"text-muted text-uppercase mt-0"},us=m("br",null,null,-1),rs={class:"d-inline-flex align-items-center"},ds=m("span",{class:"ms-1"},"腾讯云短信",-1),ms={class:"m-b-20"},ps=m("span",{class:"badge bg-primary font-white"}," 企业 ",-1),fs={class:"text-muted"},gs=m("strong",{class:"flex-center"},"配置腾讯云短信服务",-1),bs={class:"row"},hs={class:"col-md-6"},vs={class:"form-group mb-3"},ys={class:"form-label required"},ws=m("span",{class:"ms-1"},"SecretId：",-1),_s={class:"col-md-6"},xs={class:"form-group mb-3"},Vs={class:"form-label required"},ks=m("span",{class:"ms-1"},"SecretKey：",-1),zs={class:"row"},Ss={class:"col-md-6"},Cs={class:"form-group mb-3"},Us={class:"form-label required"},Os=m("span",{class:"ms-1"},"endpoint：",-1),qs={class:"col-md-6"},Ks={class:"form-group mb-3"},Rs={class:"form-label required"},Js=m("span",{class:"ms-1"},"appid：",-1),As={class:"row"},Is={class:"col-md-4"},Ns={class:"form-group mb-3"},js={class:"form-labe requiredl"},Ds=m("span",{class:"ms-1"},"短信签名：",-1),$s={class:"col-md-4"},Bs={class:"form-group mb-3"},Ps={class:"form-label required"},Es=m("span",{class:"ms-1"},"验证码模板 id：",-1),Ts={class:"col-md-4"},Ws={class:"form-group mb-3"},Ls={class:"form-label required"},Ms=m("span",{class:"ms-1"},"区域：",-1),Xs={class:"col-12"},Gs={class:"form-group mb-3"},Hs={class:"form-label"},Fs=m("span",{class:"ms-1"},"接收者手机号：",-1),Qs=m("span",{class:"ms-1"},"腾讯云短信测试",-1),Ys={__name:"sms-tencent",emits:["refresh"],setup(w,{expose:_,emit:x}){const V=e({struct:{phone:null,secret_id:null,secret_key:null,endpoint:null,sms_sdk_app_id:null,sign_name:null,verify_code:null,region:null,drive:{sms:null,default:null}},status:{finish:!1,active:!1,dialog:!1,loading:!0,wait:!1,test:!1},backup:{}});s((async()=>{await k.init()}));const k={init:async()=>{V.status.finish=!1,V.status.loading=!0;const{code:e,data:s}=await t.get("/api/toml/sms",{name:"tencent"});V.status.loading=!1,200===e&&(V.struct=s,V.backup=JSON.parse(JSON.stringify(s)),V.status.finish=!0)},show(){if(!V.status.finish)return a.warn("配置获取失败，无法进行配置！");V.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await t.put("/api/toml/sms-drive",{sms:e?"tencent":""});if(200===s)return x("refresh","sms-aliyun");V.status.active=!e,a.error(l)},save:async()=>{if(!l.object.equal(V.struct,V.backup,["secret_id","secret_key","endpoint","sms_sdk_app_id","sign_name","verify_code","region"]))return a.warn("请先完成邮件服务测试");if(l.is.empty(V.struct.secret_id))return a.warn("请填写 SecretId！");if(l.is.empty(V.struct.secret_key))return a.warn("请填写 SecretKey！");if(l.is.empty(V.struct.endpoint))return a.warn("请填写 endpoint！");if(l.is.empty(V.struct.sms_sdk_app_id))return a.warn("请填写 appid！");if(l.is.empty(V.struct.sign_name))return a.warn("请填写 短信签名！");if(l.is.empty(V.struct.verify_code))return a.warn("请填写 验证码模板 id！");if(l.is.empty(V.struct.region))return a.warn("请填写 区域！");V.status.wait=!0;const{code:e,msg:s}=await t.put("/api/toml/sms-tencent",V.struct);if(V.status.wait=!1,200!==e)return a.error("保存失败："+s);V.status.dialog=!1},test:async()=>{if(l.is.empty(V.struct.phone))return a.warn("请填写接收者手机号！");if(l.is.empty(V.struct.secret_id))return a.warn("请填写 SecretId！");if(l.is.empty(V.struct.secret_key))return a.warn("请填写 SecretKey！");if(l.is.empty(V.struct.endpoint))return a.warn("请填写 endpoint！");if(l.is.empty(V.struct.sms_sdk_app_id))return a.warn("请填写 appid！");if(l.is.empty(V.struct.sign_name))return a.warn("请填写 短信签名！");if(l.is.empty(V.struct.verify_code))return a.warn("请填写 验证码模板 id！");if(l.is.empty(V.struct.region))return a.warn("请填写 区域！");if(!l.is.phone(V.struct.phone))return a.warn("接收者手机号格式不正确！");V.status.test=!0;const{code:e,msg:s,data:n}=await t.post("/api/toml/test-sms-tencent",V.struct);if(V.status.test=!1,200===e)return V.backup=JSON.parse(JSON.stringify(V.struct)),a.success(s);a.error(`${s}<br>${n}`)}};return n((()=>V.struct),(()=>{V.status.active="tencent"===V.struct.drive.sms}),{deep:!0}),_({init:k.init}),(e,s)=>{const t=o("i-svg"),a=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),w=o("el-button"),_=o("el-dialog"),x=c("load");return i(),u(y,null,[r((i(),u("div",os,[m("div",cs,[p(t,{name:"tencent",color:"rgb(var(--assist-color))",size:"60px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",is,[p(a,{placement:"top"},{content:f((()=>[g(" ● 用于发送验证码相关的服务"),us,g(" ● 注册、找回密码、通知等功能都需要依赖此服务 ")])),default:f((()=>[m("span",rs,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),ds])])),_:1})]),m("h2",ms,[p(l,{modelValue:d(V).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(V).status.active=e),onChange:k.change,disabled:!d(V).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),ps,m("span",fs,[g(" 也可以用这个，"),m("span",{onClick:s[1]||(s[1]=e=>k.show()),class:"text-white pointer"},"点我配置")])])])),[[x,[d(V).status.loading,null,null]]]),p(_,{modelValue:d(V).status.dialog,"onUpdate:modelValue":s[14]||(s[14]=e=>d(V).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[gs])),default:f((()=>[m("div",bs,[m("div",hs,[m("div",vs,[m("label",ys,[p(a,{content:"腾讯云 SecretId",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),ws])])),_:1})]),p(n,{modelValue:d(V).struct.secret_id,"onUpdate:modelValue":s[2]||(s[2]=e=>d(V).struct.secret_id=e),"show-password":""},null,8,["modelValue"])])]),m("div",_s,[m("div",xs,[m("label",Vs,[p(a,{content:"腾讯云 SecretKey",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),ks])])),_:1})]),p(n,{modelValue:d(V).struct.secret_key,"onUpdate:modelValue":s[3]||(s[3]=e=>d(V).struct.secret_key=e),"show-password":""},null,8,["modelValue"])])])]),m("div",zs,[m("div",Ss,[m("div",Cs,[m("label",Us,[p(a,{content:"腾讯云短信服务 endpoint",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Os])])),_:1})]),p(n,{modelValue:d(V).struct.endpoint,"onUpdate:modelValue":s[4]||(s[4]=e=>d(V).struct.endpoint=e)},null,8,["modelValue"])])]),m("div",qs,[m("div",Ks,[m("label",Rs,[p(a,{content:"腾讯云短信服务 appid",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Js])])),_:1})]),p(n,{modelValue:d(V).struct.sms_sdk_app_id,"onUpdate:modelValue":s[5]||(s[5]=e=>d(V).struct.sms_sdk_app_id=e)},null,8,["modelValue"])])])]),m("div",As,[m("div",Is,[m("div",Ns,[m("label",js,[p(a,{content:"短信签名，如：萌卜兔",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Ds])])),_:1})]),p(n,{modelValue:d(V).struct.sign_name,"onUpdate:modelValue":s[6]||(s[6]=e=>d(V).struct.sign_name=e)},null,8,["modelValue"])])]),m("div",$s,[m("div",Bs,[m("label",Ps,[p(a,{content:"验证码模板 id，如：146XXX",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Es])])),_:1})]),p(n,{modelValue:d(V).struct.verify_code,"onUpdate:modelValue":s[7]||(s[7]=e=>d(V).struct.verify_code=e)},null,8,["modelValue"])])]),m("div",Ts,[m("div",Ws,[m("label",Ls,[p(a,{content:"短信服务所属区域，如：ap-guangzhou",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Ms])])),_:1})]),p(n,{modelValue:d(V).struct.region,"onUpdate:modelValue":s[8]||(s[8]=e=>d(V).struct.region=e)},null,8,["modelValue"])])]),m("div",Xs,[m("div",Gs,[m("label",Hs,[p(a,{content:"用于腾讯云短信测试接收测试信息的手机号",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Fs])])),_:1})]),p(n,{modelValue:d(V).struct.phone,"onUpdate:modelValue":s[10]||(s[10]=e=>d(V).struct.phone=e),onKeydown:s[11]||(s[11]=b((e=>k.test()),["enter"])),class:"custom",placeholder:"请输入手机号"},{suffix:f((()=>[p(w,{onClick:s[9]||(s[9]=e=>k.test()),loading:d(V).status.test},{default:f((()=>[d(V).status.test?v("",!0):(i(),h(t,{key:0,name:"phone",size:"14px"})),Qs])),_:1},8,["loading"])])),_:1},8,["modelValue"])])])])])),footer:f((()=>[p(w,{onClick:s[12]||(s[12]=e=>d(V).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(w,{onClick:s[13]||(s[13]=e=>k.save()),loading:d(V).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},Zs={class:"card"},et={class:"card-body"},st={class:"text-muted text-uppercase mt-0"},tt=m("br",null,null,-1),at={class:"d-inline-flex align-items-center"},lt=m("span",{class:"ms-1"},"自行注册",-1),nt={class:"m-b-20"},ot=m("span",{class:"badge bg-primary font-white"}," +0.1% ",-1),ct=m("span",{class:"text-muted ms-1"}," 安全性提升 ",-1),it={__name:"allow-register",setup(l,{expose:b}){const h=e({struct:{},status:{finish:!1,active:!1,loading:!0}});s((async()=>{await v.init()}));const v={init:async()=>{h.status.finish=!1,h.status.loading=!0;const{code:e,data:s}=await t.get("/api/config/one",{key:"ALLOW_REGISTER"});h.status.loading=!1,200===e&&(h.struct=s,h.status.finish=!0)},change:async e=>{const{code:s,msg:l}=await t.post("/api/config/save",{key:"ALLOW_REGISTER",value:e?1:0});200!==s&&(h.status.active=!e,a.error(l))}};return n((()=>h.struct),(()=>{h.status.active=1===parseInt(h.struct.value)}),{deep:!0}),b({init:v.init}),(e,s)=>{const t=o("i-svg"),a=o("el-tooltip"),l=o("el-switch"),n=c("load");return r((i(),u("div",Zs,[m("div",et,[p(t,{name:"register",color:"rgb(var(--assist-color))",size:"50px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",st,[p(a,{placement:"top"},{content:f((()=>[g(" ● 是否允许用户自行注册账号（开放注册功能？）"),tt,g(" ● 如果不允许，那么只能通过管理员手动创建账号 ")])),default:f((()=>[m("span",at,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),lt])])),_:1})]),m("h2",nt,[p(l,{modelValue:d(h).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(h).status.active=e),onChange:v.change,disabled:!d(h).status.finish,"active-text":"允许","inactive-text":"不允许"},null,8,["modelValue","onChange","disabled"])]),ot,ct])])),[[n,[d(h).status.loading,null,null]]])}}},ut={class:"card"},rt={class:"card-body"},dt={class:"text-muted text-uppercase mt-0"},mt=m("br",null,null,-1),pt={class:"d-inline-flex align-items-center"},ft=m("span",{class:"ms-1"},"JWT",-1),gt={class:"m-b-20"},bt=m("span",{class:"badge bg-primary font-white"}," +5% ",-1),ht={class:"text-muted ms-1"},vt=m("strong",{class:"flex-center"},"配置 JSON Web Token",-1),yt={class:"row"},wt={class:"col-md-6"},_t={class:"form-group mb-3"},xt={class:"form-label required"},Vt=m("span",{class:"ms-1"},"签发者：",-1),kt={class:"col-md-6"},zt={class:"form-group mb-3"},St={class:"form-label required"},Ct=m("span",{class:"ms-1"},"主题：",-1),Ut={class:"col-md-6"},Ot={class:"form-group mb-3"},qt={class:"form-label required"},Kt=m("span",{class:"ms-1"},"密钥：",-1),Rt=m("span",{class:"ms-1"},"随机",-1),Jt={class:"col-md-6"},At={class:"form-group mb-3"},It={class:"form-label required"},Nt=m("span",{class:"ms-1"},"过期时间(秒)：",-1),jt={__name:"jwt",setup(l,{expose:b}){const h=e({struct:{key:null,issuer:null,subject:null,expire:null},status:{active:!0,finish:!1,dialog:!1,loading:!0,wait:!1}});s((async()=>{await v.init()}));const v={init:async()=>{h.status.finish=!1,h.status.loading=!0;const{code:e,data:s}=await t.get("/api/toml/crypt",{name:"jwt"});h.status.loading=!1,200===e&&(h.struct=s,h.status.finish=!0)},show(){if(!h.status.finish)return a.warn("分页限制配置获取失败，无法进行配置！");h.status.dialog=!0},change:async e=>{e||(h.status.active=!0,a.warn("？？？？？？？？？？？？？<br>JWT是基础服务，这可不许关"))},save:async()=>{h.status.wait=!0;const{code:e,msg:s}=await t.put("/api/toml/crypt-jwt",h.struct);if(h.status.wait=!1,200!==e)return a.error("保存失败："+s);h.status.dialog=!1},rand(e="key"){let s="INIS-";const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(let a=0;a<32;a++)s+=t.charAt(Math.floor(62*Math.random()));h.struct[e]=s}};return n((()=>h.struct),(()=>{h.struct.key=h.struct.key.replace(/[^\w!@#$%^&*()_+\-=\[\]{};:'"\\|\/?,.<>~`\s]/g,""),h.struct.expire=h.struct.expire.replace(/[^\d\s*+\-\/]/g,"")}),{deep:!0}),b({init:v.init}),(e,s)=>{const t=o("i-svg"),a=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-button"),w=o("el-dialog"),_=c("load");return i(),u(y,null,[r((i(),u("div",ut,[m("div",rt,[p(t,{name:"crypt",size:"55px",color:"rgb(var(--assist-color))",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",dt,[p(a,{placement:"top"},{content:f((()=>[g(" JWT（JSON Web Token）是一种在网络应用中传递声明信息的轻量级、安全的方式。"),mt,g(" JWT具有通用性和可扩展性，可以应用在很多场景，比如用户认证、单点登录、API访问授权等。 ")])),default:f((()=>[m("span",pt,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),ft])])),_:1})]),m("h2",gt,[p(l,{modelValue:d(h).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(h).status.active=e),onChange:v.change,disabled:!d(h).status.finish,"active-text":"开始","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),bt,m("span",ht,[g(" 安全性提升，"),m("span",{onClick:s[1]||(s[1]=e=>v.show()),class:"text-white pointer"},"点我配置")])])])),[[_,[d(h).status.loading,null,null]]]),p(w,{modelValue:d(h).status.dialog,"onUpdate:modelValue":s[9]||(s[9]=e=>d(h).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[vt])),default:f((()=>[m("div",yt,[m("div",wt,[m("div",_t,[m("label",xt,[p(a,{content:"签发者，比如：萌卜兔",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Vt])])),_:1})]),p(n,{modelValue:d(h).struct.issuer,"onUpdate:modelValue":s[2]||(s[2]=e=>d(h).struct.issuer=e)},null,8,["modelValue"])])]),m("div",kt,[m("div",zt,[m("label",St,[p(a,{content:"主题，比如：萌卜兔",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Ct])])),_:1})]),p(n,{modelValue:d(h).struct.subject,"onUpdate:modelValue":s[3]||(s[3]=e=>d(h).struct.subject=e)},null,8,["modelValue"])])]),m("div",Ut,[m("div",Ot,[m("label",qt,[p(a,{content:"生成JWT的密钥，建议复杂度高一些",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Kt])])),_:1})]),p(n,{modelValue:d(h).struct.key,"onUpdate:modelValue":s[5]||(s[5]=e=>d(h).struct.key=e),class:"custom",placeholder:"请输入验证码"},{suffix:f((()=>[p(b,{onClick:s[4]||(s[4]=e=>v.rand())},{default:f((()=>[p(t,{name:"restore",color:"rgb(var(--vice-color))",size:"14px"}),Rt])),_:1})])),_:1},8,["modelValue"])])]),m("div",Jt,[m("div",At,[m("label",It,[p(a,{content:"签名有效期，可以用乘法，如：7 * 24 * 60 * 60 表示7天",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Nt])])),_:1})]),p(n,{modelValue:d(h).struct.expire,"onUpdate:modelValue":s[6]||(s[6]=e=>d(h).struct.expire=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(b,{onClick:s[7]||(s[7]=e=>d(h).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(b,{onClick:s[8]||(s[8]=e=>v.save()),loading:d(h).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},Dt={class:"card"},$t={class:"card-body"},Bt={class:"text-muted mt-0"},Pt=m("strong",{class:"text-success"},"推荐开启，有利于减少数据库和服务器的负担！",-1),Et=m("br",null,null,-1),Tt=m("br",null,null,-1),Wt=m("br",null,null,-1),Lt={class:"d-inline-flex align-items-center"},Mt=m("span",{class:"ms-1"},"Redis 缓存",-1),Xt={class:"m-b-20"},Gt=m("span",{class:"badge bg-success font-white"}," +30% ",-1),Ht={class:"text-muted"},Ft=m("strong",{class:"flex-center"},"配置 Redis 缓存服务",-1),Qt={class:"row"},Yt={class:"col-md-4"},Zt={class:"form-group mb-3"},ea={class:"form-label required"},sa=m("span",{class:"ms-1"},"主机：",-1),ta={class:"col-md-4"},aa={class:"form-group mb-3"},la={class:"form-label required"},na=m("span",{class:"ms-1"},"端口：",-1),oa={class:"col-md-4"},ca={class:"form-group mb-3"},ia={class:"form-label required"},ua=m("span",{class:"ms-1"},"数据库：",-1),ra={class:"font-13"},da={class:"row"},ma={class:"col-md-4"},pa={class:"form-group mb-3"},fa={class:"form-label"},ga=m("span",{class:"ms-1"},"密码：",-1),ba={class:"col-md-4"},ha={class:"form-group mb-3"},va={class:"form-label"},ya=m("span",{class:"ms-1"},"过期时间（秒）：",-1),wa={class:"col-md-4"},_a={class:"form-group mb-3"},xa={class:"form-label"},Va=m("span",{class:"ms-1"},"前缀：",-1),ka=m("span",{class:"ms-1"},"测试连接",-1),za={__name:"cache-redis",emits:["refresh"],setup(b,{expose:x,emit:V}){const k=e({struct:{open:!1,default:null,host:"localhost",port:6379,database:0,password:"",prefix:"inis:",expire:"2 * 60 * 60"},status:{finish:!1,active:!1,dialog:!1,loading:!0,test:!1},backup:{}});s((async()=>{await z.init()}));const z={init:async()=>{k.status.finish=!1,k.status.loading=!0;const{code:e,data:s}=await t.get("/api/toml/cache",{name:"redis"});k.status.loading=!1,200===e&&(k.struct=s,k.backup=JSON.parse(JSON.stringify(s)),k.status.finish=!0)},show(){if(!k.status.finish)return a.warn("配置获取失败，无法进行配置！");k.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await t.put("/api/toml/cache-default",{value:"redis",open:e});if(200===s)return V("refresh","cache-file","cache-ram");k.status.active=!e,a.error(l)},save:async()=>{if(!l.object.equal(k.struct,k.backup,["host","port","database","password"]))return a.warn("请先完成测试连接");if(l.is.empty(k.struct.host))return a.warn("请填写 主机地址！");if(l.is.empty(k.struct.port))return a.warn("请填写 端口号！");if(l.is.empty(k.struct.database))return a.warn("请选择 数据库！");k.status.wait=!0;const{code:e,msg:s}=await t.put("/api/toml/cache-redis",k.struct);if(k.status.wait=!1,200!==e)return a.error("保存失败："+s);k.status.dialog=!1},test:async()=>{if(l.is.empty(k.struct.host))return a.warn("请填写 主机地址！");if(l.is.empty(k.struct.port))return a.warn("请填写 端口号！");if(l.is.empty(k.struct.database))return a.warn("请选择 数据库！");k.status.test=!0;const{code:e,msg:s,data:n}=await t.post("/api/toml/test-redis",k.struct);if(k.status.test=!1,200===e)return k.backup=JSON.parse(JSON.stringify(k.struct)),a.success(s);a.error(`${s}<br>${n}`)}};return n((()=>k.struct),(()=>{k.status.active="redis"===k.struct.default&&k.struct.open}),{deep:!0}),x({init:z.init}),(e,s)=>{const t=o("i-svg"),a=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-input-number"),x=o("el-option"),V=o("el-select"),S=o("el-button"),C=o("el-dialog"),U=c("load");return i(),u(y,null,[r((i(),u("div",Dt,[m("div",$t,[p(t,{name:"redis",color:"rgb(var(--assist-color))",size:"56px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",Bt,[p(a,{placement:"top"},{content:f((()=>[Pt,Et,g(" 开启后会对API数据进行缓存，减少重复执行数据库操作以及对数据的运算，"),Tt,g(" 从而提高API的响应速度，减少服务器的负担。"),Wt,g(" PS：缓存数据会存储在专门的缓存数据库Redis中。 ")])),default:f((()=>[m("span",Lt,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),Mt])])),_:1})]),m("h2",Xt,[p(l,{modelValue:d(k).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(k).status.active=e),onChange:z.change,disabled:!d(k).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),Gt,m("span",Ht,[g(" 综合提升，"),m("span",{onClick:s[1]||(s[1]=e=>z.show()),class:"text-white pointer"},"点我配置")])])])),[[U,[d(k).status.loading,null,null]]]),p(C,{modelValue:d(k).status.dialog,"onUpdate:modelValue":s[11]||(s[11]=e=>d(k).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[Ft])),default:f((()=>[m("div",Qt,[m("div",Yt,[m("div",Zt,[m("label",ea,[p(a,{content:"主机地址，如：localhost",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),sa])])),_:1})]),p(n,{modelValue:d(k).struct.host,"onUpdate:modelValue":s[2]||(s[2]=e=>d(k).struct.host=e)},null,8,["modelValue"])])]),m("div",ta,[m("div",aa,[m("label",la,[p(a,{content:"端口号，如：6379",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),na])])),_:1})]),p(b,{modelValue:d(k).struct.port,"onUpdate:modelValue":s[3]||(s[3]=e=>d(k).struct.port=e),min:1,max:65535,class:"w-100 d-flex",style:{height:"28px"},"controls-position":"right"},null,8,["modelValue"])])]),m("div",oa,[m("div",ca,[m("label",ia,[p(a,{content:"数据库索引，如：0",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),ua])])),_:1})]),p(V,{modelValue:d(k).struct.database,"onUpdate:modelValue":s[4]||(s[4]=e=>d(k).struct.database=e),placeholder:"请选择方式",class:"d-block custom font-13"},{default:f((()=>[(i(),u(y,null,w(16,((e,s)=>p(x,{key:s,label:s,value:s},{default:f((()=>[m("span",ra,_(s),1)])),_:2},1032,["label","value"]))),64))])),_:1},8,["modelValue"])])])]),m("div",da,[m("div",ma,[m("div",pa,[m("label",fa,[p(a,{content:"Redis密码，无密码为空即可",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),ga])])),_:1})]),p(n,{modelValue:d(k).struct.password,"onUpdate:modelValue":s[5]||(s[5]=e=>d(k).struct.password=e),"show-password":"",placeholder:"无密码为空即可"},null,8,["modelValue"])])]),m("div",ba,[m("div",ha,[m("label",va,[p(a,{content:"缓存有效时间，建议2小时，即7200秒，0表示永不过期",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),ya])])),_:1})]),p(n,{modelValue:d(k).struct.expire,"onUpdate:modelValue":s[6]||(s[6]=e=>d(k).struct.expire=e)},null,8,["modelValue"])])]),m("div",wa,[m("div",_a,[m("label",xa,[p(a,{content:"每个Key固定的前缀，如：inis:",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Va])])),_:1})]),p(n,{modelValue:d(k).struct.prefix,"onUpdate:modelValue":s[7]||(s[7]=e=>d(k).struct.prefix=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(S,{onClick:s[8]||(s[8]=e=>d(k).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(S,{onClick:s[9]||(s[9]=e=>z.test()),loading:d(k).status.test},{default:f((()=>[d(k).status.test?v("",!0):(i(),h(t,{key:0,name:"connect",size:"14px"})),ka])),_:1},8,["loading"]),p(S,{onClick:s[10]||(s[10]=e=>z.save()),loading:d(k).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},Sa={class:"card"},Ca={class:"card-body"},Ua={class:"text-muted mt-0"},Oa=m("strong",{class:"text-success"},"推荐开启，有利于减少数据库和服务器的负担！",-1),qa=m("br",null,null,-1),Ka=m("br",null,null,-1),Ra=m("br",null,null,-1),Ja=m("code",null,"runtime/cache",-1),Aa={class:"d-inline-flex align-items-center"},Ia=m("span",{class:"ms-1"},"文件缓存",-1),Na={class:"m-b-20"},ja=m("span",{class:"badge bg-success font-white"}," +20% ",-1),Da={class:"text-muted"},$a=m("strong",{class:"flex-center"},"配置 文件 缓存服务",-1),Ba={class:"row"},Pa={class:"col-md-4"},Ea={class:"form-group mb-3"},Ta={class:"form-label"},Wa=m("span",{class:"ms-1"},"缓存目录：",-1),La={class:"col-md-4"},Ma={class:"form-group mb-3"},Xa={class:"form-label"},Ga=m("span",{class:"ms-1"},"过期时间（秒）：",-1),Ha={class:"col-md-4"},Fa={class:"form-group mb-3"},Qa={class:"form-label"},Ya=m("span",{class:"ms-1"},"前缀：",-1),Za={__name:"cache-file",emits:["refresh"],setup(b,{expose:h,emit:v}){const w=e({struct:{open:!1,default:null,path:null,prefix:"inis_",expire:"2 * 60 * 60"},status:{finish:!1,active:!1,dialog:!1,loading:!0,wait:!1}});s((async()=>{await _.init()}));const _={init:async()=>{w.status.finish=!1,w.status.loading=!0;const{code:e,data:s}=await t.get("/api/toml/cache",{name:"file"});w.status.loading=!1,200===e&&(w.struct=s,w.status.finish=!0)},show(){if(!w.status.finish)return a.warn("配置获取失败，无法进行配置！");w.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await t.put("/api/toml/cache-default",{value:"file",open:e});if(200===s)return v("refresh","cache-redis","cache-ram");w.status.active=!e,a.error(l)},save:async()=>{if(l.is.empty(w.struct.path))return a.warn("请填写 缓存目录！");if(l.is.empty(w.struct.expire))return a.warn("请填写 过期时间！");if(l.is.empty(w.struct.prefix))return a.warn("请选择 缓存前缀！");w.status.wait=!0;const{code:e,msg:s}=await t.put("/api/toml/cache-file",w.struct);if(w.status.wait=!1,200!==e)return a.error("保存失败："+s);w.status.dialog=!1}};return n((()=>w.struct),(()=>{w.status.active="file"===w.struct.default&&w.struct.open}),{deep:!0}),h({init:_.init}),(e,s)=>{const t=o("i-svg"),a=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-button"),h=o("el-dialog"),v=c("load");return i(),u(y,null,[r((i(),u("div",Sa,[m("div",Ca,[p(t,{name:"file",color:"rgb(var(--assist-color))",size:"55px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",Ua,[p(a,{placement:"top"},{content:f((()=>[Oa,qa,g(" 开启后会对API数据进行缓存，减少重复执行数据库操作以及对数据的运算，"),Ka,g(" 从而提高API的响应速度，减少服务器的负担。"),Ra,g(" PS：缓存数据会通过文件的方式存储在服务器的 "),Ja,g(" 目录下。 ")])),default:f((()=>[m("span",Aa,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),Ia])])),_:1})]),m("h2",Na,[p(l,{modelValue:d(w).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(w).status.active=e),onChange:_.change,disabled:!d(w).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),ja,m("span",Da,[g(" 综合提升，"),m("span",{onClick:s[1]||(s[1]=e=>_.show()),class:"text-white pointer"},"点我配置")])])])),[[v,[d(w).status.loading,null,null]]]),p(h,{modelValue:d(w).status.dialog,"onUpdate:modelValue":s[7]||(s[7]=e=>d(w).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[$a])),default:f((()=>[m("div",Ba,[m("div",Pa,[m("div",Ea,[m("label",Ta,[p(a,{content:"缓存文件存储到哪个目录下？推荐：runtime/cache",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Wa])])),_:1})]),p(n,{modelValue:d(w).struct.path,"onUpdate:modelValue":s[2]||(s[2]=e=>d(w).struct.path=e),placeholder:"缓存目录"},null,8,["modelValue"])])]),m("div",La,[m("div",Ma,[m("label",Xa,[p(a,{content:"缓存有效时间，建议2小时，即7200秒，0表示永不过期",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Ga])])),_:1})]),p(n,{modelValue:d(w).struct.expire,"onUpdate:modelValue":s[3]||(s[3]=e=>d(w).struct.expire=e)},null,8,["modelValue"])])]),m("div",Ha,[m("div",Fa,[m("label",Qa,[p(a,{content:"每个Key固定的前缀，推荐：inis_",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Ya])])),_:1})]),p(n,{modelValue:d(w).struct.prefix,"onUpdate:modelValue":s[4]||(s[4]=e=>d(w).struct.prefix=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(b,{onClick:s[5]||(s[5]=e=>d(w).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(b,{onClick:s[6]||(s[6]=e=>_.save()),loading:d(w).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},el={class:"card"},sl={class:"card-body"},tl={class:"text-muted mt-0"},al=m("strong",{class:"text-success"},"推荐开启，有利于减少数据库和服务器的负担！",-1),ll=m("br",null,null,-1),nl=m("br",null,null,-1),ol=m("br",null,null,-1),cl={class:"d-inline-flex align-items-center"},il=m("span",{class:"ms-1"},"内存缓存",-1),ul={class:"m-b-20"},rl=m("span",{class:"badge bg-success font-white"}," +20% ",-1),dl={class:"text-muted"},ml=m("strong",{class:"flex-center"},"配置 内存 缓存服务",-1),pl={class:"row"},fl={class:"col-md-12"},gl={class:"form-group mb-3"},bl={class:"form-label"},hl=m("span",{class:"ms-1"},"过期时间（秒）：",-1),vl={__name:"cache-ram",emits:["refresh"],setup(b,{expose:h,emit:v}){const w=e({struct:{open:!1,default:null,expire:"2 * 60 * 60"},status:{finish:!1,active:!1,dialog:!1,loading:!0,wait:!1}});s((async()=>{await _.init()}));const _={init:async()=>{w.status.finish=!1,w.status.loading=!0;const{code:e,data:s}=await t.get("/api/toml/cache",{name:"ram"});w.status.loading=!1,200===e&&(w.struct=s,w.status.finish=!0)},show(){if(!w.status.finish)return a.warn("配置获取失败，无法进行配置！");w.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await t.put("/api/toml/cache-default",{value:"ram",open:e});if(200===s)return v("refresh","cache-redis","cache-file");w.status.active=!e,a.error(l)},save:async()=>{if(l.is.empty(w.struct.expire))return a.warn("请填写 过期时间！");w.status.wait=!0;const{code:e,msg:s}=await t.put("/api/toml/cache-ram",w.struct);if(w.status.wait=!1,200!==e)return a.error("保存失败："+s);w.status.dialog=!1}};return n((()=>w.struct),(()=>{w.status.active="ram"===w.struct.default&&w.struct.open}),{deep:!0}),h({init:_.init}),(e,s)=>{const t=o("i-svg"),a=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-button"),h=o("el-dialog"),v=c("load");return i(),u(y,null,[r((i(),u("div",el,[m("div",sl,[p(t,{name:"ram",color:"rgb(var(--assist-color))",size:"55px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",tl,[p(a,{placement:"top"},{content:f((()=>[al,ll,g(" 开启后会对API数据进行缓存，减少重复执行数据库操作以及对数据的运算，"),nl,g(" 从而提高API的响应速度，减少服务器的负担。"),ol,g(" PS：缓存数据会通过内存的方式存储在服务器的内存中。 ")])),default:f((()=>[m("span",cl,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),il])])),_:1})]),m("h2",ul,[p(l,{modelValue:d(w).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(w).status.active=e),onChange:_.change,disabled:!d(w).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),rl,m("span",dl,[g(" 综合提升，"),m("span",{onClick:s[1]||(s[1]=e=>_.show()),class:"text-white pointer"},"点我配置")])])])),[[v,[d(w).status.loading,null,null]]]),p(h,{modelValue:d(w).status.dialog,"onUpdate:modelValue":s[5]||(s[5]=e=>d(w).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[ml])),default:f((()=>[m("div",pl,[m("div",fl,[m("div",gl,[m("label",bl,[p(a,{content:"缓存有效时间，建议2小时，即7200秒，0表示永不过期",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),hl])])),_:1})]),p(n,{modelValue:d(w).struct.expire,"onUpdate:modelValue":s[2]||(s[2]=e=>d(w).struct.expire=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(b,{onClick:s[3]||(s[3]=e=>d(w).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(b,{onClick:s[4]||(s[4]=e=>_.save()),loading:d(w).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},yl={class:"card"},wl={class:"card-body"},_l={class:"text-muted text-uppercase mt-0"},xl=m("br",null,null,-1),Vl={class:"d-inline-flex align-items-center"},kl=m("span",{class:"ms-1"},"本地存储",-1),zl={class:"m-b-20"},Sl=m("span",{class:"badge bg-dark font-white"}," 传统 ",-1),Cl={class:"text-muted ms-1"},Ul=m("strong",{class:"flex-center"},"配置本地存储",-1),Ol={class:"row"},ql={class:"col-6"},Kl={class:"form-group mb-3"},Rl={class:"form-label required"},Jl=m("span",{class:"ms-1"},"域名：",-1),Al={class:"col-md-6"},Il={class:"form-group mb-3"},Nl={class:"form-label"},jl=m("span",{class:"ms-1"},"存储目录：",-1),Dl={__name:"storage-local",emits:["refresh"],setup(l,{expose:b,emit:h}){const v=e({struct:{default:null,domain:null,path:"storage"},status:{active:!0,finish:!1,dialog:!1,loading:!0,wait:!1}});s((async()=>{await w.init()}));const w={init:async()=>{v.status.finish=!1,v.status.loading=!0;const{code:e,data:s}=await t.get("/api/toml/storage",{name:"local"});v.status.loading=!1,200===e&&(v.struct=s,v.status.finish=!0)},show(){if(!v.status.finish)return a.warn("配置获取失败，无法进行配置！");v.status.dialog=!0},change:async e=>{if(!e)return v.status.active=!0;const{code:s,msg:l}=await t.put("/api/toml/storage-default",{value:e?"local":null});if(200===s)return h("refresh");v.status.active=!e,a.error(l)},save:async()=>{v.status.wait=!0;const{code:e,msg:s}=await t.put("/api/toml/storage-local",v.struct);if(v.status.wait=!1,200!==e)return a.error("保存失败："+s);v.status.dialog=!1}};return n((()=>v.struct),(()=>{v.status.active="local"===v.struct.default}),{deep:!0}),b({init:w.init}),(e,s)=>{const t=o("i-svg"),a=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-button"),h=o("el-dialog"),_=c("load");return i(),u(y,null,[r((i(),u("div",yl,[m("div",wl,[p(t,{name:"serve",color:"rgb(var(--assist-color))",size:"60px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",_l,[p(a,{placement:"top"},{content:f((()=>[g(" ● 本地存储是指将图片等资源文件存储到服务器本地，然后通过访问服务器的方式获取资源文件"),xl,g(" ● 本地存储的优点是不花钱，缺点是占用服务器空间和带宽 ")])),default:f((()=>[m("span",Vl,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),kl])])),_:1})]),m("h2",zl,[p(l,{modelValue:d(v).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(v).status.active=e),onChange:w.change,disabled:!d(v).status.finish,"active-text":"开始","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),Sl,m("span",Cl,[g(" 这个不花钱，"),m("span",{onClick:s[1]||(s[1]=e=>w.show()),class:"text-white pointer"},"点我配置")])])])),[[_,[d(v).status.loading,null,null]]]),p(h,{modelValue:d(v).status.dialog,"onUpdate:modelValue":s[6]||(s[6]=e=>d(v).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[Ul])),default:f((()=>[m("div",Ol,[m("div",ql,[m("div",Kl,[m("label",Rl,[p(a,{content:"签发者，比如：萌卜兔",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Jl])])),_:1})]),p(n,{modelValue:d(v).struct.domain,"onUpdate:modelValue":s[2]||(s[2]=e=>d(v).struct.domain=e)},null,8,["modelValue"])])]),m("div",Al,[m("div",Il,[m("label",Nl,[p(a,{content:"存储在哪个目录下",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),jl])])),_:1})]),p(n,{modelValue:d(v).struct.path,"onUpdate:modelValue":s[3]||(s[3]=e=>d(v).struct.path=e),placeholder:"如: storage"},null,8,["modelValue"])])])])])),footer:f((()=>[p(b,{onClick:s[4]||(s[4]=e=>d(v).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(b,{onClick:s[5]||(s[5]=e=>w.save()),loading:d(v).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},$l={class:"card"},Bl={class:"card-body"},Pl={class:"text-muted text-uppercase mt-0"},El=m("br",null,null,-1),Tl={class:"d-inline-flex align-items-center"},Wl=m("span",{class:"ms-1"},"OSS",-1),Ll={class:"m-b-20"},Ml=m("span",{class:"badge bg-warning font-white"}," 推荐 ",-1),Xl={class:"text-muted ms-1"},Gl=m("strong",{class:"flex-center"},"配置 阿里云OSS 存储",-1),Hl={class:"row"},Fl={class:"col-md-6"},Ql={class:"form-group mb-3"},Yl={class:"form-label required"},Zl=m("span",{class:"ms-1"},"AccessKey ID：",-1),en={class:"col-md-6"},sn={class:"form-group mb-3"},tn={class:"form-label required"},an=m("span",{class:"ms-1"},"AccessKey Secret：",-1),ln={class:"col-md-4"},nn={class:"form-group mb-3"},on={class:"form-label required"},cn=m("span",{class:"ms-1"},"Endpoint：",-1),un={class:"font-13"},rn={class:"text-muted float-end"},dn={class:"col-md-4"},mn={class:"form-group mb-3"},pn={class:"form-label required"},fn=m("span",{class:"ms-1"},"OSS Bucket：",-1),gn={class:"col-md-4"},bn={class:"form-group mb-3"},hn={class:"form-label"},vn=m("span",{class:"ms-1"},"存储目录：",-1),yn={class:"col-md-12"},wn={class:"form-group mb-3"},_n={class:"form-label"},xn=m("span",{class:"ms-1"},"OSS 外网域名：",-1),Vn=m("span",{class:"ms-1"},"测试连接",-1),kn={__name:"storage-oss",emits:["refresh"],setup(b,{expose:x,emit:V}){const k=e({struct:{path:"inis",default:null,domain:null,bucket:null,endpoint:null,access_key_id:null,access_key_secret:null},status:{active:!0,finish:!1,dialog:!1,loading:!0,wait:!1,test:!1},backup:{},select:{endpoint:[{value:"oss-cn-hangzhou.aliyuncs.com",label:"华东1（杭州）"},{value:"oss-cn-shanghai.aliyuncs.com",label:"华东2（上海）"},{value:"oss-cn-nanjing.aliyuncs.com",label:"华东5（南京-本地地域）"},{value:"oss-cn-fuzhou.aliyuncs.com",label:"华东6（福州-本地地域）"},{value:"oss-cn-qingdao.aliyuncs.com",label:"华北1（青岛）"},{value:"oss-cn-beijing.aliyuncs.com",label:"华北2（北京）"},{value:"oss-cn-zhangjiakou.aliyuncs.com",label:"华北 3（张家口）"},{value:"oss-cn-huhehaote.aliyuncs.com",label:"华北5（呼和浩特）"},{value:"oss-cn-wulanchabu.aliyuncs.com",label:"华北6（乌兰察布）"},{value:"oss-cn-shenzhen.aliyuncs.com",label:"华南1（深圳）"},{value:"oss-cn-heyuan.aliyuncs.com",label:"华南2（河源）"},{value:"oss-cn-guangzhou.aliyuncs.com",label:"华南3（广州）"},{value:"oss-cn-chengdu.aliyuncs.com",label:"西南1（成都）"},{value:"oss-cn-hongkong.aliyuncs.com",label:"中国香港"},{value:"oss-us-west-1.aliyuncs.com",label:"美国（硅谷）①"},{value:"oss-us-east-1.aliyuncs.com",label:"美国（弗吉尼亚）①"},{value:"oss-ap-northeast-1.aliyuncs.com",label:"日本（东京）①"},{value:"oss-ap-northeast-2.aliyuncs.com",label:"韩国（首尔）"},{value:"oss-ap-southeast-1.aliyuncs.com",label:"新加坡①"},{value:"oss-ap-southeast-2.aliyuncs.com",label:"澳大利亚（悉尼）①"},{value:"oss-ap-southeast-3.aliyuncs.com",label:"马来西亚（吉隆坡）①"},{value:"oss-ap-southeast-5.aliyuncs.com",label:"印度尼西亚（雅加达）①"},{value:"oss-ap-southeast-6.aliyuncs.com",label:"菲律宾（马尼拉）"},{value:"oss-ap-southeast-7.aliyuncs.com",label:"泰国（曼谷）"},{value:"oss-ap-south-1.aliyuncs.com",label:"印度（孟买）①"},{value:"oss-eu-central-1.aliyuncs.com",label:"德国（法兰克福）①"},{value:"oss-eu-west-1.aliyuncs.com",label:"英国（伦敦）"},{value:"oss-me-east-1.aliyuncs.com",label:"阿联酋（迪拜）①"},{value:"oss-rg-china-mainland.aliyuncs.com",label:"无地域属性（中国内地）"},{value:"oss-cn-hzfinance.aliyuncs.com",label:"杭州金融云公网"},{value:"oss-cn-shanghai-finance-1-pub.aliyuncs.com",label:"上海金融云公网"},{value:"oss-cn-szfinance.aliyuncs.com",label:"深圳金融云公网"},{value:"oss-cn-beijing-finance-1-pub.aliyuncs.com",label:"北京金融云公网"}]}});s((async()=>{await z.init()}));const z={init:async()=>{k.status.finish=!1,k.status.loading=!0;const{code:e,data:s}=await t.get("/api/toml/storage",{name:"oss"});k.status.loading=!1,200===e&&(k.struct=s,k.backup=JSON.parse(JSON.stringify(s)),k.status.finish=!0)},show(){if(!k.status.finish)return a.warn("存储配置获取失败，无法进行配置！");k.status.dialog=!0},change:async e=>{if(!e)return k.status.active=!0;const{code:s,msg:l}=await t.put("/api/toml/storage-default",{value:e?"oss":null});if(200===s)return V("refresh");k.status.active=!e,a.error(l)},save:async()=>{if(!l.object.equal(k.struct,k.backup,["access_key_id","access_key_secret","endpoint","bucket"]))return a.warn("请先OSS连接测试");if(l.is.empty(k.struct.access_key_id))return a.warn("请填写 AccessKey ID！");if(l.is.empty(k.struct.access_key_secret))return a.warn("请填写 AccessKey Secret！");if(l.is.empty(k.struct.endpoint))return a.warn("请填写 Endpoint！");if(l.is.empty(k.struct.bucket))return a.warn("请填写 Bucket！");k.status.wait=!0;const{code:e,msg:s}=await t.put("/api/toml/storage-oss",k.struct);if(k.status.wait=!1,200!==e)return a.error("保存失败："+s);k.status.dialog=!1},test:async()=>{if(l.is.empty(k.struct.access_key_id))return a.warn("请填写 AccessKey ID！");if(l.is.empty(k.struct.access_key_secret))return a.warn("请填写 AccessKey Secret！");if(l.is.empty(k.struct.endpoint))return a.warn("请填写 Endpoint！");if(l.is.empty(k.struct.bucket))return a.warn("请填写 Bucket！");k.status.test=!0;const{code:e,msg:s,data:n}=await t.post("/api/toml/test-oss",k.struct);if(k.status.test=!1,200===e)return k.backup=JSON.parse(JSON.stringify(k.struct)),a.success(s);a.error(`${s}<br>${n}`)}};return n((()=>k.struct),(()=>{k.status.active="oss"===k.struct.default}),{deep:!0}),x({init:z.init}),(e,s)=>{const t=o("i-svg"),a=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-option"),x=o("el-select"),V=o("el-button"),S=o("el-dialog"),C=c("load");return i(),u(y,null,[r((i(),u("div",$l,[m("div",Bl,[p(t,{name:"aliyun",color:"rgb(var(--assist-color))",size:"60px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",Pl,[p(a,{placement:"top"},{content:f((()=>[g(" ● OSS可以替代传统的本地存储，有能力的情况推荐开启OSS存储"),El,g(" ● 开启后，后续上传的文件将会自动上传到OSS，不会占用服务器的空间和带宽 ")])),default:f((()=>[m("span",Tl,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),Wl])])),_:1})]),m("h2",Ll,[p(l,{modelValue:d(k).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(k).status.active=e),onChange:z.change,disabled:!d(k).status.finish,"active-text":"开始","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),Ml,m("span",Xl,[g(" 这个还不错，"),m("span",{onClick:s[1]||(s[1]=e=>z.show()),class:"text-white pointer"},"点我配置")])])])),[[C,[d(k).status.loading,null,null]]]),p(S,{modelValue:d(k).status.dialog,"onUpdate:modelValue":s[11]||(s[11]=e=>d(k).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[Gl])),default:f((()=>[m("div",Hl,[m("div",Fl,[m("div",Ql,[m("label",Yl,[p(a,{content:"阿里云 AccessKey ID",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Zl])])),_:1})]),p(n,{modelValue:d(k).struct.access_key_id,"onUpdate:modelValue":s[2]||(s[2]=e=>d(k).struct.access_key_id=e),"show-password":""},null,8,["modelValue"])])]),m("div",en,[m("div",sn,[m("label",tn,[p(a,{content:"阿里云AccessKey Secret",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),an])])),_:1})]),p(n,{modelValue:d(k).struct.access_key_secret,"onUpdate:modelValue":s[3]||(s[3]=e=>d(k).struct.access_key_secret=e),"show-password":""},null,8,["modelValue"])])]),m("div",ln,[m("div",nn,[m("label",on,[p(a,{content:"OSS 外网 Endpoint",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),cn])])),_:1})]),p(x,{modelValue:d(k).struct.endpoint,"onUpdate:modelValue":s[4]||(s[4]=e=>d(k).struct.endpoint=e),placeholder:"请选择所在地区",class:"d-block custom font-13"},{default:f((()=>[(i(!0),u(y,null,w(d(k).select.endpoint,(e=>(i(),h(b,{key:e.value,label:e.label,value:e.value},{default:f((()=>[m("span",un,_(e.label),1),m("small",rn,_(e.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),m("div",dn,[m("div",mn,[m("label",pn,[p(a,{content:"存储桶名称",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),fn])])),_:1})]),p(n,{modelValue:d(k).struct.bucket,"onUpdate:modelValue":s[5]||(s[5]=e=>d(k).struct.bucket=e)},null,8,["modelValue"])])]),m("div",gn,[m("div",bn,[m("label",hn,[p(a,{content:"存储在哪个目录下",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),vn])])),_:1})]),p(n,{modelValue:d(k).struct.path,"onUpdate:modelValue":s[6]||(s[6]=e=>d(k).struct.path=e),placeholder:"如: inis"},null,8,["modelValue"])])]),m("div",yn,[m("div",wn,[m("label",_n,[p(a,{content:"用于访问 - 不填写则使用默认域名",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),xn])])),_:1})]),p(n,{modelValue:d(k).struct.domain,"onUpdate:modelValue":s[7]||(s[7]=e=>d(k).struct.domain=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(V,{onClick:s[8]||(s[8]=e=>d(k).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(V,{onClick:s[9]||(s[9]=e=>z.test()),loading:d(k).status.test},{default:f((()=>[d(k).status.test?v("",!0):(i(),h(t,{key:0,name:"connect",size:"14px"})),Vn])),_:1},8,["loading"]),p(V,{onClick:s[10]||(s[10]=e=>z.save()),loading:d(k).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},zn={class:"card"},Sn={class:"card-body"},Cn={class:"text-muted text-uppercase mt-0"},Un=m("br",null,null,-1),On={class:"d-inline-flex align-items-center"},qn=m("span",{class:"ms-1"},"COS",-1),Kn={class:"m-b-20"},Rn=m("span",{class:"badge bg-primary font-white"}," 推荐 ",-1),Jn={class:"text-muted ms-1"},An=m("strong",{class:"flex-center"},"配置 腾讯云COS 存储",-1),In={class:"row"},Nn={class:"col-md-6"},jn={class:"form-group mb-3"},Dn={class:"form-label required"},$n=m("span",{class:"ms-1"},"SecretId：",-1),Bn={class:"col-md-6"},Pn={class:"form-group mb-3"},En={class:"form-label required"},Tn=m("span",{class:"ms-1"},"SecretKey：",-1),Wn={class:"col-md-6"},Ln={class:"form-group mb-3"},Mn={class:"form-label required"},Xn=m("span",{class:"ms-1"},"AppId：",-1),Gn={class:"col-md-6"},Hn={class:"form-group mb-3"},Fn={class:"form-label required"},Qn=m("span",{class:"ms-1"},"COS Bucket：",-1),Yn={class:"col-md-3"},Zn={class:"form-group mb-3"},eo={class:"form-label required"},so=m("span",{class:"ms-1"},"COS Region：",-1),to={class:"font-13"},ao={class:"text-muted float-end"},lo={class:"col-md-3"},no={class:"form-group mb-3"},oo={class:"form-label"},co=m("span",{class:"ms-1"},"存储目录：",-1),io={class:"col-md-6"},uo={class:"form-group mb-3"},ro={class:"form-label"},mo=m("span",{class:"ms-1"},"COS 外网域名：",-1),po=m("span",{class:"ms-1"},"测试连接",-1),fo={__name:"storage-cos",emits:["refresh"],setup(b,{expose:x,emit:V}){const k=e({struct:{path:"inis",default:null,domain:null,app_id:null,bucket:null,region:null,secret_id:null,secret_key:null},status:{active:!0,finish:!1,dialog:!1,loading:!0,wait:!1,test:!1},backup:{},select:{region:[{value:"ap-beijing-1",label:"北京一区",area:"中国大陆"},{value:"ap-beijing",label:"北京",area:"中国大陆"},{value:"ap-nanjing",label:"南京",area:"中国大陆"},{value:"ap-shanghai",label:"上海",area:"中国大陆"},{value:"ap-guangzhou",label:"广州",area:"中国大陆"},{value:"ap-chengdu",label:"成都",area:"中国大陆"},{value:"ap-chongqing",label:"重庆",area:"中国大陆"},{value:"ap-shenzhen-fsi",label:"深圳金融",area:"中国大陆"},{value:"ap-shanghai-fsi",label:"上海金融",area:"中国大陆"},{value:"ap-beijing-fsi",label:"北京金融",area:"中国大陆"},{value:"ap-hongkong",label:"中国香港",area:"亚太"},{value:"ap-singapore",label:"新加坡",area:"亚太"},{value:"ap-mumbai",label:"孟买",area:"亚太"},{value:"ap-jakarta",label:"雅加达",area:"亚太"},{value:"ap-seoul",label:"首尔",area:"亚太"},{value:"ap-bangkok",label:"曼谷",area:"亚太"},{value:"ap-tokyo",label:"东京",area:"亚太"},{value:"na-siliconvalley",label:"硅谷（美西）",area:"北美"},{value:"na-ashburn",label:"弗吉尼亚（美东）",area:"北美"},{value:"na-toronto",label:"多伦多",area:"北美"},{value:"sa-saopaulo",label:"圣保罗",area:"南美"},{value:"eu-frankfurt",label:"法兰克福",area:"欧洲"}]}});s((async()=>{await z.init()}));const z={init:async()=>{k.status.finish=!1,k.status.loading=!0;const{code:e,data:s}=await t.get("/api/toml/storage",{name:"cos"});k.status.loading=!1,200===e&&(k.struct=s,k.backup=JSON.parse(JSON.stringify(s)),k.status.finish=!0)},show(){if(!k.status.finish)return a.warn("配置获取失败，无法进行配置！");k.status.dialog=!0},change:async e=>{if(!e)return k.status.active=!0;const{code:s,msg:l}=await t.put("/api/toml/storage-default",{value:e?"cos":null});if(200===s)return V("refresh");k.status.active=!e,a.error(l)},save:async()=>{if(!l.object.equal(k.struct,k.backup,["secret_id","secret_key","app_id","region","bucket"]))return a.warn("请先OSS连接测试");if(l.is.empty(k.struct.secret_id))return a.warn("请填写 SecretId！");if(l.is.empty(k.struct.secret_key))return a.warn("请填写 SecretKey！");if(l.is.empty(k.struct.app_id))return a.warn("请填写 AppId！");if(l.is.empty(k.struct.region))return a.warn("请填写 Bucket！");if(l.is.empty(k.struct.bucket))return a.warn("请填写 Region！");k.status.wait=!0;const{code:e,msg:s}=await t.put("/api/toml/storage-cos",k.struct);if(k.status.wait=!1,200!==e)return a.error("保存失败："+s);k.status.dialog=!1},test:async()=>{if(l.is.empty(k.struct.secret_id))return a.warn("请填写 SecretId！");if(l.is.empty(k.struct.secret_key))return a.warn("请填写 SecretKey！");if(l.is.empty(k.struct.app_id))return a.warn("请填写 AppId！");if(l.is.empty(k.struct.region))return a.warn("请填写 Bucket！");if(l.is.empty(k.struct.bucket))return a.warn("请填写 Region！");k.status.test=!0;const{code:e,msg:s,data:n}=await t.post("/api/toml/test-cos",k.struct);if(k.status.test=!1,200===e)return k.backup=JSON.parse(JSON.stringify(k.struct)),a.success(s);a.error(`${s}<br>${n}`)}};return n((()=>k.struct),(()=>{k.status.active="cos"===k.struct.default}),{deep:!0}),x({init:z.init}),(e,s)=>{const t=o("i-svg"),a=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-option"),x=o("el-select"),V=o("el-button"),S=o("el-dialog"),C=c("load");return i(),u(y,null,[r((i(),u("div",zn,[m("div",Sn,[p(t,{name:"tencent",color:"rgb(var(--assist-color))",size:"60px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",Cn,[p(a,{placement:"top"},{content:f((()=>[g(" ● COS可以替代传统的本地存储，有能力的情况推荐开启COS存储"),Un,g(" ● 开启后，后续上传的文件将会自动上传到COS，不会占用服务器的空间和带宽 ")])),default:f((()=>[m("span",On,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),qn])])),_:1})]),m("h2",Kn,[p(l,{modelValue:d(k).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(k).status.active=e),onChange:z.change,disabled:!d(k).status.finish,"active-text":"开始","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),Rn,m("span",Jn,[g(" 这个也不错，"),m("span",{onClick:s[1]||(s[1]=e=>z.show()),class:"text-white pointer"},"点我配置")])])])),[[C,[d(k).status.loading,null,null]]]),p(S,{modelValue:d(k).status.dialog,"onUpdate:modelValue":s[12]||(s[12]=e=>d(k).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[An])),default:f((()=>[m("div",In,[m("div",Nn,[m("div",jn,[m("label",Dn,[p(a,{content:"腾讯云COS SecretId",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),$n])])),_:1})]),p(n,{modelValue:d(k).struct.secret_id,"onUpdate:modelValue":s[2]||(s[2]=e=>d(k).struct.secret_id=e),"show-password":""},null,8,["modelValue"])])]),m("div",Bn,[m("div",Pn,[m("label",En,[p(a,{content:"腾讯云COS SecretKey",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Tn])])),_:1})]),p(n,{modelValue:d(k).struct.secret_key,"onUpdate:modelValue":s[3]||(s[3]=e=>d(k).struct.secret_key=e),"show-password":""},null,8,["modelValue"])])]),m("div",Wn,[m("div",Ln,[m("label",Mn,[p(a,{content:"腾讯云COS AppId",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Xn])])),_:1})]),p(n,{modelValue:d(k).struct.app_id,"onUpdate:modelValue":s[4]||(s[4]=e=>d(k).struct.app_id=e)},null,8,["modelValue"])])]),m("div",Gn,[m("div",Hn,[m("label",Fn,[p(a,{content:"存储桶名称",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Qn])])),_:1})]),p(n,{modelValue:d(k).struct.bucket,"onUpdate:modelValue":s[5]||(s[5]=e=>d(k).struct.bucket=e)},null,8,["modelValue"])])]),m("div",Yn,[m("div",Zn,[m("label",eo,[p(a,{content:"所在地区，如这里的 ap-guangzhou（广州）",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),so])])),_:1})]),p(x,{modelValue:d(k).struct.region,"onUpdate:modelValue":s[6]||(s[6]=e=>d(k).struct.region=e),placeholder:"请选择所在地区",class:"d-block custom font-13"},{default:f((()=>[(i(!0),u(y,null,w(d(k).select.region,(e=>(i(),h(b,{key:e.value,label:e.label,value:e.value},{default:f((()=>[m("span",to,_(e.label),1),m("small",ao,_(e.value)+" | "+_(e.area),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),m("div",lo,[m("div",no,[m("label",oo,[p(a,{content:"存储在哪个目录下",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),co])])),_:1})]),p(n,{modelValue:d(k).struct.path,"onUpdate:modelValue":s[7]||(s[7]=e=>d(k).struct.path=e),placeholder:"如: inis"},null,8,["modelValue"])])]),m("div",io,[m("div",uo,[m("label",ro,[p(a,{content:"用于访问 - 不填写则使用默认域名",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),mo])])),_:1})]),p(n,{modelValue:d(k).struct.domain,"onUpdate:modelValue":s[8]||(s[8]=e=>d(k).struct.domain=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(V,{onClick:s[9]||(s[9]=e=>d(k).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(V,{onClick:s[10]||(s[10]=e=>z.test()),loading:d(k).status.test},{default:f((()=>[d(k).status.test?v("",!0):(i(),h(t,{key:0,name:"connect",size:"14px"})),po])),_:1},8,["loading"]),p(V,{onClick:s[11]||(s[11]=e=>z.save()),loading:d(k).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},go={class:"card"},bo={class:"card-body"},ho={class:"text-muted text-uppercase mt-0"},vo=m("br",null,null,-1),yo={class:"d-inline-flex align-items-center"},wo=m("span",{class:"ms-1"},"KODO",-1),_o={class:"m-b-20"},xo=m("span",{class:"badge bg-info font-white"}," 一般 ",-1),Vo={class:"text-muted ms-1"},ko=m("strong",{class:"flex-center"},"配置 七牛云KODO 存储",-1),zo={class:"row"},So={class:"col-md-6"},Co={class:"form-group mb-3"},Uo={class:"form-label required"},Oo=m("span",{class:"ms-1"},"AccessKey：",-1),qo={class:"col-md-6"},Ko={class:"form-group mb-3"},Ro={class:"form-label required"},Jo=m("span",{class:"ms-1"},"SecretKey：",-1),Ao={class:"col-md-6"},Io={class:"form-group mb-3"},No={class:"form-label required"},jo=m("span",{class:"ms-1"},"Bucket：",-1),Do={class:"col-md-6"},$o={class:"form-group mb-3"},Bo={class:"form-label required"},Po=m("span",{class:"ms-1"},"Region：",-1),Eo={class:"font-13"},To={class:"text-muted float-end"},Wo={class:"col-md-12"},Lo={class:"form-group mb-3"},Mo={class:"form-label required"},Xo=m("span",{class:"ms-1"},"外网域名：",-1),Go=m("span",{class:"ms-1"},"测试连接",-1),Ho={__name:"storage-kodo",emits:["refresh"],setup(b,{expose:x,emit:V}){const k=e({struct:{default:null,domain:null,access_key:null,secret_key:null,bucket:null,region:null},status:{active:!0,finish:!1,dialog:!1,loading:!0,wait:!1,test:!1},backup:{},select:{region:[{value:"z0",label:"华东"},{value:"z1",label:"华北河北"},{value:"z2",label:"华南广东"},{value:"na0",label:"北美"},{value:"as0",label:"新加坡"},{value:"cn-east-2",label:"华东浙江"},{value:"ap-northeast-1",label:"亚太-首尔机房"}]}});s((async()=>{await z.init()}));const z={init:async()=>{k.status.finish=!1,k.status.loading=!0;const{code:e,data:s}=await t.get("/api/toml/storage",{name:"kodo"});k.status.loading=!1,200===e&&(k.struct=s,k.backup=JSON.parse(JSON.stringify(s)),k.status.finish=!0)},show(){if(!k.status.finish)return a.warn("配置获取失败，无法进行配置！");k.status.dialog=!0},change:async e=>{if(!e)return k.status.active=!0;const{code:s,msg:l}=await t.put("/api/toml/storage-default",{value:e?"kodo":null});if(200===s)return V("refresh");k.status.active=!e,a.error(l)},save:async()=>{if(!l.object.equal(k.struct,k.backup,["access_key","secret_key","bucket","region"]))return a.warn("请先KODO连接测试");if(l.is.empty(k.struct.access_key))return a.warn("请填写 AccessKey！");if(l.is.empty(k.struct.secret_key))return a.warn("请填写 SecretKey！");if(l.is.empty(k.struct.bucket))return a.warn("请填写 Bucket！");if(l.is.empty(k.struct.region))return a.warn("请填写 Region！");if(l.is.empty(k.struct.domain))return a.warn("请填写 外网域名！");k.status.wait=!0;const{code:e,msg:s}=await t.put("/api/toml/storage-kodo",k.struct);if(k.status.wait=!1,200!==e)return a.error("保存失败："+s);k.status.dialog=!1},test:async()=>{if(l.is.empty(k.struct.access_key))return a.warn("请填写 AccessKey！");if(l.is.empty(k.struct.secret_key))return a.warn("请填写 SecretKey！");if(l.is.empty(k.struct.bucket))return a.warn("请填写 Bucket！");if(l.is.empty(k.struct.region))return a.warn("请填写 Region！");k.status.test=!0;const{code:e,msg:s,data:n}=await t.post("/api/toml/test-kodo",k.struct);if(k.status.test=!1,200===e)return k.backup=JSON.parse(JSON.stringify(k.struct)),a.success(s);a.error(`${s}<br>${n}`)}};return n((()=>k.struct),(()=>{k.status.active="kodo"===k.struct.default}),{deep:!0}),x({init:z.init}),(e,s)=>{const t=o("el-image"),a=o("i-svg"),l=o("el-tooltip"),n=o("el-switch"),b=o("el-input"),x=o("el-option"),V=o("el-select"),S=o("el-button"),C=o("el-dialog"),U=c("load");return i(),u(y,null,[r((i(),u("div",go,[m("div",bo,[p(t,{src:"/assets/imgs/png/qiniu.png",class:"position-absolute opacity-25",style:{right:"1.5rem",height:"65px"}}),m("h6",ho,[p(l,{placement:"top"},{content:f((()=>[g(" ● KODO可以替代传统的本地存储，有能力的情况推荐开启KODO存储（但是总体体验上比OSS和COS略差）"),vo,g(" ● 开启后，后续上传的文件将会自动上传到KODO，不会占用服务器的空间和带宽 ")])),default:f((()=>[m("span",yo,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),wo])])),_:1})]),m("h2",_o,[p(n,{modelValue:d(k).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(k).status.active=e),onChange:z.change,disabled:!d(k).status.finish,"active-text":"开始","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),xo,m("span",Vo,[g(" 不是很好用，"),m("span",{onClick:s[1]||(s[1]=e=>z.show()),class:"text-white pointer"},"点我配置")])])])),[[U,[d(k).status.loading,null,null]]]),p(C,{modelValue:d(k).status.dialog,"onUpdate:modelValue":s[10]||(s[10]=e=>d(k).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[ko])),default:f((()=>[m("div",zo,[m("div",So,[m("div",Co,[m("label",Uo,[p(l,{content:"七牛云AccessKey",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Oo])])),_:1})]),p(b,{modelValue:d(k).struct.access_key,"onUpdate:modelValue":s[2]||(s[2]=e=>d(k).struct.access_key=e),"show-password":""},null,8,["modelValue"])])]),m("div",qo,[m("div",Ko,[m("label",Ro,[p(l,{content:"七牛云SecretKey",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Jo])])),_:1})]),p(b,{modelValue:d(k).struct.secret_key,"onUpdate:modelValue":s[3]||(s[3]=e=>d(k).struct.secret_key=e),"show-password":""},null,8,["modelValue"])])]),m("div",Ao,[m("div",Io,[m("label",No,[p(l,{content:"存储桶名称",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),jo])])),_:1})]),p(b,{modelValue:d(k).struct.bucket,"onUpdate:modelValue":s[4]||(s[4]=e=>d(k).struct.bucket=e)},null,8,["modelValue"])])]),m("div",Do,[m("div",$o,[m("label",Bo,[p(l,{content:"KODO 所在地区",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Po])])),_:1})]),p(V,{modelValue:d(k).struct.region,"onUpdate:modelValue":s[5]||(s[5]=e=>d(k).struct.region=e),placeholder:"请选择所在地区",class:"d-block custom font-13"},{default:f((()=>[(i(!0),u(y,null,w(d(k).select.region,(e=>(i(),h(x,{key:e.value,label:e.label,value:e.value},{default:f((()=>[m("span",Eo,_(e.label),1),m("small",To,_(e.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),m("div",Wo,[m("div",Lo,[m("label",Mo,[p(l,{content:"（必须）外网域名 - 用于访问",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Xo])])),_:1})]),p(b,{modelValue:d(k).struct.domain,"onUpdate:modelValue":s[6]||(s[6]=e=>d(k).struct.domain=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(S,{onClick:s[7]||(s[7]=e=>d(k).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(S,{onClick:s[8]||(s[8]=e=>z.test()),loading:d(k).status.test},{default:f((()=>[d(k).status.test?v("",!0):(i(),h(a,{key:0,name:"connect",size:"14px"})),Go])),_:1},8,["loading"]),p(S,{onClick:s[9]||(s[9]=e=>z.save()),loading:d(k).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},Fo={class:"container-fluid container-box"},Qo={class:"row"},Yo={class:"col-lg-6 d-lg-flex d-none"},Zo={class:"input-group custom-search me-1"},ec=m("input",{class:"form-control custom search mimic",autocomplete:"new-password",type:"text",placeholder:"这是个假搜索"},null,-1),sc={class:"col-lg-6 d-flex justify-content-end",style:{"z-index":"-1"}},tc={class:"btn btn-auto h-35px mimic",disabled:"",type:"button"},ac={class:"row mt-3"},lc={class:"col-12"},nc=m("span",{class:"fw-bolder font-12"},"安全",-1),oc={class:"row"},cc={class:"col-md-4"},ic={class:"col-md-4"},uc={class:"col-md-4"},rc={class:"col-md-4"},dc={class:"col-md-4"},mc={class:"col-md-4"},pc=m("span",{class:"fw-bolder font-12"},"优化",-1),fc={class:"row"},gc={class:"col-md-4"},bc={class:"col-md-4"},hc={class:"col-md-4"},vc=m("span",{class:"fw-bolder font-12"},"存储",-1),yc={class:"row"},wc={class:"col-md-4"},_c={class:"col-md-4"},xc={class:"col-md-4"},Vc={class:"col-md-4"},kc=m("span",{class:"fw-bolder font-12"},"短信",-1),zc={class:"row"},Sc={class:"col-md-4"},Cc={class:"col-md-4"},Uc={class:"col-md-4"},Oc=m("span",{class:"fw-bolder font-12"},"其他",-1),qc={class:"row"},Kc={class:"col-md-4"},Rc={__name:"system",setup(t){const{ctx:a,proxy:l}=z(),n=e({item:{title:"系统配置",tabs:"security",menu:{...x,menuList:[{label:"刷新",icon:'<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="14" height="14">\n                    <path fill="rgb(var(--assist-color))" d="M608 928c-229.76 0-416-186.24-416-416h-0.128c0-0.416 0.128-0.768 0.128-1.184a95.904 95.904 0 1 0-191.872-1.184c0 0.384-0.128 0.768-0.128 1.184l0.032 0.384c0 0.288 0.096 0.544 0.096 0.8H0c0 282.784 229.216 512 512 512 282.016 0 510.592-227.968 511.872-509.632C1022.592 743.072 836.928 928 608 928z"></path>\n                    <path fill="rgb(var(--assist-color))" d="M1023.872 512H1024c0-282.784-229.216-512-512-512C230.016 0 1.408 227.968 0.128 509.632 1.408 280.96 187.072 96 416 96c229.76 0 416 186.24 416 416h0.128c0 0.416-0.128 0.768-0.128 1.184a96 96 0 0 0 96 96 95.872 95.872 0 0 0 95.872-94.816c0-0.416 0.128-0.768 0.128-1.184l-0.032-0.384c0-0.288-0.096-0.544-0.096-0.8z"></path>\n                </svg>',fn:()=>c.refresh()}]}},refresh:{other:["article-page"],optimize:["cache-redis","cache-file","cache-ram"],sms:["sms-email","sms-aliyun","sms-tencent"],storage:["storage-local","storage-oss","storage-cos","storage-kodo"],security:["api-key","qps","page-limit","jwt","allow-register","qps-black"]}});s((async()=>{n.item.menu.menuList.push({line:!0},...await V())}));const c={refresh(...e){let s=[...n.refresh[n.item.tabs]];e=0===e.length?s:e.filter((e=>s.includes(e)));for(let t of e)l.$refs[t].init()}};return document.addEventListener("contextmenu",(e=>{var s;e.preventDefault(),null==(s=l.$refs.mouse)||s.show(e.x,e.y)})),(e,s)=>{const t=o("i-svg"),a=o("el-tab-pane"),l=o("el-tabs");return i(),u(y,null,[m("div",Fo,[m("div",Qo,[m("div",Yo,[m("div",Zo,[p(t,{name:"search",color:"rgb(var(--icon-color))",size:"18px"}),ec]),m("button",{onClick:s[0]||(s[0]=e=>c.refresh()),class:"btn btn-auto mx-1 mimic",type:"button"},"刷新")]),m("div",sc,[m("button",tc,_(d(n).item.title),1)])]),m("div",ac,[m("div",lc,[p(l,{modelValue:d(n).item.tabs,"onUpdate:modelValue":s[1]||(s[1]=e=>d(n).item.tabs=e),id:"tabs-area"},{default:f((()=>[p(a,{name:"security"},{label:f((()=>[nc])),default:f((()=>[m("div",oc,[m("div",cc,[p(C,{ref:"api-key"},null,512)]),m("div",ic,[p(U,{ref:"qps"},null,512)]),m("div",uc,[p(q,{ref:"qps-black"},null,512)]),m("div",rc,[p(O,{ref:"page-limit"},null,512)]),m("div",dc,[p(jt,{ref:"jwt"},null,512)]),m("div",mc,[p(it,{ref:"allow-register"},null,512)])])])),_:1}),p(a,{name:"optimize"},{label:f((()=>[pc])),default:f((()=>[m("div",fc,[m("div",gc,[p(za,{ref:"cache-redis",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",bc,[p(Za,{ref:"cache-file",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",hc,[p(vl,{ref:"cache-ram",onRefresh:c.refresh},null,8,["onRefresh"])])])])),_:1}),p(a,{name:"storage"},{label:f((()=>[vc])),default:f((()=>[m("div",yc,[m("div",wc,[p(Dl,{ref:"storage-local",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",_c,[p(kn,{ref:"storage-oss",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",xc,[p(fo,{ref:"storage-cos",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",Vc,[p(Ho,{ref:"storage-kodo",onRefresh:c.refresh},null,8,["onRefresh"])])])])),_:1}),p(a,{name:"sms"},{label:f((()=>[kc])),default:f((()=>[m("div",zc,[m("div",Sc,[p(we,{ref:"sms-email",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",Cc,[p(ns,{ref:"sms-aliyun",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",Uc,[p(Ys,{ref:"sms-tencent",onRefresh:c.refresh},null,8,["onRefresh"])])])])),_:1}),p(a,{name:"other"},{label:f((()=>[Oc])),default:f((()=>[m("div",qc,[m("div",Kc,[p(K,{ref:"article-page",onRefresh:c.refresh},null,8,["onRefresh"])])])])),_:1})])),_:1},8,["modelValue"])])])]),p(d(S),k({ref:"mouse"},d(n).item.menu),null,16)],64)}}};export{Rc as default};
