import{r as s,h as a,p as t,m as e,i as l,a as i,J as n,o,c,K as r,e as u,b as d,d as g,w as p,f as m,F as h}from"./1694758814.index.js";const f={class:"card mb-3"},b={class:"card-body"},v={class:"text-muted text-uppercase mt-0"},x=d("strong",{class:"text-danger"},"风险操作！此功能不懂请勿开启！",-1),y=d("br",null,null,-1),w=d("strong",{class:"text-danger"},"i-api-key=密钥",-1),_=d("br",null,null,-1),I={class:"d-inline-flex align-items-center"},P=d("span",{class:"ms-1"},"API KEY",-1),A={class:"m-b-20"},E=d("span",{class:"badge bg-primary font-white"}," +90% ",-1),Y={class:"text-muted ms-1"},k=d("strong",{class:"flex-center"},"配置",-1),K=d("p",{class:"my-1"},"● API KEY 不是什么很NB的技术，却能大大提高的接口安全",-1),V=d("p",{class:"my-1"},"● 正常来说不开启也没关系，因为除此之外还有QPS限流器在帮你拦截异常流量",-1),S=d("p",{class:"my-1"},"● 但是如果您开启了API KEY，在使用其它主题的时候，需要按照要求配置密钥到您的主题中，否则主题会拿不到任何数据",-1),C={__name:"api-key",setup(C,{expose:z}){const M=s({struct:{},status:{finish:!1,active:!1,dialog:!1,loading:!0}});a((async()=>{await T.init()}));const T={init:async()=>{M.status.finish=!1,M.status.loading=!0;const{code:s,data:a}=await t.get("/api/config/one",{key:"SYSTEM_API_KEY"});M.status.loading=!1,200===s&&(M.struct=a,M.status.finish=!0)},show(){if(!M.status.finish)return e.warn("API KEY配置获取失败，无法进行配置！");M.status.dialog=!0},change:async s=>{const{code:a,msg:l}=await t.post("/api/config/save",{key:"SYSTEM_API_KEY",value:s?1:0});200!==a&&(M.status.active=!s,e.error(l))}};return l((()=>M.struct),(()=>{M.status.active=1===parseInt(M.struct.value)}),{deep:!0}),z({init:T.init}),(s,a)=>{const t=i("i-svg"),e=i("el-tooltip"),l=i("el-switch"),C=i("el-button"),z=i("el-dialog"),U=n("loading");return o(),c(h,null,[r((o(),c("div",f,[d("div",b,[g(t,{name:"security",size:"60px",color:"rgb(var(--assist-color))",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),d("h6",v,[g(e,{placement:"top"},{content:p((()=>[x,y,m(" ● 开启之后，所有的API均需要在请求头中提交 "),w,m(" 方能使用！"),_,m(" ● 于此同时API安全性将提升90%，剩下10%取决于你的密钥复杂度和对手的能力强弱！ ")])),default:p((()=>[d("span",I,[g(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),P])])),_:1})]),d("h2",A,[g(l,{modelValue:u(M).status.active,"onUpdate:modelValue":a[0]||(a[0]=s=>u(M).status.active=s),onChange:T.change,disabled:!u(M).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),E,d("span",Y,[m(" 安全性提升，"),d("span",{onClick:a[1]||(a[1]=s=>T.show()),class:"text-white pointer"},"点我查看")])])])),[[U,u(M).status.loading]]),g(z,{modelValue:u(M).status.dialog,"onUpdate:modelValue":a[3]||(a[3]=s=>u(M).status.dialog=s),class:"custom",draggable:"","close-on-click-modal":!1},{header:p((()=>[k])),default:p((()=>[K,V,S])),footer:p((()=>[g(C,{onClick:a[2]||(a[2]=s=>u(M).status.dialog=!1)},{default:p((()=>[m(" 取 消 ")])),_:1})])),_:1},8,["modelValue"])],64)}}};export{C as _};
