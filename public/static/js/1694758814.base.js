/* empty css                    */import{_ as e,r as t,n as l,u as s,a,o as n,c as o,b as c,d as r,w as i,e as u,F as d,g as m,t as p,f,h as b,i as y,j as v,k as w,l as h,m as g,p as x}from"./1694758814.index.js";const _={ref:"pointer",id:"pointer"},V={id:"background"},k={ref:"cover",class:"cover",style:{opacity:"1",transition:"all 1.5s ease 0s"}},E={id:"go-to-top",ref:"go-to-top",class:"d-none"},q={class:"flex-center p-0",type:"button"},z=e({__name:"beautify",setup(e){const{ctx:p,proxy:f}=m(),b=Math.round((new Date).getTime()/1e3),y=t({cover:`https://api.inis.cc/api/file/random?name=cure&unix=${b}`});return l((()=>{const e=f.$refs.pointer,t=e.offsetWidth/2,l=(l,s)=>{e.style.transform=`translate(${l-t+1}px, ${(()=>{let e=0;return document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e})()+s-t+1}px)`};document.querySelector("body").addEventListener("mousemove",(e=>window.requestAnimationFrame((()=>{l(e.clientX,e.clientY)}))));const a=document.querySelector("#loading-box");a&&setTimeout((()=>a.classList.add("loaded")),500);const n=f.$refs.cover;f.$refs["bg-img"],n.style.setProperty("opacity",0),n.style.setProperty("transition","all 1.5s ease 0s"),Boolean(window.navigator.userAgent.match(/AppWebKit.*Mobile.*/))&&(e.style.display="none"),window.onscroll=()=>{let[e,t]=[null,!0],l=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;const a=f.$refs["go-to-top"];a.style.setProperty("display",l>300?"block":"none","important"),a.addEventListener("click",(()=>{t=!0,e=setTimeout((()=>{t&&s.to.scroll(0)}),150)})),a.addEventListener("dblclick",(()=>{clearTimeout(e),t=!1,s.to.scroll(n())}));const n=()=>{let e=0;return e=document.body.clientHeight&&document.documentElement.clientHeight?document.body.clientHeight<document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight:document.body.clientHeight>document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)-e}}})),(e,t)=>{const l=a("el-image"),s=a("i-svg");return n(),o(d,null,[c("div",_,null,512),c("div",V,[r(l,{src:"/assets/imgs/bg.webp",fit:"cover",style:{width:"100%",height:"100%",position:"fixed",left:"0",top:"0"}},{error:i((()=>[r(l,{src:u(y).cover,fit:"cover",style:{width:"100%",height:"100%",position:"fixed",left:"0",top:"0"}},null,8,["src"])])),_:1}),c("div",k,null,512)]),c("div",E,[c("button",q,[r(s,{name:"go-to-top",size:"30px"})])],512)],64)}}},[["__scopeId","data-v-7c278f07"]]),U={id:"footer",class:"text-white user-select-none"},D=c("span",null,[f(" & "),c("a",{href:"https://inis.cc",target:"_blank",class:"text-white"},"INIS 3.0.0")],-1),A=c("span",null,[f(" & "),c("a",{href:"https://inis-api.apifox.cn",target:"_blank",class:"text-white"},"API 文档")],-1),H={__name:"footer",setup(e){const t=(new Date).getFullYear();return(e,l)=>(n(),o("footer",U,[c("span",null,"Copyright © 2020 - "+p(u(t)),1),D,A]))}},T={class:"container-fluid mt-5"},Q={class:"card mt-3"},S={key:0,class:"card-body"},B={class:"row my-2"},C={class:"col-md-6"},L={class:"form-group mb-3"},Y={class:"form-label"},j=c("span",{class:"ms-1"},"类型：",-1),$={class:"font-13"},I={class:"text-muted float-end"},K={class:"col-md-6"},M={class:"form-group mb-3"},P={class:"form-label"},F=c("span",{class:"ms-1"},"字符集：",-1),O={class:"font-13"},R={class:"text-muted float-end"},N={class:"row my-2"},W={class:"col-md-4"},X={class:"form-group mb-3"},G={class:"form-label required"},J=c("span",{class:"ms-1"},"地址：",-1),Z={class:"col-md-4"},ee={class:"form-group mb-3"},te={class:"form-label required"},le=c("span",{class:"ms-1"},"端口号：",-1),se={class:"col-md-4"},ae={class:"form-group mb-3"},ne={class:"form-label required"},oe=c("span",{class:"ms-1"},"表前缀：",-1),ce={class:"row my-2"},re={class:"col-md-4"},ie={class:"form-group mb-3"},ue={class:"form-label required"},de=c("span",{class:"ms-1"},"数据库名：",-1),me={class:"col-md-4"},pe={class:"form-group mb-3"},fe={class:"form-label required"},be=c("span",{class:"ms-1"},"用户名：",-1),ye={class:"col-md-4"},ve={class:"form-group mb-3"},we={class:"form-label required"},he=c("span",{class:"ms-1"},"密码：",-1),ge={class:"d-flex justify-content-center"},xe=c("span",{class:"ms-1"},"测试连接",-1),_e={key:1,class:"card-body"},Ve={class:"row my-2"},ke={class:"col-md-4"},Ee={class:"form-group mb-3"},qe={class:"form-label required"},ze=c("span",{class:"ms-1"},"帐号：",-1),Ue={class:"col-md-4"},De={class:"form-group mb-3"},Ae={class:"form-label required"},He=c("span",{class:"ms-1"},"密码：",-1),Te={class:"col-md-4"},Qe={class:"form-group mb-3"},Se={class:"form-label required"},Be=c("span",{class:"ms-1"},"确认密码：",-1),Ce={class:"row my-2"},Le={class:"col-md-6"},Ye={class:"form-group mb-3"},je={class:"form-label"},$e=c("span",{class:"ms-1"},"昵称：",-1),Ie={class:"col-md-6"},Ke={class:"form-group mb-3"},Me={class:"form-label required"},Pe=c("span",{class:"ms-1"},"邮箱：",-1),Fe={class:"row my-2"},Oe={class:"col-lg-12"},Re={class:"form-group mb-3"},Ne={class:"form-label"},We=c("span",{class:"ms-1"},"个人简介：",-1),Xe={class:"d-flex justify-content-center"},Ge={key:2,class:"card-body"},Je={class:"alert alert-primary pb-0",role:"alert"},Ze=c("h3",{class:"alert-heading"},"恭喜您！",-1),et=c("p",null,"当你看到我的时候，就表示你已经成功的安装 inis 程序，感谢你的使用。",-1),tt=c("span",{class:"mx-2"},"|",-1),lt=c("span",{class:"mx-2"},"|",-1),st=c("span",{class:"mx-2"},"|",-1),at=c("span",{class:"mx-2"},"|",-1),nt=c("hr",null,null,-1),ot={class:"d-flex justify-content-center my-3"},ct={__name:"index",setup(e){const l=t({item:{active:1,DB_KEY:"DATABASE_STRUCT",connect:!1},struct:{type:"mysql",hostname:"localhost",hostport:3306,charset:"utf8mb4",prefix:"inis_",database:"",username:"",password:""},user:{account:null,password1:null,password2:null,nickname:null,email:null,description:"这个人很懒，什么都没有留下！"},select:{db:[{value:"mysql",label:"MySQL 数据库"}],charset:[{value:"utf8mb4",label:"支持4字节的Unicode字符，是MySQL 5.5.3及以上版本推荐使用的默认字符集。"},{value:"utf8",label:"支持3字节的Unicode字符，但无法正确存储一些特殊的Emoji表情符号。"},{value:"gb2312",label:"汉字编码标准。"},{value:"gbk",label:"扩展了gb2312字符集，支持更多汉字。"},{value:"latin1",label:"ISO-8859-1字符集，支持西欧语言。"}]},load:{connect:!1},retry:{count:1,time:2e3}});b((async()=>{s.has.session(l.item.DB_KEY)&&(l.struct=s.get.session(l.item.DB_KEY))}));const m={connect:async()=>{if(s.is.empty(l.struct.hostname))return g.warn("数据库地址不能为空！");if(s.is.empty(l.struct.hostport))return g.warn("数据库端口不能为空！");if(s.is.empty(l.struct.database))return g.warn("数据库名称不能为空！");if(s.is.empty(l.struct.username))return g.warn("数据库用户名不能为空！");if(s.is.empty(l.struct.password))return g.warn("数据库密码不能为空！");l.load.connect=!0;const{code:e,msg:t}=await x.post("/dev/install/connect-db",l.struct);if(l.load.connect=!1,200!==e)return l.item.connect=!1,g.error(t);l.item.connect=!0,g.success("数据库连接成功！"),s.set.session(l.item.DB_KEY,l.struct)},initDB:async()=>{const{code:e,msg:t}=await x.post("/dev/install/init-db");200!==e&&(g.error(t),l.item.connect=!1)},createAdmin:async()=>{if(!l.item.connect)return g.warn("请先测试数据库连接！");if(s.is.empty(l.user.account))return g.warn("帐号不能为空！");if(s.is.empty(l.user.email))return g.warn("邮箱不能为空！");if(!s.is.email(l.user.email))return g.warn("邮箱格式不正确！");if(s.is.empty(l.user.password1))return g.warn("密码不能为空！");if(s.is.empty(l.user.password2))return g.warn("请再次输入密码！");if(l.user.password1!==l.user.password2)return g.warn("两次输入的密码不一致！");l.user.password=l.user.password2;try{const{code:e,msg:t}=await x.post("/dev/install/create-admin",l.user);if(500===e)return m.retry();if(200!==e)return g.error(t);delete l.user.password1,delete l.user.password2,g.success("创建管理员成功！"),s.clear.session(l.item.DB_KEY),await m.lock(),await m.next(3)}catch(e){await m.retry()}},retry:async()=>{if(l.retry.count>5)return g.error("安装失败，请联系兔子，QQ：97783391",{duration:6e5});await m.sleep(l.retry.time),await m.connect(),await m.sleep(l.retry.time),await m.initDB(),await m.sleep(l.retry.time),await m.createAdmin(),l.retry.count++},sleep:(e=1e3)=>new Promise((t=>setTimeout(t,e))),lock:async()=>{const{code:e,msg:t}=await x.post("/dev/install/lock");if(200!==e)return g.error(t)},next:async(e=1)=>{if(2===e){if(!l.item.connect)return g.warn("请先测试数据库连接！");await m.initDB()}l.item.active=e},prev:(e=1)=>{l.item.active=e},window:(e="/",t="_self")=>window.open(e,t),copy:(e=null,t="复制成功！")=>{if(!s.is.empty(e))return s.set.copy.text(e),s.is.empty(t)?void 0:g.info(t)}};return y((()=>l.user),((e={})=>{l.user.account=e.account.replace(/\s+/g,"")}),{deep:!0}),(e,t)=>{const s=a("el-step"),b=a("el-steps"),y=a("i-svg"),g=a("el-tooltip"),x=a("el-option"),_=a("el-select"),V=a("el-input"),k=a("el-button");return n(),o("div",T,[r(b,{active:u(l).item.active,simple:""},{default:i((()=>[r(s,{title:"配置数据库"}),r(s,{title:"创建管理员"}),r(s,{title:"完成"})])),_:1},8,["active"]),c("div",Q,[1===u(l).item.active?(n(),o("div",S,[c("div",B,[c("div",C,[c("div",L,[c("label",Y,[r(g,{content:"数据库的类型，目前只支持MySQL",placement:"top"},{default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),j])])),_:1})]),r(_,{modelValue:u(l).struct.type,"onUpdate:modelValue":t[0]||(t[0]=e=>u(l).struct.type=e),placeholder:"请选择方式",class:"d-block custom font-13"},{default:i((()=>[(n(!0),o(d,null,v(u(l).select.db,(e=>(n(),w(x,{key:e.value,label:e.label,value:e.value},{default:i((()=>[c("span",$,p(e.label),1),c("small",I,p(e.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),c("div",K,[c("div",M,[c("label",P,[r(g,{content:"推荐用默认的 utf8mb4",placement:"top"},{default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),F])])),_:1})]),r(_,{modelValue:u(l).struct.charset,"onUpdate:modelValue":t[1]||(t[1]=e=>u(l).struct.charset=e),placeholder:"请选择方式",class:"d-block custom font-13"},{default:i((()=>[(n(!0),o(d,null,v(u(l).select.charset,(e=>(n(),w(x,{key:e.value,label:e.value,value:e.value},{default:i((()=>[c("span",O,p(e.value),1),c("small",R,p(e.label),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])])]),c("div",N,[c("div",W,[c("div",X,[c("label",G,[r(g,{placement:"top"},{content:i((()=>[f(" （必须）正常来说默认就行，相对于程序所在的服务器来说，如果数据库不在本地，那么就填写数据库所在的服务器地址 ")])),default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),J])])),_:1})]),r(V,{modelValue:u(l).struct.hostname,"onUpdate:modelValue":t[2]||(t[2]=e=>u(l).struct.hostname=e),placeholder:"如：localhost"},null,8,["modelValue"])])]),c("div",Z,[c("div",ee,[c("label",te,[r(g,{content:"（必须）默认端口是：3306，如果修改过端口，请填写正确的端口号",placement:"top"},{default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),le])])),_:1})]),r(V,{modelValue:u(l).struct.hostport,"onUpdate:modelValue":t[3]||(t[3]=e=>u(l).struct.hostport=e)},null,8,["modelValue"])])]),c("div",se,[c("div",ae,[c("label",ne,[r(g,{content:"（必须）数据库表前缀",placement:"top"},{default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),oe])])),_:1})]),r(V,{modelValue:u(l).struct.prefix,"onUpdate:modelValue":t[4]||(t[4]=e=>u(l).struct.prefix=e),disabled:""},null,8,["modelValue"])])])]),c("div",ce,[c("div",re,[c("div",ie,[c("label",ue,[r(g,{content:"（必须）数据库的名称",placement:"top"},{default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),de])])),_:1})]),r(V,{modelValue:u(l).struct.database,"onUpdate:modelValue":t[5]||(t[5]=e=>u(l).struct.database=e)},null,8,["modelValue"])])]),c("div",me,[c("div",pe,[c("label",fe,[r(g,{content:"（必须）数据库用户名称",placement:"top"},{default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),be])])),_:1})]),r(V,{modelValue:u(l).struct.username,"onUpdate:modelValue":t[6]||(t[6]=e=>u(l).struct.username=e)},null,8,["modelValue"])])]),c("div",ye,[c("div",ve,[c("label",we,[r(g,{content:"（必须）数据库的密码",placement:"top"},{default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),he])])),_:1})]),r(V,{modelValue:u(l).struct.password,"onUpdate:modelValue":t[7]||(t[7]=e=>u(l).struct.password=e),"show-password":""},null,8,["modelValue"])])])]),c("div",ge,[r(k,{onClick:t[8]||(t[8]=e=>m.connect()),loading:u(l).load.connect,class:"mx-2"},{default:i((()=>[u(l).item.connect?h("",!0):(n(),w(y,{key:0,name:"connect",size:"14px"})),xe])),_:1},8,["loading"]),r(k,{onClick:t[9]||(t[9]=e=>m.next(2)),type:"primary",class:"mx-2"},{default:i((()=>[f("下一步")])),_:1})])])):2===u(l).item.active?(n(),o("div",_e,[c("div",Ve,[c("div",ke,[c("div",Ee,[c("label",qe,[r(g,{placement:"top"},{content:i((()=>[f(" （必须）用来登录的账户，此处默认管理员权限 ")])),default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),ze])])),_:1})]),r(V,{modelValue:u(l).user.account,"onUpdate:modelValue":t[10]||(t[10]=e=>u(l).user.account=e)},null,8,["modelValue"])])]),c("div",Ue,[c("div",De,[c("label",Ae,[r(g,{content:"（必须）推荐大于8位，且包含数字、字母和特殊符号",placement:"top"},{default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),He])])),_:1})]),r(V,{modelValue:u(l).user.password1,"onUpdate:modelValue":t[11]||(t[11]=e=>u(l).user.password1=e),"show-password":""},null,8,["modelValue"])])]),c("div",Te,[c("div",Qe,[c("label",Se,[r(g,{content:"（必须）推荐大于8位，且包含数字、字母和特殊符号",placement:"top"},{default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),Be])])),_:1})]),r(V,{modelValue:u(l).user.password2,"onUpdate:modelValue":t[12]||(t[12]=e=>u(l).user.password2=e),"show-password":""},null,8,["modelValue"])])])]),c("div",Ce,[c("div",Le,[c("div",Ye,[c("label",je,[r(g,{placement:"top"},{content:i((()=>[f(" 用来显示的昵称 ")])),default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),$e])])),_:1})]),r(V,{modelValue:u(l).user.nickname,"onUpdate:modelValue":t[13]||(t[13]=e=>u(l).user.nickname=e)},null,8,["modelValue"])])]),c("div",Ie,[c("div",Ke,[c("label",Me,[r(g,{content:"（必须）开启短信服务之后，用来登录或找回密码",placement:"top"},{default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),Pe])])),_:1})]),r(V,{modelValue:u(l).user.email,"onUpdate:modelValue":t[14]||(t[14]=e=>u(l).user.email=e)},null,8,["modelValue"])])])]),c("div",Fe,[c("div",Oe,[c("div",Re,[c("label",Ne,[r(g,{content:"简单的介绍一下",placement:"top"},{default:i((()=>[c("span",null,[r(y,{name:"hint",size:"14px"}),We])])),_:1})]),r(V,{modelValue:u(l).user.description,"onUpdate:modelValue":t[15]||(t[15]=e=>u(l).user.description=e),autosize:{minRows:3,maxRows:10},placeholder:"写点什么吧 ...",type:"textarea"},null,8,["modelValue"])])])]),c("div",Xe,[r(k,{onClick:t[16]||(t[16]=e=>m.prev(1)),class:"mx-2"},{default:i((()=>[f("上一步")])),_:1}),r(k,{onClick:t[17]||(t[17]=e=>m.createAdmin()),type:"primary",class:"mx-2"},{default:i((()=>[f("下一步")])),_:1})])])):(n(),o("div",Ge,[c("div",Je,[Ze,et,c("p",null,[f("● "),r(g,{content:"双击复制",placement:"top"},{default:i((()=>[c("span",{onDblclick:t[18]||(t[18]=e=>m.copy(632274746))},"inis官方QQ群：632274746",32)])),_:1}),tt,r(g,{content:"双击复制",placement:"top"},{default:i((()=>[c("span",{onDblclick:t[19]||(t[19]=e=>m.copy(926403239))},"开发者QQ群：926403239",32)])),_:1}),lt,r(g,{content:"点我前往",placement:"top"},{default:i((()=>[c("span",{onClick:t[20]||(t[20]=e=>m.window("//inis.cc","_blank"))},"官方社区 inis.cc")])),_:1})]),c("p",null,[f("● "),r(g,{content:"双击复制",placement:"top"},{default:i((()=>[c("span",{onDblclick:t[21]||(t[21]=e=>m.copy(97783391))},"作者QQ：97783391",32)])),_:1}),st,r(g,{content:"双击复制",placement:"top"},{default:i((()=>[c("span",{onDblclick:t[22]||(t[22]=e=>m.copy("v-inis"))},"作者微信：v-inis",32)])),_:1}),at,r(g,{content:"点我前往",placement:"top"},{default:i((()=>[c("span",{onClick:t[23]||(t[23]=e=>m.window("https://inis-pro.apifox.cn","_blank"))},"API 文档：inis-pro.apifox.cn")])),_:1})]),nt,c("p",ot,[r(k,{onClick:t[24]||(t[24]=e=>m.window()),type:"primary",class:"mx-2"},{default:i((()=>[f("回 到 首 页")])),_:1})])])]))])])}}},rt={__name:"base",setup:e=>(l((()=>{const e=document.querySelector("body");e.setAttribute("data-layout","topnav"),e.setAttribute("inis-theme","white"),e.classList.add("user-select-none");document.querySelector("#app").classList.add("install")})),(e,t)=>(n(),o(d,null,[r(z),r(ct),r(H)],64)))};export{rt as default};
