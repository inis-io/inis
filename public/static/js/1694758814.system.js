import{r as e,h as s,p as a,m as t,u as l,i as n,a as o,J as c,o as i,c as u,K as r,e as d,b as m,d as p,w as f,f as g,x as b,k as h,l as v,F as y,j as w,t as _,s as x,I as V,v as k,R as z,P as S,U,g as C,W as O}from"./1694758814.index.js";import{_ as j}from"./1694758814.api-key.js";import{_ as q,a as R}from"./1694758814.page-limit.js";import{_ as K}from"./1694758814.qps-black.js";import{_ as I}from"./1694758814.page2.js";import{_ as J}from"./1694758814.article2.js";const A={class:"card mb-3"},N={class:"card-body"},D={class:"text-muted text-uppercase mt-0"},E=m("br",null,null,-1),$={class:"d-inline-flex align-items-center"},P=m("span",{class:"ms-1"},"邮件服务",-1),T={class:"m-b-20"},W=m("span",{class:"badge bg-danger font-white"}," 推荐 ",-1),B={class:"text-muted"},L=m("strong",{class:"flex-center"},"配置邮件服务",-1),M={class:"row"},X={class:"col-md-6"},F={class:"form-group mb-3"},Y={class:"form-label required"},G=m("span",{class:"ms-1"},"邮件服务器地址：",-1),H={class:"col-md-6"},Q={class:"form-group mb-3"},Z={class:"form-label required"},ee=m("span",{class:"ms-1"},"邮件服务端口：",-1),se={class:"row"},ae={class:"col-md-6"},te={class:"form-group mb-3"},le={class:"form-label required"},ne=m("span",{class:"ms-1"},"邮件账号：",-1),oe={class:"col-md-6"},ce={class:"form-group mb-3"},ie={class:"form-label required"},ue=m("span",{class:"ms-1"},"服务密码：",-1),re={class:"row"},de={class:"col-md-6"},me={class:"form-group mb-3"},pe={class:"form-label"},fe=m("span",{class:"ms-1"},"邮件昵称：",-1),ge={class:"col-md-6"},be={class:"form-group mb-3"},he={class:"form-label"},ve=m("span",{class:"ms-1"},"邮件签名：",-1),ye={class:"col-12"},we={class:"form-group mb-3"},_e={class:"form-label"},xe=m("span",{class:"ms-1"},"接收者邮箱：",-1),Ve=m("span",{class:"ms-1"},"邮件服务测试",-1),ke={__name:"sms-email",emits:["refresh"],setup(w,{expose:_,emit:x}){const V=e({struct:{email:null,host:null,port:null,account:null,password:null,nickname:null,sign_name:null,drive:{email:null,default:null}},status:{finish:!1,active:!1,dialog:!1,loading:!0,wait:!1,test:!1},backup:{}});s((async()=>{await k.init()}));const k={init:async()=>{V.status.finish=!1,V.status.loading=!0;const{code:e,data:s}=await a.get("/api/toml/sms",{name:"email"});V.status.loading=!1,200===e&&(V.struct=s,V.backup=JSON.parse(JSON.stringify(s)),V.status.finish=!0)},show(){if(!V.status.finish)return t.warn("邮件服务配置获取失败，无法进行配置！");V.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await a.put("/api/toml/sms-drive",{email:e?"email":""});200!==s&&(V.status.active=!e,t.error(l))},save:async()=>{if(!l.object.equal(V.struct,V.backup,["host","port","account","password"]))return t.warn("请先完成邮件服务测试");if(l.is.empty(V.struct.host))return t.warn("请填写邮件服务器地址！");if(l.is.empty(V.struct.port))return t.warn("请填写邮件服务器端口！");if(l.is.empty(V.struct.account))return t.warn("请填写邮件账号！");if(l.is.empty(V.struct.password))return t.warn("请填写服务密码！");if(l.is.empty(V.struct.sign_name))return t.warn("请填写邮件签名！");if(k.chinese(V.struct.nickname))return t.warn("邮件昵称不能包含中文！");V.status.wait=!0;const{code:e,msg:s}=await a.put("/api/toml/sms-email",V.struct);if(V.status.wait=!1,200!==e)return t.error("保存失败："+s);V.status.dialog=!1},test:async()=>{if(l.is.empty(V.struct.email))return t.warn("请填写接收者邮箱！");if(l.is.empty(V.struct.host))return t.warn("请填写邮件服务器地址！");if(l.is.empty(V.struct.port))return t.warn("请填写邮件服务器端口！");if(l.is.empty(V.struct.account))return t.warn("请填写邮件账号！");if(l.is.empty(V.struct.password))return t.warn("请填写服务密码！");if(l.is.empty(V.struct.sign_name))return t.warn("请填写邮件签名！");if(!l.is.email(V.struct.email))return t.warn("接收者邮箱格式不正确！");if(k.chinese(V.struct.nickname))return t.warn("邮件昵称不能包含中文！");V.status.test=!0;const{code:e,msg:s,data:n}=await a.post("/api/toml/test-sms-email",V.struct);if(V.status.test=!1,200===e)return V.backup=JSON.parse(JSON.stringify(V.struct)),t.success(s);t.error(`${s}<br>${n}`)},chinese:e=>/[\u4e00-\u9fa5]/.test(e)};return n((()=>V.struct),(()=>{V.status.active="email"===V.struct.drive.email}),{deep:!0}),_({init:k.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),w=o("el-input-number"),_=o("el-button"),x=o("el-dialog"),z=c("loading");return i(),u(y,null,[r((i(),u("div",A,[m("div",N,[p(a,{name:"email",color:"rgb(var(--assist-color))",size:"55px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",D,[p(t,{placement:"top"},{content:f((()=>[g(" ● 用于发送验证码、通知等邮件相关的服务"),E,g(" ● 注册、找回密码、通知等功能都需要依赖此服务 ")])),default:f((()=>[m("span",$,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),P])])),_:1})]),m("h2",T,[p(l,{modelValue:d(V).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(V).status.active=e),onChange:k.change,disabled:!d(V).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),W,m("span",B,[g(" 因为不花钱，"),m("span",{onClick:s[1]||(s[1]=e=>k.show()),class:"text-white pointer"},"点我配置")])])])),[[z,d(V).status.loading]]),p(x,{modelValue:d(V).status.dialog,"onUpdate:modelValue":s[13]||(s[13]=e=>d(V).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[L])),default:f((()=>[m("div",M,[m("div",X,[m("div",F,[m("label",Y,[p(t,{content:"邮件服务器地址，如：smtp.qq.com",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),G])])),_:1})]),p(n,{modelValue:d(V).struct.host,"onUpdate:modelValue":s[2]||(s[2]=e=>d(V).struct.host=e)},null,8,["modelValue"])])]),m("div",H,[m("div",Q,[m("label",Z,[p(t,{content:"邮件服务端口，如：465",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),ee])])),_:1})]),p(w,{modelValue:d(V).struct.port,"onUpdate:modelValue":s[3]||(s[3]=e=>d(V).struct.port=e),class:"w-100 d-flex","controls-position":"right",min:1},null,8,["modelValue"])])])]),m("div",se,[m("div",ae,[m("div",te,[m("label",le,[p(t,{content:"邮件账号，如：xxx@qq.com",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),ne])])),_:1})]),p(n,{modelValue:d(V).struct.account,"onUpdate:modelValue":s[4]||(s[4]=e=>d(V).struct.account=e)},null,8,["modelValue"])])]),m("div",oe,[m("div",ce,[m("label",ie,[p(t,{content:"服务密码，不是邮箱密码",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),ue])])),_:1})]),p(n,{modelValue:d(V).struct.password,"onUpdate:modelValue":s[5]||(s[5]=e=>d(V).struct.password=e),"show-password":""},null,8,["modelValue"])])])]),m("div",re,[m("div",de,[m("div",me,[m("label",pe,[p(t,{content:"邮件昵称，可以为空，但不能包含中文",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),fe])])),_:1})]),p(n,{modelValue:d(V).struct.nickname,"onUpdate:modelValue":s[6]||(s[6]=e=>d(V).struct.nickname=e)},null,8,["modelValue"])])]),m("div",ge,[m("div",be,[m("label",he,[p(t,{content:"邮件签名，也就是邮件的主题或标题，不推荐为空",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),ve])])),_:1})]),p(n,{modelValue:d(V).struct.sign_name,"onUpdate:modelValue":s[7]||(s[7]=e=>d(V).struct.sign_name=e)},null,8,["modelValue"])])]),m("div",ye,[m("div",we,[m("label",_e,[p(t,{content:"用于邮件服务测试接收测试信息的邮箱",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),xe])])),_:1})]),p(n,{modelValue:d(V).struct.email,"onUpdate:modelValue":s[9]||(s[9]=e=>d(V).struct.email=e),onKeydown:s[10]||(s[10]=b((e=>k.test()),["enter"])),class:"custom",placeholder:"请输入邮箱"},{suffix:f((()=>[p(_,{onClick:s[8]||(s[8]=e=>k.test()),loading:d(V).status.test},{default:f((()=>[d(V).status.test?v("",!0):(i(),h(a,{key:0,name:"email",size:"14px"})),Ve])),_:1},8,["loading"])])),_:1},8,["modelValue"])])])])])),footer:f((()=>[p(_,{onClick:s[11]||(s[11]=e=>d(V).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(_,{onClick:s[12]||(s[12]=e=>k.save()),loading:d(V).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},ze={class:"card mb-3"},Se={class:"card-body"},Ue={class:"text-muted text-uppercase mt-0"},Ce=m("br",null,null,-1),Oe={class:"d-inline-flex align-items-center"},je=m("span",{class:"ms-1"},"阿里云短信",-1),qe={class:"m-b-20"},Re=m("span",{class:"badge bg-warning font-white"}," 企业 ",-1),Ke={class:"text-muted"},Ie=m("strong",{class:"flex-center"},"配置阿里云短信服务",-1),Je={class:"row"},Ae={class:"col-md-6"},Ne={class:"form-group mb-3"},De={class:"form-label required"},Ee=m("span",{class:"ms-1"},"AccessKey ID：",-1),$e={class:"col-md-6"},Pe={class:"form-group mb-3"},Te={class:"form-label required"},We=m("span",{class:"ms-1"},"AccessKey Secret：",-1),Be={class:"row"},Le={class:"col-md-4"},Me={class:"form-group mb-3"},Xe={class:"form-label required"},Fe=m("span",{class:"ms-1"},"endpoint：",-1),Ye={class:"col-md-4"},Ge={class:"form-group mb-3"},He={class:"form-label required"},Qe=m("span",{class:"ms-1"},"短信签名：",-1),Ze={class:"col-md-4"},es={class:"form-group mb-3"},ss={class:"form-label required"},as=m("span",{class:"ms-1"},"验证码模板：",-1),ts={class:"row"},ls={class:"col-12"},ns={class:"form-group mb-3"},os={class:"form-label"},cs=m("span",{class:"ms-1"},"接收者手机号：",-1),is=m("span",{class:"ms-1"},"阿里云短信测试",-1),us={__name:"sms-aliyun",emits:["refresh"],setup(w,{expose:_,emit:x}){const V=e({struct:{access_key_id:null,access_key_secret:null,endpoint:null,sign_name:null,verify_code:null,phone:null,drive:{sms:null,default:null}},status:{finish:!1,active:!1,dialog:!1,loading:!0,test:!1,wait:!1},backup:{}});s((async()=>{await k.init()}));const k={init:async()=>{V.status.finish=!1,V.status.loading=!0;const{code:e,data:s}=await a.get("/api/toml/sms",{name:"aliyun"});V.status.loading=!1,200===e&&(V.struct=s,V.backup=JSON.parse(JSON.stringify(s)),V.status.finish=!0)},show(){if(!V.status.finish)return t.warn("SMS服务配置获取失败，无法进行配置！");V.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await a.put("/api/toml/sms-drive",{sms:e?"aliyun":""});if(200===s)return x("refresh","sms-tencent");V.status.active=!e,t.error(l)},save:async()=>{if(!l.object.equal(V.struct,V.backup,["access_key_id","access_key_secret","endpoint","sign_name","verify_code"]))return t.warn("请先完成阿里云短信测试");if(l.is.empty(V.struct.access_key_id))return t.warn("请填写阿里云AccessKey ID！");if(l.is.empty(V.struct.access_key_secret))return t.warn("请填写阿里云AccessKey Secret！");if(l.is.empty(V.struct.endpoint))return t.warn("请填写阿里云短信服务endpoint！");if(l.is.empty(V.struct.sign_name))return t.warn("请填写短信签名！");if(l.is.empty(V.struct.verify_code))return t.warn("请填写验证码模板！");V.status.wait=!0;const{code:e,msg:s}=await a.put("/api/toml/sms-aliyun",V.struct);if(V.status.wait=!1,200!==e)return t.error("保存失败："+s);V.status.dialog=!1},test:async()=>{if(l.is.empty(V.struct.phone))return t.warn("请填写接收者手机号！");if(l.is.empty(V.struct.access_key_id))return t.warn("请填写阿里云AccessKey ID！");if(l.is.empty(V.struct.access_key_secret))return t.warn("请填写阿里云AccessKey Secret！");if(l.is.empty(V.struct.endpoint))return t.warn("请填写阿里云短信服务endpoint！");if(l.is.empty(V.struct.sign_name))return t.warn("请填写短信签名！");if(l.is.empty(V.struct.verify_code))return t.warn("请填写验证码模板！");if(!l.is.phone(V.struct.phone))return t.warn("接收者手机号格式不正确！");V.status.test=!0;const{code:e,msg:s,data:n}=await a.post("/api/toml/test-sms-aliyun",V.struct);if(V.status.test=!1,200===e)return V.backup=JSON.parse(JSON.stringify(V.struct)),t.success(s);t.error(`${s}<br>${n}`)}};return n((()=>V.struct),(()=>{V.status.active="aliyun"===V.struct.drive.sms}),{deep:!0}),_({init:k.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),w=o("el-button"),_=o("el-dialog"),x=c("loading");return i(),u(y,null,[r((i(),u("div",ze,[m("div",Se,[p(a,{name:"aliyun",color:"rgb(var(--assist-color))",size:"60px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",Ue,[p(t,{placement:"top"},{content:f((()=>[g(" ● 用于发送验证码相关的服务"),Ce,g(" ● 注册、找回密码、通知等功能都需要依赖此服务 ")])),default:f((()=>[m("span",Oe,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),je])])),_:1})]),m("h2",qe,[p(l,{modelValue:d(V).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(V).status.active=e),onChange:k.change,disabled:!d(V).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),Re,m("span",Ke,[g(" 企业推荐这个，"),m("span",{onClick:s[1]||(s[1]=e=>k.show()),class:"text-white pointer"},"点我配置")])])])),[[x,d(V).status.loading]]),p(_,{modelValue:d(V).status.dialog,"onUpdate:modelValue":s[12]||(s[12]=e=>d(V).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[Ie])),default:f((()=>[m("div",Je,[m("div",Ae,[m("div",Ne,[m("label",De,[p(t,{content:"阿里云 AccessKey ID",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Ee])])),_:1})]),p(n,{modelValue:d(V).struct.access_key_id,"onUpdate:modelValue":s[2]||(s[2]=e=>d(V).struct.access_key_id=e),"show-password":""},null,8,["modelValue"])])]),m("div",$e,[m("div",Pe,[m("label",Te,[p(t,{content:"阿里云 AccessKey Secret",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),We])])),_:1})]),p(n,{modelValue:d(V).struct.access_key_secret,"onUpdate:modelValue":s[3]||(s[3]=e=>d(V).struct.access_key_secret=e),"show-password":""},null,8,["modelValue"])])])]),m("div",Be,[m("div",Le,[m("div",Me,[m("label",Xe,[p(t,{content:"阿里云 短信服务 endpoint，如：dysmsapi.aliyuncs.com",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Fe])])),_:1})]),p(n,{modelValue:d(V).struct.endpoint,"onUpdate:modelValue":s[4]||(s[4]=e=>d(V).struct.endpoint=e)},null,8,["modelValue"])])]),m("div",Ye,[m("div",Ge,[m("label",He,[p(t,{content:"短信签名，如：萌卜兔",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Qe])])),_:1})]),p(n,{modelValue:d(V).struct.sign_name,"onUpdate:modelValue":s[5]||(s[5]=e=>d(V).struct.sign_name=e)},null,8,["modelValue"])])]),m("div",Ze,[m("div",es,[m("label",ss,[p(t,{content:"验证码模板，如：SMS_XXX02",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),as])])),_:1})]),p(n,{modelValue:d(V).struct.verify_code,"onUpdate:modelValue":s[6]||(s[6]=e=>d(V).struct.verify_code=e)},null,8,["modelValue"])])])]),m("div",ts,[m("div",ls,[m("div",ns,[m("label",os,[p(t,{content:"用于阿里云短信测试接收测试信息的手机号",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),cs])])),_:1})]),p(n,{modelValue:d(V).struct.phone,"onUpdate:modelValue":s[8]||(s[8]=e=>d(V).struct.phone=e),onKeydown:s[9]||(s[9]=b((e=>k.test()),["enter"])),class:"custom",placeholder:"请输入手机号"},{suffix:f((()=>[p(w,{onClick:s[7]||(s[7]=e=>k.test()),loading:d(V).status.test},{default:f((()=>[d(V).status.test?v("",!0):(i(),h(a,{key:0,name:"phone",size:"14px"})),is])),_:1},8,["loading"])])),_:1},8,["modelValue"])])])])])),footer:f((()=>[p(w,{onClick:s[10]||(s[10]=e=>d(V).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(w,{onClick:s[11]||(s[11]=e=>k.save()),loading:d(V).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},rs={class:"card mb-3"},ds={class:"card-body"},ms={class:"text-muted text-uppercase mt-0"},ps=m("br",null,null,-1),fs={class:"d-inline-flex align-items-center"},gs=m("span",{class:"ms-1"},"腾讯云短信",-1),bs={class:"m-b-20"},hs=m("span",{class:"badge bg-primary font-white"}," 企业 ",-1),vs={class:"text-muted"},ys=m("strong",{class:"flex-center"},"配置腾讯云短信服务",-1),ws={class:"row"},_s={class:"col-md-6"},xs={class:"form-group mb-3"},Vs={class:"form-label required"},ks=m("span",{class:"ms-1"},"SecretId：",-1),zs={class:"col-md-6"},Ss={class:"form-group mb-3"},Us={class:"form-label required"},Cs=m("span",{class:"ms-1"},"SecretKey：",-1),Os={class:"row"},js={class:"col-md-6"},qs={class:"form-group mb-3"},Rs={class:"form-label required"},Ks=m("span",{class:"ms-1"},"endpoint：",-1),Is={class:"col-md-6"},Js={class:"form-group mb-3"},As={class:"form-label required"},Ns=m("span",{class:"ms-1"},"appid：",-1),Ds={class:"row"},Es={class:"col-md-4"},$s={class:"form-group mb-3"},Ps={class:"form-labe requiredl"},Ts=m("span",{class:"ms-1"},"短信签名：",-1),Ws={class:"col-md-4"},Bs={class:"form-group mb-3"},Ls={class:"form-label required"},Ms=m("span",{class:"ms-1"},"验证码模板 id：",-1),Xs={class:"col-md-4"},Fs={class:"form-group mb-3"},Ys={class:"form-label required"},Gs=m("span",{class:"ms-1"},"区域：",-1),Hs={class:"col-12"},Qs={class:"form-group mb-3"},Zs={class:"form-label"},ea=m("span",{class:"ms-1"},"接收者手机号：",-1),sa=m("span",{class:"ms-1"},"腾讯云短信测试",-1),aa={__name:"sms-tencent",emits:["refresh"],setup(w,{expose:_,emit:x}){const V=e({struct:{phone:null,secret_id:null,secret_key:null,endpoint:null,sms_sdk_app_id:null,sign_name:null,verify_code:null,region:null,drive:{sms:null,default:null}},status:{finish:!1,active:!1,dialog:!1,loading:!0,wait:!1,test:!1},backup:{}});s((async()=>{await k.init()}));const k={init:async()=>{V.status.finish=!1,V.status.loading=!0;const{code:e,data:s}=await a.get("/api/toml/sms",{name:"tencent"});V.status.loading=!1,200===e&&(V.struct=s,V.backup=JSON.parse(JSON.stringify(s)),V.status.finish=!0)},show(){if(!V.status.finish)return t.warn("配置获取失败，无法进行配置！");V.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await a.put("/api/toml/sms-drive",{sms:e?"tencent":""});if(200===s)return x("refresh","sms-aliyun");V.status.active=!e,t.error(l)},save:async()=>{if(!l.object.equal(V.struct,V.backup,["secret_id","secret_key","endpoint","sms_sdk_app_id","sign_name","verify_code","region"]))return t.warn("请先完成邮件服务测试");if(l.is.empty(V.struct.secret_id))return t.warn("请填写 SecretId！");if(l.is.empty(V.struct.secret_key))return t.warn("请填写 SecretKey！");if(l.is.empty(V.struct.endpoint))return t.warn("请填写 endpoint！");if(l.is.empty(V.struct.sms_sdk_app_id))return t.warn("请填写 appid！");if(l.is.empty(V.struct.sign_name))return t.warn("请填写 短信签名！");if(l.is.empty(V.struct.verify_code))return t.warn("请填写 验证码模板 id！");if(l.is.empty(V.struct.region))return t.warn("请填写 区域！");V.status.wait=!0;const{code:e,msg:s}=await a.put("/api/toml/sms-tencent",V.struct);if(V.status.wait=!1,200!==e)return t.error("保存失败："+s);V.status.dialog=!1},test:async()=>{if(l.is.empty(V.struct.phone))return t.warn("请填写接收者手机号！");if(l.is.empty(V.struct.secret_id))return t.warn("请填写 SecretId！");if(l.is.empty(V.struct.secret_key))return t.warn("请填写 SecretKey！");if(l.is.empty(V.struct.endpoint))return t.warn("请填写 endpoint！");if(l.is.empty(V.struct.sms_sdk_app_id))return t.warn("请填写 appid！");if(l.is.empty(V.struct.sign_name))return t.warn("请填写 短信签名！");if(l.is.empty(V.struct.verify_code))return t.warn("请填写 验证码模板 id！");if(l.is.empty(V.struct.region))return t.warn("请填写 区域！");if(!l.is.phone(V.struct.phone))return t.warn("接收者手机号格式不正确！");V.status.test=!0;const{code:e,msg:s,data:n}=await a.post("/api/toml/test-sms-tencent",V.struct);if(V.status.test=!1,200===e)return V.backup=JSON.parse(JSON.stringify(V.struct)),t.success(s);t.error(`${s}<br>${n}`)}};return n((()=>V.struct),(()=>{V.status.active="tencent"===V.struct.drive.sms}),{deep:!0}),_({init:k.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),w=o("el-button"),_=o("el-dialog"),x=c("loading");return i(),u(y,null,[r((i(),u("div",rs,[m("div",ds,[p(a,{name:"tencent",color:"rgb(var(--assist-color))",size:"60px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",ms,[p(t,{placement:"top"},{content:f((()=>[g(" ● 用于发送验证码相关的服务"),ps,g(" ● 注册、找回密码、通知等功能都需要依赖此服务 ")])),default:f((()=>[m("span",fs,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),gs])])),_:1})]),m("h2",bs,[p(l,{modelValue:d(V).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(V).status.active=e),onChange:k.change,disabled:!d(V).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),hs,m("span",vs,[g(" 也可以用这个，"),m("span",{onClick:s[1]||(s[1]=e=>k.show()),class:"text-white pointer"},"点我配置")])])])),[[x,d(V).status.loading]]),p(_,{modelValue:d(V).status.dialog,"onUpdate:modelValue":s[14]||(s[14]=e=>d(V).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[ys])),default:f((()=>[m("div",ws,[m("div",_s,[m("div",xs,[m("label",Vs,[p(t,{content:"腾讯云 SecretId",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),ks])])),_:1})]),p(n,{modelValue:d(V).struct.secret_id,"onUpdate:modelValue":s[2]||(s[2]=e=>d(V).struct.secret_id=e),"show-password":""},null,8,["modelValue"])])]),m("div",zs,[m("div",Ss,[m("label",Us,[p(t,{content:"腾讯云 SecretKey",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Cs])])),_:1})]),p(n,{modelValue:d(V).struct.secret_key,"onUpdate:modelValue":s[3]||(s[3]=e=>d(V).struct.secret_key=e),"show-password":""},null,8,["modelValue"])])])]),m("div",Os,[m("div",js,[m("div",qs,[m("label",Rs,[p(t,{content:"腾讯云短信服务 endpoint",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Ks])])),_:1})]),p(n,{modelValue:d(V).struct.endpoint,"onUpdate:modelValue":s[4]||(s[4]=e=>d(V).struct.endpoint=e)},null,8,["modelValue"])])]),m("div",Is,[m("div",Js,[m("label",As,[p(t,{content:"腾讯云短信服务 appid",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Ns])])),_:1})]),p(n,{modelValue:d(V).struct.sms_sdk_app_id,"onUpdate:modelValue":s[5]||(s[5]=e=>d(V).struct.sms_sdk_app_id=e)},null,8,["modelValue"])])])]),m("div",Ds,[m("div",Es,[m("div",$s,[m("label",Ps,[p(t,{content:"短信签名，如：萌卜兔",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Ts])])),_:1})]),p(n,{modelValue:d(V).struct.sign_name,"onUpdate:modelValue":s[6]||(s[6]=e=>d(V).struct.sign_name=e)},null,8,["modelValue"])])]),m("div",Ws,[m("div",Bs,[m("label",Ls,[p(t,{content:"验证码模板 id，如：146XXX",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Ms])])),_:1})]),p(n,{modelValue:d(V).struct.verify_code,"onUpdate:modelValue":s[7]||(s[7]=e=>d(V).struct.verify_code=e)},null,8,["modelValue"])])]),m("div",Xs,[m("div",Fs,[m("label",Ys,[p(t,{content:"短信服务所属区域，如：ap-guangzhou",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Gs])])),_:1})]),p(n,{modelValue:d(V).struct.region,"onUpdate:modelValue":s[8]||(s[8]=e=>d(V).struct.region=e)},null,8,["modelValue"])])]),m("div",Hs,[m("div",Qs,[m("label",Zs,[p(t,{content:"用于腾讯云短信测试接收测试信息的手机号",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),ea])])),_:1})]),p(n,{modelValue:d(V).struct.phone,"onUpdate:modelValue":s[10]||(s[10]=e=>d(V).struct.phone=e),onKeydown:s[11]||(s[11]=b((e=>k.test()),["enter"])),class:"custom",placeholder:"请输入手机号"},{suffix:f((()=>[p(w,{onClick:s[9]||(s[9]=e=>k.test()),loading:d(V).status.test},{default:f((()=>[d(V).status.test?v("",!0):(i(),h(a,{key:0,name:"phone",size:"14px"})),sa])),_:1},8,["loading"])])),_:1},8,["modelValue"])])])])])),footer:f((()=>[p(w,{onClick:s[12]||(s[12]=e=>d(V).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(w,{onClick:s[13]||(s[13]=e=>k.save()),loading:d(V).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},ta={class:"card mb-3"},la={class:"card-body"},na={class:"text-muted text-uppercase mt-0"},oa=m("br",null,null,-1),ca={class:"d-inline-flex align-items-center"},ia=m("span",{class:"ms-1"},"注 册",-1),ua={class:"m-b-20"},ra=m("span",{class:"badge bg-primary font-white"}," +0.1% ",-1),da={class:"text-muted ms-1"},ma=m("strong",{class:"flex-center"},"配置",-1),pa={class:"row"},fa={class:"col-lg-6"},ga={class:"form-group mb-3"},ba={class:"form-label"},ha=m("span",null,"（可选）为该分组的用户分配更高级的权限",-1),va=m("br",null,null,-1),ya=m("span",null,"● 默认：即便用户拥有了对应的权限，也只能操作自己的数据，适用于普通用户或会员",-1),wa=m("br",null,null,-1),_a=m("span",null,"● 管理权限：该权限适用于有管理权限的用户，比如管理员和编辑员等，对别人的数据有操作权限",-1),xa=m("br",null,null,-1),Va=m("span",{class:"ms-1"},"注册：",-1),ka={class:"font-13"},za={class:"col-lg-6"},Sa={class:"form-group mb-3"},Ua={class:"form-label"},Ca=m("span",{class:"ms-1"},"分配权限：",-1),Oa={class:"font-13 d-flex align-items-center"},ja={class:"text-muted"},qa={__name:"allow-register",setup(b,{expose:v}){const x=e({item:{auth:[]},struct:{key:"ALLOW_REGISTER"},status:{finish:!1,active:!1,dialog:!1,loading:!0,wait:!1},select:{auth:[],value:[{value:"0",label:"禁止注册",color:"var(--bs-danger)"},{value:"1",label:"允许注册",color:"var(--bs-success)"}]}}),V={init:async()=>{x.status.finish=!1,x.status.loading=!0;const{code:e,data:s}=await a.get("/api/config/one",{key:"ALLOW_REGISTER"});x.status.loading=!1,200===e&&(x.struct=s,x.status.finish=!0)},change:async e=>{const{code:s,msg:l}=await a.post("/api/config/save",{key:"ALLOW_REGISTER",value:e?1:0});200!==s&&(x.status.active=!e,t.error(l))},show(){if(!x.status.finish)return t.warn("配置获取失败，无法进行配置！");x.status.dialog=!0},save:async()=>{x.status.wait=!0;const{code:e,msg:s}=await a.post("/api/config/save",{...x.struct,text:x.item.auth});if(x.status.wait=!1,200!==e)return t.error("保存失败："+s);x.status.dialog=!1},auth:async()=>{const{code:e,data:s}=await a.get("/api/auth-group/column",{field:"id,key,name,root"});200===e&&(x.select.auth=s.map((e=>(e.color=1===e.root?"var(--bs-success)":"var(--bs-secondary)",e))))}};return s((()=>{V.init(),V.auth()})),n((()=>x.struct),(e=>{var s,a;x.item.auth=((null==(s=null==e?void 0:e.text)?void 0:s.split(","))||[]).filter((e=>!l.is.empty(e))).map((e=>parseInt(e))),x.status.active=1===parseInt(null==(a=x.struct)?void 0:a.value)}),{deep:!0}),n((()=>x.status.active),(e=>{x.struct.value=e?"1":"0"})),v({init:V.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("el-switch"),n=o("el-option"),b=o("el-select"),v=o("el-button"),k=o("el-dialog"),z=c("loading");return i(),u(y,null,[r((i(),u("div",ta,[m("div",la,[p(a,{name:"register",color:"rgb(var(--assist-color))",size:"50px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",na,[p(t,{placement:"top"},{content:f((()=>[g(" ● 是否允许用户自行注册账号（开放注册功能？）"),oa,g(" ● 如果不允许，那么只能通过管理员手动创建账号 ")])),default:f((()=>[m("span",ca,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),ia])])),_:1})]),m("h2",ua,[p(l,{modelValue:d(x).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(x).status.active=e),onChange:V.change,disabled:!d(x).status.finish,"active-text":"允许","inactive-text":"不允许"},null,8,["modelValue","onChange","disabled"])]),ra,m("span",da,[g(" 安全性提升，"),m("span",{onClick:s[1]||(s[1]=e=>V.show()),class:"text-white pointer"},"点我配置")])])])),[[z,d(x).status.loading]]),p(k,{modelValue:d(x).status.dialog,"onUpdate:modelValue":s[6]||(s[6]=e=>d(x).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[ma])),default:f((()=>[m("div",pa,[m("div",fa,[m("div",ga,[m("label",ba,[p(t,{placement:"top"},{content:f((()=>[ha,va,ya,wa,_a,xa])),default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),Va])])),_:1})]),p(b,{modelValue:d(x).struct.value,"onUpdate:modelValue":s[2]||(s[2]=e=>d(x).struct.value=e),placeholder:"请选择权限",class:"d-block custom font-13"},{default:f((()=>[(i(!0),u(y,null,w(d(x).select.value,(e=>(i(),h(n,{key:e.value,label:e.label,value:e.value,class:"d-flex align-items-center"},{default:f((()=>[p(a,{name:"dot",color:e.color,size:"20px"},null,8,["color"]),m("span",ka,_(e.label),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),m("div",za,[m("div",Sa,[m("label",Ua,[p(t,{content:"为注册的用户分配默认的权限",placement:"top"},{default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),Ca])])),_:1})]),p(b,{modelValue:d(x).item.auth,"onUpdate:modelValue":s[3]||(s[3]=e=>d(x).item.auth=e),"reserve-keyword":!1,"default-first-option":"","collapse-tags-tooltip":"","allow-create":"",multiple:"",filterable:"","collapse-tags":"",class:"d-block custom font-13",placeholder:"选择注册的默认权限"},{default:f((()=>[(i(!0),u(y,null,w(d(x).select.auth,(e=>(i(),h(n,{key:e.id,label:e.name,value:e.id,class:"d-flex justify-content-between"},{default:f((()=>[m("span",Oa,[p(a,{name:"dot",color:e.color,size:"20px"},null,8,["color"]),g(" "+_(e.name),1)]),m("small",ja,_(e.key),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])])])])),footer:f((()=>[p(v,{onClick:s[4]||(s[4]=e=>d(x).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(v,{onClick:s[5]||(s[5]=e=>V.save()),loading:d(x).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},Ra={class:"card mb-3"},Ka={class:"card-body"},Ia={class:"text-muted text-uppercase mt-0"},Ja=m("br",null,null,-1),Aa={class:"d-inline-flex align-items-center"},Na=m("span",{class:"ms-1"},"JWT",-1),Da={class:"m-b-20"},Ea=m("span",{class:"badge bg-primary font-white"}," +5% ",-1),$a={class:"text-muted ms-1"},Pa=m("strong",{class:"flex-center"},"配置 JSON Web Token",-1),Ta={class:"row"},Wa={class:"col-md-6"},Ba={class:"form-group mb-3"},La={class:"form-label required"},Ma=m("span",{class:"ms-1"},"签发者：",-1),Xa={class:"col-md-6"},Fa={class:"form-group mb-3"},Ya={class:"form-label required"},Ga=m("span",{class:"ms-1"},"主题：",-1),Ha={class:"col-md-6"},Qa={class:"form-group mb-3"},Za={class:"form-label required"},et=m("span",{class:"ms-1"},"密钥：",-1),st=m("span",{class:"ms-1"},"随机",-1),at={class:"col-md-6"},tt={class:"form-group mb-3"},lt={class:"form-label required"},nt=m("span",{class:"ms-1"},"过期时间(秒)：",-1),ot={__name:"jwt",setup(l,{expose:b}){const h=e({struct:{key:null,issuer:null,subject:null,expire:null},status:{active:!0,finish:!1,dialog:!1,loading:!0,wait:!1}});s((async()=>{await v.init()}));const v={init:async()=>{h.status.finish=!1,h.status.loading=!0;const{code:e,data:s}=await a.get("/api/toml/crypt",{name:"jwt"});h.status.loading=!1,200===e&&(h.struct=s,h.status.finish=!0)},show(){if(!h.status.finish)return t.warn("分页限制配置获取失败，无法进行配置！");h.status.dialog=!0},change:async e=>{e||(h.status.active=!0,t.warn("？？？？？？？？？？？？？<br>JWT是基础服务，这可不许关"))},save:async()=>{h.status.wait=!0;const{code:e,msg:s}=await a.put("/api/toml/crypt-jwt",h.struct);if(h.status.wait=!1,200!==e)return t.error("保存失败："+s);h.status.dialog=!1},rand(e="key"){let s="INIS-";const a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(let t=0;t<32;t++)s+=a.charAt(Math.floor(62*Math.random()));h.struct[e]=s}};return n((()=>h.struct),(()=>{h.struct.key=h.struct.key.replace(/[^\w!@#$%^&*()_+\-=\[\]{};:'"\\|\/?,.<>~`\s]/g,""),h.struct.expire=h.struct.expire.replace(/[^\d\s*+\-\/]/g,"")}),{deep:!0}),b({init:v.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-button"),w=o("el-dialog"),_=c("loading");return i(),u(y,null,[r((i(),u("div",Ra,[m("div",Ka,[p(a,{name:"crypt",size:"55px",color:"rgb(var(--assist-color))",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",Ia,[p(t,{placement:"top"},{content:f((()=>[g(" JWT（JSON Web Token）是一种在网络应用中传递声明信息的轻量级、安全的方式。"),Ja,g(" JWT具有通用性和可扩展性，可以应用在很多场景，比如用户认证、单点登录、API访问授权等。 ")])),default:f((()=>[m("span",Aa,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),Na])])),_:1})]),m("h2",Da,[p(l,{modelValue:d(h).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(h).status.active=e),onChange:v.change,disabled:!d(h).status.finish,"active-text":"开始","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),Ea,m("span",$a,[g(" 安全性提升，"),m("span",{onClick:s[1]||(s[1]=e=>v.show()),class:"text-white pointer"},"点我配置")])])])),[[_,d(h).status.loading]]),p(w,{modelValue:d(h).status.dialog,"onUpdate:modelValue":s[9]||(s[9]=e=>d(h).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[Pa])),default:f((()=>[m("div",Ta,[m("div",Wa,[m("div",Ba,[m("label",La,[p(t,{content:"签发者，比如：萌卜兔",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Ma])])),_:1})]),p(n,{modelValue:d(h).struct.issuer,"onUpdate:modelValue":s[2]||(s[2]=e=>d(h).struct.issuer=e)},null,8,["modelValue"])])]),m("div",Xa,[m("div",Fa,[m("label",Ya,[p(t,{content:"主题，比如：萌卜兔",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Ga])])),_:1})]),p(n,{modelValue:d(h).struct.subject,"onUpdate:modelValue":s[3]||(s[3]=e=>d(h).struct.subject=e)},null,8,["modelValue"])])]),m("div",Ha,[m("div",Qa,[m("label",Za,[p(t,{content:"生成JWT的密钥，建议复杂度高一些",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),et])])),_:1})]),p(n,{modelValue:d(h).struct.key,"onUpdate:modelValue":s[5]||(s[5]=e=>d(h).struct.key=e),class:"custom",placeholder:"请输入验证码"},{suffix:f((()=>[p(b,{onClick:s[4]||(s[4]=e=>v.rand())},{default:f((()=>[p(a,{name:"restore",color:"rgb(var(--vice-color))",size:"14px"}),st])),_:1})])),_:1},8,["modelValue"])])]),m("div",at,[m("div",tt,[m("label",lt,[p(t,{content:"签名有效期，可以用乘法，如：7 * 24 * 60 * 60 表示7天",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),nt])])),_:1})]),p(n,{modelValue:d(h).struct.expire,"onUpdate:modelValue":s[6]||(s[6]=e=>d(h).struct.expire=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(b,{onClick:s[7]||(s[7]=e=>d(h).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(b,{onClick:s[8]||(s[8]=e=>v.save()),loading:d(h).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},ct={class:"card mb-3"},it={class:"card-body"},ut={class:"text-muted mt-0"},rt=m("strong",{class:"text-success"},"推荐开启，有利于减少数据库和服务器的负担！",-1),dt=m("br",null,null,-1),mt=m("br",null,null,-1),pt=m("br",null,null,-1),ft={class:"d-inline-flex align-items-center"},gt=m("span",{class:"ms-1"},"Redis 缓存",-1),bt={class:"m-b-20"},ht=m("span",{class:"badge bg-success font-white"}," +30% ",-1),vt={class:"text-muted"},yt=m("strong",{class:"flex-center"},"配置 Redis 缓存服务",-1),wt={class:"row"},_t={class:"col-md-4"},xt={class:"form-group mb-3"},Vt={class:"form-label required"},kt=m("span",{class:"ms-1"},"主机：",-1),zt={class:"col-md-4"},St={class:"form-group mb-3"},Ut={class:"form-label required"},Ct=m("span",{class:"ms-1"},"端口：",-1),Ot={class:"col-md-4"},jt={class:"form-group mb-3"},qt={class:"form-label required"},Rt=m("span",{class:"ms-1"},"数据库：",-1),Kt={class:"font-13"},It={class:"row"},Jt={class:"col-md-4"},At={class:"form-group mb-3"},Nt={class:"form-label"},Dt=m("span",{class:"ms-1"},"密码：",-1),Et={class:"col-md-4"},$t={class:"form-group mb-3"},Pt={class:"form-label"},Tt=m("span",{class:"ms-1"},"过期时间（秒）：",-1),Wt={class:"col-md-4"},Bt={class:"form-group mb-3"},Lt={class:"form-label"},Mt=m("span",{class:"ms-1"},"前缀：",-1),Xt=m("span",{class:"ms-1"},"测试连接",-1),Ft={__name:"cache-redis",emits:["refresh"],setup(b,{expose:x,emit:V}){const k=e({struct:{open:!1,default:null,host:"localhost",port:6379,database:0,password:"",prefix:"inis:",expire:"2 * 60 * 60"},status:{finish:!1,active:!1,dialog:!1,loading:!0,test:!1},backup:{}});s((async()=>{await z.init()}));const z={init:async()=>{k.status.finish=!1,k.status.loading=!0;const{code:e,data:s}=await a.get("/api/toml/cache",{name:"redis"});k.status.loading=!1,200===e&&(k.struct=s,k.backup=JSON.parse(JSON.stringify(s)),k.status.finish=!0)},show(){if(!k.status.finish)return t.warn("配置获取失败，无法进行配置！");k.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await a.put("/api/toml/cache-default",{value:"redis",open:e});if(200===s)return V("refresh","cache-file","cache-ram");k.status.active=!e,t.error(l)},save:async()=>{if(!l.object.equal(k.struct,k.backup,["host","port","database","password"]))return t.warn("请先完成测试连接");if(l.is.empty(k.struct.host))return t.warn("请填写 主机地址！");if(l.is.empty(k.struct.port))return t.warn("请填写 端口号！");if(l.is.empty(k.struct.database))return t.warn("请选择 数据库！");k.status.wait=!0;const{code:e,msg:s}=await a.put("/api/toml/cache-redis",k.struct);if(k.status.wait=!1,200!==e)return t.error("保存失败："+s);k.status.dialog=!1},test:async()=>{if(l.is.empty(k.struct.host))return t.warn("请填写 主机地址！");if(l.is.empty(k.struct.port))return t.warn("请填写 端口号！");if(l.is.empty(k.struct.database))return t.warn("请选择 数据库！");k.status.test=!0;const{code:e,msg:s,data:n}=await a.post("/api/toml/test-redis",k.struct);if(k.status.test=!1,200===e)return k.backup=JSON.parse(JSON.stringify(k.struct)),t.success(s);t.error(`${s}<br>${n}`)}};return n((()=>k.struct),(()=>{k.status.active="redis"===k.struct.default&&k.struct.open}),{deep:!0}),x({init:z.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-input-number"),x=o("el-option"),V=o("el-select"),S=o("el-button"),U=o("el-dialog"),C=c("loading");return i(),u(y,null,[r((i(),u("div",ct,[m("div",it,[p(a,{name:"redis",color:"rgb(var(--assist-color))",size:"56px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",ut,[p(t,{placement:"top"},{content:f((()=>[rt,dt,g(" 开启后会对API数据进行缓存，减少重复执行数据库操作以及对数据的运算，"),mt,g(" 从而提高API的响应速度，减少服务器的负担。"),pt,g(" PS：缓存数据会存储在专门的缓存数据库Redis中。 ")])),default:f((()=>[m("span",ft,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),gt])])),_:1})]),m("h2",bt,[p(l,{modelValue:d(k).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(k).status.active=e),onChange:z.change,disabled:!d(k).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),ht,m("span",vt,[g(" 综合提升，"),m("span",{onClick:s[1]||(s[1]=e=>z.show()),class:"text-white pointer"},"点我配置")])])])),[[C,d(k).status.loading]]),p(U,{modelValue:d(k).status.dialog,"onUpdate:modelValue":s[11]||(s[11]=e=>d(k).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[yt])),default:f((()=>[m("div",wt,[m("div",_t,[m("div",xt,[m("label",Vt,[p(t,{content:"主机地址，如：localhost",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),kt])])),_:1})]),p(n,{modelValue:d(k).struct.host,"onUpdate:modelValue":s[2]||(s[2]=e=>d(k).struct.host=e)},null,8,["modelValue"])])]),m("div",zt,[m("div",St,[m("label",Ut,[p(t,{content:"端口号，如：6379",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Ct])])),_:1})]),p(b,{modelValue:d(k).struct.port,"onUpdate:modelValue":s[3]||(s[3]=e=>d(k).struct.port=e),min:1,max:65535,class:"w-100 d-flex",style:{height:"28px"},"controls-position":"right"},null,8,["modelValue"])])]),m("div",Ot,[m("div",jt,[m("label",qt,[p(t,{content:"数据库索引，如：0",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Rt])])),_:1})]),p(V,{modelValue:d(k).struct.database,"onUpdate:modelValue":s[4]||(s[4]=e=>d(k).struct.database=e),placeholder:"请选择方式",class:"d-block custom font-13"},{default:f((()=>[(i(),u(y,null,w(16,((e,s)=>p(x,{key:s,label:s,value:s},{default:f((()=>[m("span",Kt,_(s),1)])),_:2},1032,["label","value"]))),64))])),_:1},8,["modelValue"])])])]),m("div",It,[m("div",Jt,[m("div",At,[m("label",Nt,[p(t,{content:"Redis密码，无密码为空即可",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Dt])])),_:1})]),p(n,{modelValue:d(k).struct.password,"onUpdate:modelValue":s[5]||(s[5]=e=>d(k).struct.password=e),"show-password":"",placeholder:"无密码为空即可"},null,8,["modelValue"])])]),m("div",Et,[m("div",$t,[m("label",Pt,[p(t,{content:"缓存有效时间，建议2小时，即7200秒，0表示永不过期",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Tt])])),_:1})]),p(n,{modelValue:d(k).struct.expire,"onUpdate:modelValue":s[6]||(s[6]=e=>d(k).struct.expire=e)},null,8,["modelValue"])])]),m("div",Wt,[m("div",Bt,[m("label",Lt,[p(t,{content:"每个Key固定的前缀，如：inis:",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Mt])])),_:1})]),p(n,{modelValue:d(k).struct.prefix,"onUpdate:modelValue":s[7]||(s[7]=e=>d(k).struct.prefix=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(S,{onClick:s[8]||(s[8]=e=>d(k).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(S,{onClick:s[9]||(s[9]=e=>z.test()),loading:d(k).status.test},{default:f((()=>[d(k).status.test?v("",!0):(i(),h(a,{key:0,name:"connect",size:"14px"})),Xt])),_:1},8,["loading"]),p(S,{onClick:s[10]||(s[10]=e=>z.save()),loading:d(k).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},Yt={class:"card mb-3"},Gt={class:"card-body"},Ht={class:"text-muted mt-0"},Qt=m("strong",{class:"text-success"},"推荐开启，有利于减少数据库和服务器的负担！",-1),Zt=m("br",null,null,-1),el=m("br",null,null,-1),sl=m("br",null,null,-1),al=m("code",null,"runtime/cache",-1),tl={class:"d-inline-flex align-items-center"},ll=m("span",{class:"ms-1"},"文件缓存",-1),nl={class:"m-b-20"},ol=m("span",{class:"badge bg-success font-white"}," +20% ",-1),cl={class:"text-muted"},il=m("strong",{class:"flex-center"},"配置 文件 缓存服务",-1),ul={class:"row"},rl={class:"col-md-4"},dl={class:"form-group mb-3"},ml={class:"form-label"},pl=m("span",{class:"ms-1"},"缓存目录：",-1),fl={class:"col-md-4"},gl={class:"form-group mb-3"},bl={class:"form-label"},hl=m("span",{class:"ms-1"},"过期时间（秒）：",-1),vl={class:"col-md-4"},yl={class:"form-group mb-3"},wl={class:"form-label"},_l=m("span",{class:"ms-1"},"前缀：",-1),xl={__name:"cache-file",emits:["refresh"],setup(b,{expose:h,emit:v}){const w=e({struct:{open:!1,default:null,path:null,prefix:"inis_",expire:"2 * 60 * 60"},status:{finish:!1,active:!1,dialog:!1,loading:!0,wait:!1}});s((async()=>{await _.init()}));const _={init:async()=>{w.status.finish=!1,w.status.loading=!0;const{code:e,data:s}=await a.get("/api/toml/cache",{name:"file"});w.status.loading=!1,200===e&&(w.struct=s,w.status.finish=!0)},show(){if(!w.status.finish)return t.warn("配置获取失败，无法进行配置！");w.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await a.put("/api/toml/cache-default",{value:"file",open:e});if(200===s)return v("refresh","cache-redis","cache-ram");w.status.active=!e,t.error(l)},save:async()=>{if(l.is.empty(w.struct.path))return t.warn("请填写 缓存目录！");if(l.is.empty(w.struct.expire))return t.warn("请填写 过期时间！");if(l.is.empty(w.struct.prefix))return t.warn("请选择 缓存前缀！");w.status.wait=!0;const{code:e,msg:s}=await a.put("/api/toml/cache-file",w.struct);if(w.status.wait=!1,200!==e)return t.error("保存失败："+s);w.status.dialog=!1}};return n((()=>w.struct),(()=>{w.status.active="file"===w.struct.default&&w.struct.open}),{deep:!0}),h({init:_.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-button"),h=o("el-dialog"),v=c("loading");return i(),u(y,null,[r((i(),u("div",Yt,[m("div",Gt,[p(a,{name:"file",color:"rgb(var(--assist-color))",size:"55px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",Ht,[p(t,{placement:"top"},{content:f((()=>[Qt,Zt,g(" 开启后会对API数据进行缓存，减少重复执行数据库操作以及对数据的运算，"),el,g(" 从而提高API的响应速度，减少服务器的负担。"),sl,g(" PS：缓存数据会通过文件的方式存储在服务器的 "),al,g(" 目录下。 ")])),default:f((()=>[m("span",tl,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),ll])])),_:1})]),m("h2",nl,[p(l,{modelValue:d(w).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(w).status.active=e),onChange:_.change,disabled:!d(w).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),ol,m("span",cl,[g(" 综合提升，"),m("span",{onClick:s[1]||(s[1]=e=>_.show()),class:"text-white pointer"},"点我配置")])])])),[[v,d(w).status.loading]]),p(h,{modelValue:d(w).status.dialog,"onUpdate:modelValue":s[7]||(s[7]=e=>d(w).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[il])),default:f((()=>[m("div",ul,[m("div",rl,[m("div",dl,[m("label",ml,[p(t,{content:"缓存文件存储到哪个目录下？推荐：runtime/cache",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),pl])])),_:1})]),p(n,{modelValue:d(w).struct.path,"onUpdate:modelValue":s[2]||(s[2]=e=>d(w).struct.path=e),placeholder:"缓存目录"},null,8,["modelValue"])])]),m("div",fl,[m("div",gl,[m("label",bl,[p(t,{content:"缓存有效时间，建议2小时，即7200秒，0表示永不过期",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),hl])])),_:1})]),p(n,{modelValue:d(w).struct.expire,"onUpdate:modelValue":s[3]||(s[3]=e=>d(w).struct.expire=e)},null,8,["modelValue"])])]),m("div",vl,[m("div",yl,[m("label",wl,[p(t,{content:"每个Key固定的前缀，推荐：inis_",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),_l])])),_:1})]),p(n,{modelValue:d(w).struct.prefix,"onUpdate:modelValue":s[4]||(s[4]=e=>d(w).struct.prefix=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(b,{onClick:s[5]||(s[5]=e=>d(w).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(b,{onClick:s[6]||(s[6]=e=>_.save()),loading:d(w).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},Vl={class:"card mb-3"},kl={class:"card-body"},zl={class:"text-muted mt-0"},Sl=m("strong",{class:"text-success"},"推荐开启，有利于减少数据库和服务器的负担！",-1),Ul=m("br",null,null,-1),Cl=m("br",null,null,-1),Ol=m("br",null,null,-1),jl={class:"d-inline-flex align-items-center"},ql=m("span",{class:"ms-1"},"内存缓存",-1),Rl={class:"m-b-20"},Kl=m("span",{class:"badge bg-success font-white"}," +20% ",-1),Il={class:"text-muted"},Jl=m("strong",{class:"flex-center"},"配置 内存 缓存服务",-1),Al={class:"row"},Nl={class:"col-md-12"},Dl={class:"form-group mb-3"},El={class:"form-label"},$l=m("span",{class:"ms-1"},"过期时间（秒）：",-1),Pl={__name:"cache-ram",emits:["refresh"],setup(b,{expose:h,emit:v}){const w=e({struct:{open:!1,default:null,expire:"2 * 60 * 60"},status:{finish:!1,active:!1,dialog:!1,loading:!0,wait:!1}});s((async()=>{await _.init()}));const _={init:async()=>{w.status.finish=!1,w.status.loading=!0;const{code:e,data:s}=await a.get("/api/toml/cache",{name:"ram"});w.status.loading=!1,200===e&&(w.struct=s,w.status.finish=!0)},show(){if(!w.status.finish)return t.warn("配置获取失败，无法进行配置！");w.status.dialog=!0},change:async e=>{const{code:s,msg:l}=await a.put("/api/toml/cache-default",{value:"ram",open:e});if(200===s)return v("refresh","cache-redis","cache-file");w.status.active=!e,t.error(l)},save:async()=>{if(l.is.empty(w.struct.expire))return t.warn("请填写 过期时间！");w.status.wait=!0;const{code:e,msg:s}=await a.put("/api/toml/cache-ram",w.struct);if(w.status.wait=!1,200!==e)return t.error("保存失败："+s);w.status.dialog=!1}};return n((()=>w.struct),(()=>{w.status.active="ram"===w.struct.default&&w.struct.open}),{deep:!0}),h({init:_.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-button"),h=o("el-dialog"),v=c("loading");return i(),u(y,null,[r((i(),u("div",Vl,[m("div",kl,[p(a,{name:"ram",color:"rgb(var(--assist-color))",size:"55px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",zl,[p(t,{placement:"top"},{content:f((()=>[Sl,Ul,g(" 开启后会对API数据进行缓存，减少重复执行数据库操作以及对数据的运算，"),Cl,g(" 从而提高API的响应速度，减少服务器的负担。"),Ol,g(" PS：缓存数据会通过内存的方式存储在服务器的内存中。 ")])),default:f((()=>[m("span",jl,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),ql])])),_:1})]),m("h2",Rl,[p(t,{content:"请不要作死，内存很宝贵，不要用在这种地方，除非你是本地环境或者不怕死",placement:"top"},{default:f((()=>[p(l,{modelValue:d(w).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(w).status.active=e),onChange:_.change,disabled:"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange"])])),_:1})]),Kl,m("span",Il,[g(" 综合提升，"),m("span",{onClick:s[1]||(s[1]=e=>_.show()),class:"text-white pointer"},"点我配置")])])])),[[v,d(w).status.loading]]),p(h,{modelValue:d(w).status.dialog,"onUpdate:modelValue":s[5]||(s[5]=e=>d(w).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[Jl])),default:f((()=>[m("div",Al,[m("div",Nl,[m("div",Dl,[m("label",El,[p(t,{content:"缓存有效时间，建议2小时，即7200秒，0表示永不过期",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),$l])])),_:1})]),p(n,{modelValue:d(w).struct.expire,"onUpdate:modelValue":s[2]||(s[2]=e=>d(w).struct.expire=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(b,{onClick:s[3]||(s[3]=e=>d(w).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(b,{onClick:s[4]||(s[4]=e=>_.save()),loading:d(w).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},Tl={class:"card mb-3"},Wl={class:"card-body"},Bl={class:"text-muted text-uppercase mt-0"},Ll=m("br",null,null,-1),Ml={class:"d-inline-flex align-items-center"},Xl=m("span",{class:"ms-1"},"本地存储",-1),Fl={class:"m-b-20"},Yl=m("span",{class:"badge bg-dark font-white"}," 传统 ",-1),Gl={class:"text-muted ms-1"},Hl=m("strong",{class:"flex-center"},"配置本地存储",-1),Ql={class:"row"},Zl={class:"col-6"},en={class:"form-group mb-3"},sn={class:"form-label required"},an=m("span",{class:"ms-1"},"域名：",-1),tn={class:"col-md-6"},ln={class:"form-group mb-3"},nn={class:"form-label"},on=m("span",{class:"ms-1"},"存储目录：",-1),cn={__name:"storage-local",emits:["refresh"],setup(l,{expose:b,emit:h}){const v=e({struct:{default:null,domain:null,path:"storage"},status:{active:!0,finish:!1,dialog:!1,loading:!0,wait:!1}});s((async()=>{await w.init()}));const w={init:async()=>{v.status.finish=!1,v.status.loading=!0;const{code:e,data:s}=await a.get("/api/toml/storage",{name:"local"});v.status.loading=!1,200===e&&(v.struct=s,v.status.finish=!0)},show(){if(!v.status.finish)return t.warn("配置获取失败，无法进行配置！");v.status.dialog=!0},change:async e=>{if(!e)return v.status.active=!0;const{code:s,msg:l}=await a.put("/api/toml/storage-default",{value:e?"local":null});if(200===s)return h("refresh");v.status.active=!e,t.error(l)},save:async()=>{v.status.wait=!0;const{code:e,msg:s}=await a.put("/api/toml/storage-local",v.struct);if(v.status.wait=!1,200!==e)return t.error("保存失败："+s);v.status.dialog=!1}};return n((()=>v.struct),(()=>{v.status.active="local"===v.struct.default}),{deep:!0}),b({init:w.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-button"),h=o("el-dialog"),_=c("loading");return i(),u(y,null,[r((i(),u("div",Tl,[m("div",Wl,[p(a,{name:"serve",color:"rgb(var(--assist-color))",size:"60px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",Bl,[p(t,{placement:"top"},{content:f((()=>[g(" ● 本地存储是指将图片等资源文件存储到服务器本地，然后通过访问服务器的方式获取资源文件"),Ll,g(" ● 本地存储的优点是不花钱，缺点是占用服务器空间和带宽 ")])),default:f((()=>[m("span",Ml,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),Xl])])),_:1})]),m("h2",Fl,[p(l,{modelValue:d(v).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(v).status.active=e),onChange:w.change,disabled:!d(v).status.finish,"active-text":"开始","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),Yl,m("span",Gl,[g(" 这个不花钱，"),m("span",{onClick:s[1]||(s[1]=e=>w.show()),class:"text-white pointer"},"点我配置")])])])),[[_,d(v).status.loading]]),p(h,{modelValue:d(v).status.dialog,"onUpdate:modelValue":s[6]||(s[6]=e=>d(v).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[Hl])),default:f((()=>[m("div",Ql,[m("div",Zl,[m("div",en,[m("label",sn,[p(t,{content:"自定义存储域名",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),an])])),_:1})]),p(n,{modelValue:d(v).struct.domain,"onUpdate:modelValue":s[2]||(s[2]=e=>d(v).struct.domain=e)},null,8,["modelValue"])])]),m("div",tn,[m("div",ln,[m("label",nn,[p(t,{content:"存储在哪个目录下",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),on])])),_:1})]),p(n,{modelValue:d(v).struct.path,"onUpdate:modelValue":s[3]||(s[3]=e=>d(v).struct.path=e),placeholder:"如: storage"},null,8,["modelValue"])])])])])),footer:f((()=>[p(b,{onClick:s[4]||(s[4]=e=>d(v).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(b,{onClick:s[5]||(s[5]=e=>w.save()),loading:d(v).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},un={class:"card mb-3"},rn={class:"card-body"},dn={class:"text-muted text-uppercase mt-0"},mn=m("br",null,null,-1),pn={class:"d-inline-flex align-items-center"},fn=m("span",{class:"ms-1"},"OSS",-1),gn={class:"m-b-20"},bn=m("span",{class:"badge bg-warning font-white"}," 推荐 ",-1),hn={class:"text-muted ms-1"},vn=m("strong",{class:"flex-center"},"配置 阿里云OSS 存储",-1),yn={class:"row"},wn={class:"col-md-6"},_n={class:"form-group mb-3"},xn={class:"form-label required"},Vn=m("span",{class:"ms-1"},"AccessKey ID：",-1),kn={class:"col-md-6"},zn={class:"form-group mb-3"},Sn={class:"form-label required"},Un=m("span",{class:"ms-1"},"AccessKey Secret：",-1),Cn={class:"col-md-4"},On={class:"form-group mb-3"},jn={class:"form-label required"},qn=m("span",{class:"ms-1"},"Endpoint：",-1),Rn={class:"font-13"},Kn={class:"text-muted float-end"},In={class:"col-md-4"},Jn={class:"form-group mb-3"},An={class:"form-label required"},Nn=m("span",{class:"ms-1"},"OSS Bucket：",-1),Dn={class:"col-md-4"},En={class:"form-group mb-3"},$n={class:"form-label"},Pn=m("span",{class:"ms-1"},"存储目录：",-1),Tn={class:"col-md-12"},Wn={class:"form-group mb-3"},Bn={class:"form-label"},Ln=m("span",{class:"ms-1"},"OSS 外网域名：",-1),Mn=m("span",{class:"ms-1"},"测试连接",-1),Xn={__name:"storage-oss",emits:["refresh"],setup(b,{expose:x,emit:V}){const k=e({struct:{path:"inis",default:null,domain:null,bucket:null,endpoint:null,access_key_id:null,access_key_secret:null},status:{active:!0,finish:!1,dialog:!1,loading:!0,wait:!1,test:!1},backup:{},select:{endpoint:[{value:"oss-cn-hangzhou.aliyuncs.com",label:"华东1（杭州）"},{value:"oss-cn-shanghai.aliyuncs.com",label:"华东2（上海）"},{value:"oss-cn-nanjing.aliyuncs.com",label:"华东5（南京-本地地域）"},{value:"oss-cn-fuzhou.aliyuncs.com",label:"华东6（福州-本地地域）"},{value:"oss-cn-qingdao.aliyuncs.com",label:"华北1（青岛）"},{value:"oss-cn-beijing.aliyuncs.com",label:"华北2（北京）"},{value:"oss-cn-zhangjiakou.aliyuncs.com",label:"华北 3（张家口）"},{value:"oss-cn-huhehaote.aliyuncs.com",label:"华北5（呼和浩特）"},{value:"oss-cn-wulanchabu.aliyuncs.com",label:"华北6（乌兰察布）"},{value:"oss-cn-shenzhen.aliyuncs.com",label:"华南1（深圳）"},{value:"oss-cn-heyuan.aliyuncs.com",label:"华南2（河源）"},{value:"oss-cn-guangzhou.aliyuncs.com",label:"华南3（广州）"},{value:"oss-cn-chengdu.aliyuncs.com",label:"西南1（成都）"},{value:"oss-cn-hongkong.aliyuncs.com",label:"中国香港"},{value:"oss-us-west-1.aliyuncs.com",label:"美国（硅谷）①"},{value:"oss-us-east-1.aliyuncs.com",label:"美国（弗吉尼亚）①"},{value:"oss-ap-northeast-1.aliyuncs.com",label:"日本（东京）①"},{value:"oss-ap-northeast-2.aliyuncs.com",label:"韩国（首尔）"},{value:"oss-ap-southeast-1.aliyuncs.com",label:"新加坡①"},{value:"oss-ap-southeast-2.aliyuncs.com",label:"澳大利亚（悉尼）①"},{value:"oss-ap-southeast-3.aliyuncs.com",label:"马来西亚（吉隆坡）①"},{value:"oss-ap-southeast-5.aliyuncs.com",label:"印度尼西亚（雅加达）①"},{value:"oss-ap-southeast-6.aliyuncs.com",label:"菲律宾（马尼拉）"},{value:"oss-ap-southeast-7.aliyuncs.com",label:"泰国（曼谷）"},{value:"oss-ap-south-1.aliyuncs.com",label:"印度（孟买）①"},{value:"oss-eu-central-1.aliyuncs.com",label:"德国（法兰克福）①"},{value:"oss-eu-west-1.aliyuncs.com",label:"英国（伦敦）"},{value:"oss-me-east-1.aliyuncs.com",label:"阿联酋（迪拜）①"},{value:"oss-rg-china-mainland.aliyuncs.com",label:"无地域属性（中国内地）"},{value:"oss-cn-hzfinance.aliyuncs.com",label:"杭州金融云公网"},{value:"oss-cn-shanghai-finance-1-pub.aliyuncs.com",label:"上海金融云公网"},{value:"oss-cn-szfinance.aliyuncs.com",label:"深圳金融云公网"},{value:"oss-cn-beijing-finance-1-pub.aliyuncs.com",label:"北京金融云公网"}]}});s((async()=>{await z.init()}));const z={init:async()=>{k.status.finish=!1,k.status.loading=!0;const{code:e,data:s}=await a.get("/api/toml/storage",{name:"oss"});k.status.loading=!1,200===e&&(k.struct=s,k.backup=JSON.parse(JSON.stringify(s)),k.status.finish=!0)},show(){if(!k.status.finish)return t.warn("存储配置获取失败，无法进行配置！");k.status.dialog=!0},change:async e=>{if(!e)return k.status.active=!0;const{code:s,msg:l}=await a.put("/api/toml/storage-default",{value:e?"oss":null});if(200===s)return V("refresh");k.status.active=!e,t.error(l)},save:async()=>{if(!l.object.equal(k.struct,k.backup,["access_key_id","access_key_secret","endpoint","bucket"]))return t.warn("请先OSS连接测试");if(l.is.empty(k.struct.access_key_id))return t.warn("请填写 AccessKey ID！");if(l.is.empty(k.struct.access_key_secret))return t.warn("请填写 AccessKey Secret！");if(l.is.empty(k.struct.endpoint))return t.warn("请填写 Endpoint！");if(l.is.empty(k.struct.bucket))return t.warn("请填写 Bucket！");k.status.wait=!0;const{code:e,msg:s}=await a.put("/api/toml/storage-oss",k.struct);if(k.status.wait=!1,200!==e)return t.error("保存失败："+s);k.status.dialog=!1},test:async()=>{if(l.is.empty(k.struct.access_key_id))return t.warn("请填写 AccessKey ID！");if(l.is.empty(k.struct.access_key_secret))return t.warn("请填写 AccessKey Secret！");if(l.is.empty(k.struct.endpoint))return t.warn("请填写 Endpoint！");if(l.is.empty(k.struct.bucket))return t.warn("请填写 Bucket！");k.status.test=!0;const{code:e,msg:s,data:n}=await a.post("/api/toml/test-oss",k.struct);if(k.status.test=!1,200===e)return k.backup=JSON.parse(JSON.stringify(k.struct)),t.success(s);t.error(`${s}<br>${n}`)}};return n((()=>k.struct),(()=>{k.status.active="oss"===k.struct.default}),{deep:!0}),x({init:z.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-option"),x=o("el-select"),V=o("el-button"),S=o("el-dialog"),U=c("loading");return i(),u(y,null,[r((i(),u("div",un,[m("div",rn,[p(a,{name:"aliyun",color:"rgb(var(--assist-color))",size:"60px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",dn,[p(t,{placement:"top"},{content:f((()=>[g(" ● OSS可以替代传统的本地存储，有能力的情况推荐开启OSS存储"),mn,g(" ● 开启后，后续上传的文件将会自动上传到OSS，不会占用服务器的空间和带宽 ")])),default:f((()=>[m("span",pn,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),fn])])),_:1})]),m("h2",gn,[p(l,{modelValue:d(k).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(k).status.active=e),onChange:z.change,disabled:!d(k).status.finish,"active-text":"开始","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),bn,m("span",hn,[g(" 这个还不错，"),m("span",{onClick:s[1]||(s[1]=e=>z.show()),class:"text-white pointer"},"点我配置")])])])),[[U,d(k).status.loading]]),p(S,{modelValue:d(k).status.dialog,"onUpdate:modelValue":s[11]||(s[11]=e=>d(k).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[vn])),default:f((()=>[m("div",yn,[m("div",wn,[m("div",_n,[m("label",xn,[p(t,{content:"阿里云 AccessKey ID",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Vn])])),_:1})]),p(n,{modelValue:d(k).struct.access_key_id,"onUpdate:modelValue":s[2]||(s[2]=e=>d(k).struct.access_key_id=e),"show-password":""},null,8,["modelValue"])])]),m("div",kn,[m("div",zn,[m("label",Sn,[p(t,{content:"阿里云AccessKey Secret",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Un])])),_:1})]),p(n,{modelValue:d(k).struct.access_key_secret,"onUpdate:modelValue":s[3]||(s[3]=e=>d(k).struct.access_key_secret=e),"show-password":""},null,8,["modelValue"])])]),m("div",Cn,[m("div",On,[m("label",jn,[p(t,{content:"OSS 外网 Endpoint",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),qn])])),_:1})]),p(x,{modelValue:d(k).struct.endpoint,"onUpdate:modelValue":s[4]||(s[4]=e=>d(k).struct.endpoint=e),placeholder:"请选择所在地区",class:"d-block custom font-13"},{default:f((()=>[(i(!0),u(y,null,w(d(k).select.endpoint,(e=>(i(),h(b,{key:e.value,label:e.label,value:e.value},{default:f((()=>[m("span",Rn,_(e.label),1),m("small",Kn,_(e.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),m("div",In,[m("div",Jn,[m("label",An,[p(t,{content:"存储桶名称",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Nn])])),_:1})]),p(n,{modelValue:d(k).struct.bucket,"onUpdate:modelValue":s[5]||(s[5]=e=>d(k).struct.bucket=e)},null,8,["modelValue"])])]),m("div",Dn,[m("div",En,[m("label",$n,[p(t,{content:"存储在哪个目录下",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Pn])])),_:1})]),p(n,{modelValue:d(k).struct.path,"onUpdate:modelValue":s[6]||(s[6]=e=>d(k).struct.path=e),placeholder:"如: inis"},null,8,["modelValue"])])]),m("div",Tn,[m("div",Wn,[m("label",Bn,[p(t,{content:"用于访问 - 不填写则使用默认域名",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Ln])])),_:1})]),p(n,{modelValue:d(k).struct.domain,"onUpdate:modelValue":s[7]||(s[7]=e=>d(k).struct.domain=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(V,{onClick:s[8]||(s[8]=e=>d(k).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(V,{onClick:s[9]||(s[9]=e=>z.test()),loading:d(k).status.test},{default:f((()=>[d(k).status.test?v("",!0):(i(),h(a,{key:0,name:"connect",size:"14px"})),Mn])),_:1},8,["loading"]),p(V,{onClick:s[10]||(s[10]=e=>z.save()),loading:d(k).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},Fn={class:"card mb-3"},Yn={class:"card-body"},Gn={class:"text-muted text-uppercase mt-0"},Hn=m("br",null,null,-1),Qn={class:"d-inline-flex align-items-center"},Zn=m("span",{class:"ms-1"},"COS",-1),eo={class:"m-b-20"},so=m("span",{class:"badge bg-primary font-white"}," 推荐 ",-1),ao={class:"text-muted ms-1"},to=m("strong",{class:"flex-center"},"配置 腾讯云COS 存储",-1),lo={class:"row"},no={class:"col-md-6"},oo={class:"form-group mb-3"},co={class:"form-label required"},io=m("span",{class:"ms-1"},"SecretId：",-1),uo={class:"col-md-6"},ro={class:"form-group mb-3"},mo={class:"form-label required"},po=m("span",{class:"ms-1"},"SecretKey：",-1),fo={class:"col-md-6"},go={class:"form-group mb-3"},bo={class:"form-label required"},ho=m("span",{class:"ms-1"},"AppId：",-1),vo={class:"col-md-6"},yo={class:"form-group mb-3"},wo={class:"form-label required"},_o=m("span",{class:"ms-1"},"COS Bucket：",-1),xo={class:"col-md-3"},Vo={class:"form-group mb-3"},ko={class:"form-label required"},zo=m("span",{class:"ms-1"},"COS Region：",-1),So={class:"font-13"},Uo={class:"text-muted float-end"},Co={class:"col-md-3"},Oo={class:"form-group mb-3"},jo={class:"form-label"},qo=m("span",{class:"ms-1"},"存储目录：",-1),Ro={class:"col-md-6"},Ko={class:"form-group mb-3"},Io={class:"form-label"},Jo=m("span",{class:"ms-1"},"COS 外网域名：",-1),Ao=m("span",{class:"ms-1"},"测试连接",-1),No={__name:"storage-cos",emits:["refresh"],setup(b,{expose:x,emit:V}){const k=e({struct:{path:"inis",default:null,domain:null,app_id:null,bucket:null,region:null,secret_id:null,secret_key:null},status:{active:!0,finish:!1,dialog:!1,loading:!0,wait:!1,test:!1},backup:{},select:{region:[{value:"ap-beijing-1",label:"北京一区",area:"中国大陆"},{value:"ap-beijing",label:"北京",area:"中国大陆"},{value:"ap-nanjing",label:"南京",area:"中国大陆"},{value:"ap-shanghai",label:"上海",area:"中国大陆"},{value:"ap-guangzhou",label:"广州",area:"中国大陆"},{value:"ap-chengdu",label:"成都",area:"中国大陆"},{value:"ap-chongqing",label:"重庆",area:"中国大陆"},{value:"ap-shenzhen-fsi",label:"深圳金融",area:"中国大陆"},{value:"ap-shanghai-fsi",label:"上海金融",area:"中国大陆"},{value:"ap-beijing-fsi",label:"北京金融",area:"中国大陆"},{value:"ap-hongkong",label:"中国香港",area:"亚太"},{value:"ap-singapore",label:"新加坡",area:"亚太"},{value:"ap-mumbai",label:"孟买",area:"亚太"},{value:"ap-jakarta",label:"雅加达",area:"亚太"},{value:"ap-seoul",label:"首尔",area:"亚太"},{value:"ap-bangkok",label:"曼谷",area:"亚太"},{value:"ap-tokyo",label:"东京",area:"亚太"},{value:"na-siliconvalley",label:"硅谷（美西）",area:"北美"},{value:"na-ashburn",label:"弗吉尼亚（美东）",area:"北美"},{value:"na-toronto",label:"多伦多",area:"北美"},{value:"sa-saopaulo",label:"圣保罗",area:"南美"},{value:"eu-frankfurt",label:"法兰克福",area:"欧洲"}]}});s((async()=>{await z.init()}));const z={init:async()=>{k.status.finish=!1,k.status.loading=!0;const{code:e,data:s}=await a.get("/api/toml/storage",{name:"cos"});k.status.loading=!1,200===e&&(k.struct=s,k.backup=JSON.parse(JSON.stringify(s)),k.status.finish=!0)},show(){if(!k.status.finish)return t.warn("配置获取失败，无法进行配置！");k.status.dialog=!0},change:async e=>{if(!e)return k.status.active=!0;const{code:s,msg:l}=await a.put("/api/toml/storage-default",{value:e?"cos":null});if(200===s)return V("refresh");k.status.active=!e,t.error(l)},save:async()=>{if(!l.object.equal(k.struct,k.backup,["secret_id","secret_key","app_id","region","bucket"]))return t.warn("请先OSS连接测试");if(l.is.empty(k.struct.secret_id))return t.warn("请填写 SecretId！");if(l.is.empty(k.struct.secret_key))return t.warn("请填写 SecretKey！");if(l.is.empty(k.struct.app_id))return t.warn("请填写 AppId！");if(l.is.empty(k.struct.region))return t.warn("请填写 Bucket！");if(l.is.empty(k.struct.bucket))return t.warn("请填写 Region！");k.status.wait=!0;const{code:e,msg:s}=await a.put("/api/toml/storage-cos",k.struct);if(k.status.wait=!1,200!==e)return t.error("保存失败："+s);k.status.dialog=!1},test:async()=>{if(l.is.empty(k.struct.secret_id))return t.warn("请填写 SecretId！");if(l.is.empty(k.struct.secret_key))return t.warn("请填写 SecretKey！");if(l.is.empty(k.struct.app_id))return t.warn("请填写 AppId！");if(l.is.empty(k.struct.region))return t.warn("请填写 Bucket！");if(l.is.empty(k.struct.bucket))return t.warn("请填写 Region！");k.status.test=!0;const{code:e,msg:s,data:n}=await a.post("/api/toml/test-cos",k.struct);if(k.status.test=!1,200===e)return k.backup=JSON.parse(JSON.stringify(k.struct)),t.success(s);t.error(`${s}<br>${n}`)}};return n((()=>k.struct),(()=>{k.status.active="cos"===k.struct.default}),{deep:!0}),x({init:z.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("el-switch"),n=o("el-input"),b=o("el-option"),x=o("el-select"),V=o("el-button"),S=o("el-dialog"),U=c("loading");return i(),u(y,null,[r((i(),u("div",Fn,[m("div",Yn,[p(a,{name:"tencent",color:"rgb(var(--assist-color))",size:"60px",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),m("h6",Gn,[p(t,{placement:"top"},{content:f((()=>[g(" ● COS可以替代传统的本地存储，有能力的情况推荐开启COS存储"),Hn,g(" ● 开启后，后续上传的文件将会自动上传到COS，不会占用服务器的空间和带宽 ")])),default:f((()=>[m("span",Qn,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),Zn])])),_:1})]),m("h2",eo,[p(l,{modelValue:d(k).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(k).status.active=e),onChange:z.change,disabled:!d(k).status.finish,"active-text":"开始","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),so,m("span",ao,[g(" 这个也不错，"),m("span",{onClick:s[1]||(s[1]=e=>z.show()),class:"text-white pointer"},"点我配置")])])])),[[U,d(k).status.loading]]),p(S,{modelValue:d(k).status.dialog,"onUpdate:modelValue":s[12]||(s[12]=e=>d(k).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[to])),default:f((()=>[m("div",lo,[m("div",no,[m("div",oo,[m("label",co,[p(t,{content:"腾讯云COS SecretId",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),io])])),_:1})]),p(n,{modelValue:d(k).struct.secret_id,"onUpdate:modelValue":s[2]||(s[2]=e=>d(k).struct.secret_id=e),"show-password":""},null,8,["modelValue"])])]),m("div",uo,[m("div",ro,[m("label",mo,[p(t,{content:"腾讯云COS SecretKey",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),po])])),_:1})]),p(n,{modelValue:d(k).struct.secret_key,"onUpdate:modelValue":s[3]||(s[3]=e=>d(k).struct.secret_key=e),"show-password":""},null,8,["modelValue"])])]),m("div",fo,[m("div",go,[m("label",bo,[p(t,{content:"腾讯云COS AppId",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),ho])])),_:1})]),p(n,{modelValue:d(k).struct.app_id,"onUpdate:modelValue":s[4]||(s[4]=e=>d(k).struct.app_id=e)},null,8,["modelValue"])])]),m("div",vo,[m("div",yo,[m("label",wo,[p(t,{content:"存储桶名称",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),_o])])),_:1})]),p(n,{modelValue:d(k).struct.bucket,"onUpdate:modelValue":s[5]||(s[5]=e=>d(k).struct.bucket=e)},null,8,["modelValue"])])]),m("div",xo,[m("div",Vo,[m("label",ko,[p(t,{content:"所在地区，如这里的 ap-guangzhou（广州）",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),zo])])),_:1})]),p(x,{modelValue:d(k).struct.region,"onUpdate:modelValue":s[6]||(s[6]=e=>d(k).struct.region=e),placeholder:"请选择所在地区",class:"d-block custom font-13"},{default:f((()=>[(i(!0),u(y,null,w(d(k).select.region,(e=>(i(),h(b,{key:e.value,label:e.label,value:e.value},{default:f((()=>[m("span",So,_(e.label),1),m("small",Uo,_(e.value)+" | "+_(e.area),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),m("div",Co,[m("div",Oo,[m("label",jo,[p(t,{content:"存储在哪个目录下",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),qo])])),_:1})]),p(n,{modelValue:d(k).struct.path,"onUpdate:modelValue":s[7]||(s[7]=e=>d(k).struct.path=e),placeholder:"如: inis"},null,8,["modelValue"])])]),m("div",Ro,[m("div",Ko,[m("label",Io,[p(t,{content:"用于访问 - 不填写则使用默认域名",placement:"top"},{default:f((()=>[m("span",null,[p(a,{name:"hint",size:"14px"}),Jo])])),_:1})]),p(n,{modelValue:d(k).struct.domain,"onUpdate:modelValue":s[8]||(s[8]=e=>d(k).struct.domain=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(V,{onClick:s[9]||(s[9]=e=>d(k).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(V,{onClick:s[10]||(s[10]=e=>z.test()),loading:d(k).status.test},{default:f((()=>[d(k).status.test?v("",!0):(i(),h(a,{key:0,name:"connect",size:"14px"})),Ao])),_:1},8,["loading"]),p(V,{onClick:s[11]||(s[11]=e=>z.save()),loading:d(k).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},Do={class:"card mb-3"},Eo={class:"card-body"},$o={class:"text-muted text-uppercase mt-0"},Po=m("br",null,null,-1),To={class:"d-inline-flex align-items-center"},Wo=m("span",{class:"ms-1"},"KODO",-1),Bo={class:"m-b-20"},Lo=m("span",{class:"badge bg-info font-white"}," 一般 ",-1),Mo={class:"text-muted ms-1"},Xo=m("strong",{class:"flex-center"},"配置 七牛云KODO 存储",-1),Fo={class:"row"},Yo={class:"col-md-6"},Go={class:"form-group mb-3"},Ho={class:"form-label required"},Qo=m("span",{class:"ms-1"},"AccessKey：",-1),Zo={class:"col-md-6"},ec={class:"form-group mb-3"},sc={class:"form-label required"},ac=m("span",{class:"ms-1"},"SecretKey：",-1),tc={class:"col-md-6"},lc={class:"form-group mb-3"},nc={class:"form-label required"},oc=m("span",{class:"ms-1"},"Bucket：",-1),cc={class:"col-md-6"},ic={class:"form-group mb-3"},uc={class:"form-label required"},rc=m("span",{class:"ms-1"},"Region：",-1),dc={class:"font-13"},mc={class:"text-muted float-end"},pc={class:"col-md-12"},fc={class:"form-group mb-3"},gc={class:"form-label required"},bc=m("span",{class:"ms-1"},"外网域名：",-1),hc=m("span",{class:"ms-1"},"测试连接",-1),vc={__name:"storage-kodo",emits:["refresh"],setup(b,{expose:x,emit:V}){const k=e({struct:{default:null,domain:null,access_key:null,secret_key:null,bucket:null,region:null},status:{active:!0,finish:!1,dialog:!1,loading:!0,wait:!1,test:!1},backup:{},select:{region:[{value:"z0",label:"华东"},{value:"z1",label:"华北河北"},{value:"z2",label:"华南广东"},{value:"na0",label:"北美"},{value:"as0",label:"新加坡"},{value:"cn-east-2",label:"华东浙江"},{value:"ap-northeast-1",label:"亚太-首尔机房"}]}});s((async()=>{await z.init()}));const z={init:async()=>{k.status.finish=!1,k.status.loading=!0;const{code:e,data:s}=await a.get("/api/toml/storage",{name:"kodo"});k.status.loading=!1,200===e&&(k.struct=s,k.backup=JSON.parse(JSON.stringify(s)),k.status.finish=!0)},show(){if(!k.status.finish)return t.warn("配置获取失败，无法进行配置！");k.status.dialog=!0},change:async e=>{if(!e)return k.status.active=!0;const{code:s,msg:l}=await a.put("/api/toml/storage-default",{value:e?"kodo":null});if(200===s)return V("refresh");k.status.active=!e,t.error(l)},save:async()=>{if(!l.object.equal(k.struct,k.backup,["access_key","secret_key","bucket","region"]))return t.warn("请先KODO连接测试");if(l.is.empty(k.struct.access_key))return t.warn("请填写 AccessKey！");if(l.is.empty(k.struct.secret_key))return t.warn("请填写 SecretKey！");if(l.is.empty(k.struct.bucket))return t.warn("请填写 Bucket！");if(l.is.empty(k.struct.region))return t.warn("请填写 Region！");if(l.is.empty(k.struct.domain))return t.warn("请填写 外网域名！");k.status.wait=!0;const{code:e,msg:s}=await a.put("/api/toml/storage-kodo",k.struct);if(k.status.wait=!1,200!==e)return t.error("保存失败："+s);k.status.dialog=!1},test:async()=>{if(l.is.empty(k.struct.access_key))return t.warn("请填写 AccessKey！");if(l.is.empty(k.struct.secret_key))return t.warn("请填写 SecretKey！");if(l.is.empty(k.struct.bucket))return t.warn("请填写 Bucket！");if(l.is.empty(k.struct.region))return t.warn("请填写 Region！");k.status.test=!0;const{code:e,msg:s,data:n}=await a.post("/api/toml/test-kodo",k.struct);if(k.status.test=!1,200===e)return k.backup=JSON.parse(JSON.stringify(k.struct)),t.success(s);t.error(`${s}<br>${n}`)}};return n((()=>k.struct),(()=>{k.status.active="kodo"===k.struct.default}),{deep:!0}),x({init:z.init}),(e,s)=>{const a=o("el-image"),t=o("i-svg"),l=o("el-tooltip"),n=o("el-switch"),b=o("el-input"),x=o("el-option"),V=o("el-select"),S=o("el-button"),U=o("el-dialog"),C=c("loading");return i(),u(y,null,[r((i(),u("div",Do,[m("div",Eo,[p(a,{src:"/assets/imgs/png/qiniu.png",class:"position-absolute opacity-25",style:{right:"1.5rem",height:"65px"}}),m("h6",$o,[p(l,{placement:"top"},{content:f((()=>[g(" ● KODO可以替代传统的本地存储，有能力的情况推荐开启KODO存储（但是总体体验上比OSS和COS略差）"),Po,g(" ● 开启后，后续上传的文件将会自动上传到KODO，不会占用服务器的空间和带宽 ")])),default:f((()=>[m("span",To,[p(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),Wo])])),_:1})]),m("h2",Bo,[p(n,{modelValue:d(k).status.active,"onUpdate:modelValue":s[0]||(s[0]=e=>d(k).status.active=e),onChange:z.change,disabled:!d(k).status.finish,"active-text":"开始","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),Lo,m("span",Mo,[g(" 不是很好用，"),m("span",{onClick:s[1]||(s[1]=e=>z.show()),class:"text-white pointer"},"点我配置")])])])),[[C,d(k).status.loading]]),p(U,{modelValue:d(k).status.dialog,"onUpdate:modelValue":s[10]||(s[10]=e=>d(k).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[Xo])),default:f((()=>[m("div",Fo,[m("div",Yo,[m("div",Go,[m("label",Ho,[p(l,{content:"七牛云AccessKey",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),Qo])])),_:1})]),p(b,{modelValue:d(k).struct.access_key,"onUpdate:modelValue":s[2]||(s[2]=e=>d(k).struct.access_key=e),"show-password":""},null,8,["modelValue"])])]),m("div",Zo,[m("div",ec,[m("label",sc,[p(l,{content:"七牛云SecretKey",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),ac])])),_:1})]),p(b,{modelValue:d(k).struct.secret_key,"onUpdate:modelValue":s[3]||(s[3]=e=>d(k).struct.secret_key=e),"show-password":""},null,8,["modelValue"])])]),m("div",tc,[m("div",lc,[m("label",nc,[p(l,{content:"存储桶名称",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),oc])])),_:1})]),p(b,{modelValue:d(k).struct.bucket,"onUpdate:modelValue":s[4]||(s[4]=e=>d(k).struct.bucket=e)},null,8,["modelValue"])])]),m("div",cc,[m("div",ic,[m("label",uc,[p(l,{content:"KODO 所在地区",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),rc])])),_:1})]),p(V,{modelValue:d(k).struct.region,"onUpdate:modelValue":s[5]||(s[5]=e=>d(k).struct.region=e),placeholder:"请选择所在地区",class:"d-block custom font-13"},{default:f((()=>[(i(!0),u(y,null,w(d(k).select.region,(e=>(i(),h(x,{key:e.value,label:e.label,value:e.value},{default:f((()=>[m("span",dc,_(e.label),1),m("small",mc,_(e.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),m("div",pc,[m("div",fc,[m("label",gc,[p(l,{content:"（必须）外网域名 - 用于访问",placement:"top"},{default:f((()=>[m("span",null,[p(t,{name:"hint",size:"14px"}),bc])])),_:1})]),p(b,{modelValue:d(k).struct.domain,"onUpdate:modelValue":s[6]||(s[6]=e=>d(k).struct.domain=e)},null,8,["modelValue"])])])])])),footer:f((()=>[p(S,{onClick:s[7]||(s[7]=e=>d(k).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(S,{onClick:s[8]||(s[8]=e=>z.test()),loading:d(k).status.test},{default:f((()=>[d(k).status.test?v("",!0):(i(),h(t,{key:0,name:"connect",size:"14px"})),hc])),_:1},8,["loading"]),p(S,{onClick:s[9]||(s[9]=e=>z.save()),loading:d(k).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},yc={class:"card-body"},wc={class:"text-muted text-uppercase mt-0"},_c={class:"d-inline-flex align-items-center"},xc=m("span",{class:"ms-1"},"站点信息",-1),Vc={class:"d-flex"},kc={class:"d-flex align-items-center justify-content-center position-relative",style:{width:"60px",height:"60px"}},zc={class:"d-flex flex-column justify-content-center ms-2"},Sc={class:"font-18 text-dark d-flex align-items-center"},Uc={class:"text-dark font-16 me-2 limit-1-line"},Cc={class:"text-secondary limit-2-line"},Oc=m("strong",{class:"flex-center"},"站 点 信 息 配 置",-1),jc={class:"row"},qc={class:"col-md-6"},Rc={class:"form-group mb-3"},Kc={class:"form-label"},Ic=m("span",{class:"ms-1"},"ICP 备案码：",-1),Jc={class:"col-md-6"},Ac={class:"form-group mb-3"},Nc={class:"form-label"},Dc=m("span",{class:"ms-1"},"ICP 备案链接：",-1),Ec={class:"col-md-6"},$c={class:"form-group mb-3"},Pc={class:"form-label"},Tc=m("span",{class:"ms-1"},"公安备案码：",-1),Wc={class:"col-md-6"},Bc={class:"form-group mb-3"},Lc={class:"form-label"},Mc=m("span",{class:"ms-1"},"公安备案链接：",-1),Xc={class:"col-md-6"},Fc={class:"form-group mb-3"},Yc={class:"form-label"},Gc=m("span",{class:"ms-1"},"站点头像：",-1),Hc=m("span",{class:"ms-1"},"上传",-1),Qc={class:"col-md-6"},Zc={class:"form-group mb-3"},ei={class:"form-label"},si=m("span",{class:"ms-1"},"favicon：",-1),ai=m("span",{class:"ms-1"},"上传",-1),ti={class:"col-md-4"},li={class:"form-group mb-3"},ni={class:"form-label"},oi=m("span",{class:"ms-1"},"站点标题：",-1),ci={class:"col-md-4"},ii={class:"form-group mb-3"},ui={class:"form-label"},ri=m("span",{class:"ms-1"},"关键词：",-1),di={class:"col-md-4"},mi={class:"form-group mb-3"},pi={class:"form-label"},fi=m("span",{class:"ms-1"},"运营时间：",-1),gi={class:"row"},bi={class:"col-lg-12"},hi={class:"form-group mb-3"},vi={class:"form-label"},yi=m("span",{class:"ms-1"},"站点描述：",-1),wi={__name:"site-info",setup(b,{expose:V}){const k=e({item:{avatar:!0,keyword:""},struct:{key:"SITE_INFO",json:{title:"",avatar:"",favicon:"",copy:{code:"",link:""},police:{code:"",link:""},date:"",keyword:"",description:""},remark:"站点信息"},status:{finish:!1,loading:!0,dialog:!1},upload:{avatar:!1,favicon:!1}});s((async()=>{await z.init()}));const z={init:async()=>{k.status.finish=!1,k.status.loading=!0;const{code:e,data:s}=await a.get("/api/config/one",{key:"SITE_INFO"});if(k.status.loading=!1,204===e)return z.save();200===e&&(k.struct=l.object.deep.merge(k.struct,s),s.json.keyword&&(k.item.keyword=s.json.keyword.split(",")),k.status.finish=!0)},show(){if(!k.status.finish)return t.warn("配置获取失败，无法进行配置！");k.status.dialog=!0},save:async()=>{k.status.wait=!0;const{code:e,msg:s}=await a.post("/api/config/save",{...k.struct,json:JSON.stringify(k.struct.json)});if(k.status.wait=!1,200!==e)return t.error("保存失败："+s);k.status.dialog=!1,x.del("site-info")},async upload(e="image"){const s=document.createElement("input");s.type="file",s.accept="image/*",s.addEventListener("change",(async()=>{const l=new FormData;l.append("file",s.files[0]),k.upload[e]=!0;const{code:n,msg:o,data:c}=await a.post("/api/file/upload",l);if(k.upload[e]=!1,200!==n)return t.error(o);k.struct.json[e]=c.path,s.value="",t.info("上传成功！")})),s.click()}};return n((()=>k.item.keyword),(e=>{k.struct.json.keyword=e?e.join(","):""})),V({init:z.init}),(e,s)=>{const a=o("i-svg"),t=o("el-tooltip"),l=o("i-lottie"),n=o("el-avatar"),b=o("el-input"),x=o("el-button"),V=o("el-option"),S=o("el-select"),U=o("el-date-picker"),C=o("el-dialog"),O=c("loading");return i(),u(y,null,[r((i(),u("div",{onClick:s[1]||(s[1]=e=>z.show()),class:"card pointer mb-3"},[m("div",yc,[p(a,{name:"site",color:"rgb(var(--assist-color))",size:"50px",class:"position-absolute opacity-25",style:{right:"2rem"}}),m("h6",wc,[p(t,{content:"（点击卡片配置）站点信息，如：备案号、头像、favicon、关键词和描述等",placement:"top"},{default:f((()=>[m("span",_c,[p(a,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),xc])])),_:1})]),m("div",Vc,[m("span",kc,[p(l,{name:"avatar/crane",modelValue:d(k).item.avatar,"onUpdate:modelValue":s[0]||(s[0]=e=>d(k).item.avatar=e),width:"65px",height:"65px",class:"z-index-9"},null,8,["modelValue"]),p(n,{src:d(k).struct.json.avatar,size:52,style:{top:"7px",left:"2px"},class:"avatar-shadow position-absolute"},null,8,["src"])]),m("div",zc,[m("span",Sc,[m("span",Uc,_(d(k).struct.json.title),1)]),m("small",Cc,_(d(k).struct.json.description||"这个人很懒，什么都没留下！"),1)])])])])),[[O,d(k).status.loading]]),p(C,{modelValue:d(k).status.dialog,"onUpdate:modelValue":s[16]||(s[16]=e=>d(k).status.dialog=e),class:"custom",draggable:"","close-on-click-modal":!1},{header:f((()=>[Oc])),default:f((()=>[m("div",jc,[m("div",qc,[m("div",Rc,[m("label",Kc,[p(t,{content:"ICP备案码",placement:"top"},{default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),Ic])])),_:1})]),p(b,{modelValue:d(k).struct.json.copy.code,"onUpdate:modelValue":s[2]||(s[2]=e=>d(k).struct.json.copy.code=e),placeholder:"ICP备案码"},null,8,["modelValue"])])]),m("div",Jc,[m("div",Ac,[m("label",Nc,[p(t,{content:"工信部网址，如：https://beian.miit.gov.cn",placement:"top"},{default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),Dc])])),_:1})]),p(b,{modelValue:d(k).struct.json.copy.link,"onUpdate:modelValue":s[3]||(s[3]=e=>d(k).struct.json.copy.link=e),placeholder:"如：https://beian.miit.gov.cn"},null,8,["modelValue"])])]),m("div",Ec,[m("div",$c,[m("label",Pc,[p(t,{content:"公安备案码",placement:"top"},{default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),Tc])])),_:1})]),p(b,{modelValue:d(k).struct.json.police.code,"onUpdate:modelValue":s[4]||(s[4]=e=>d(k).struct.json.police.code=e),placeholder:"公安备案码"},null,8,["modelValue"])])]),m("div",Wc,[m("div",Bc,[m("label",Lc,[p(t,{content:"公安备案网址，如：https://www.beian.gov.cn",placement:"top"},{default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),Mc])])),_:1})]),p(b,{modelValue:d(k).struct.json.police.link,"onUpdate:modelValue":s[5]||(s[5]=e=>d(k).struct.json.police.link=e),placeholder:"如：https://www.beian.gov.cn"},null,8,["modelValue"])])]),m("div",Xc,[m("div",Fc,[m("label",Yc,[p(t,{content:"本站点的头像",placement:"top"},{default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),Gc])])),_:1})]),p(b,{modelValue:d(k).struct.json.avatar,"onUpdate:modelValue":s[7]||(s[7]=e=>d(k).struct.json.avatar=e),class:"custom",placeholder:"填写图片地址或点击上传"},{suffix:f((()=>[p(x,{onClick:s[6]||(s[6]=e=>z.upload("avatar")),loading:d(k).upload.avatar},{default:f((()=>[d(k).upload.avatar?v("",!0):(i(),h(a,{key:0,name:"upload",color:"rgb(var(--icon-color))",size:"14px"})),Hc])),_:1},8,["loading"])])),_:1},8,["modelValue"])])]),m("div",Qc,[m("div",Zc,[m("label",ei,[p(t,{content:"本站点的小图标",placement:"top"},{default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),si])])),_:1})]),p(b,{modelValue:d(k).struct.json.favicon,"onUpdate:modelValue":s[9]||(s[9]=e=>d(k).struct.json.favicon=e),class:"custom",placeholder:"填写图片地址或点击上传"},{suffix:f((()=>[p(x,{onClick:s[8]||(s[8]=e=>z.upload("favicon")),loading:d(k).upload.favicon},{default:f((()=>[d(k).upload.favicon?v("",!0):(i(),h(a,{key:0,name:"upload",color:"rgb(var(--icon-color))",size:"14px"})),ai])),_:1},8,["loading"])])),_:1},8,["modelValue"])])]),m("div",ti,[m("div",li,[m("label",ni,[p(t,{content:"站点标题，如：米哈游",placement:"top"},{default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),oi])])),_:1})]),p(b,{modelValue:d(k).struct.json.title,"onUpdate:modelValue":s[10]||(s[10]=e=>d(k).struct.json.title=e)},null,8,["modelValue"])])]),m("div",ci,[m("div",ii,[m("label",ui,[p(t,{content:"网站关键词，主要用于SEO场景，有助于收录",placement:"top"},{default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),ri])])),_:1})]),p(S,{modelValue:d(k).item.keyword,"onUpdate:modelValue":s[11]||(s[11]=e=>d(k).item.keyword=e),"reserve-keyword":!1,"default-first-option":"","collapse-tags-tooltip":"","allow-create":"",multiple:"",filterable:"","collapse-tags":"",class:"d-block custom font-13",placeholder:"请输入站点关键词"},{default:f((()=>[(i(!0),u(y,null,w(d(k).item.keyword,((e,s)=>(i(),h(V,{key:s,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),m("div",di,[m("div",mi,[m("label",pi,[p(t,{content:"本网站运营的开始时间",placement:"top"},{default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),fi])])),_:1})]),p(U,{modelValue:d(k).struct.json.date,"onUpdate:modelValue":s[12]||(s[12]=e=>d(k).struct.json.date=e),type:"date",format:"YYYY-MM-DD","value-format":"X",class:"d-block w-100 custom",placeholder:"请选择本站开设的时间"},null,8,["modelValue"])])])]),m("div",gi,[m("div",bi,[m("div",hi,[m("label",vi,[p(t,{content:"网站描述，主要用于SEO场景，有助于收录",placement:"top"},{default:f((()=>[m("span",null,[p(a,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),yi])])),_:1})]),p(b,{modelValue:d(k).struct.json.description,"onUpdate:modelValue":s[13]||(s[13]=e=>d(k).struct.json.description=e),autosize:{minRows:1,maxRows:10},placeholder:"站点描述！",type:"textarea"},null,8,["modelValue"])])])])])),footer:f((()=>[p(x,{onClick:s[14]||(s[14]=e=>d(k).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(x,{onClick:s[15]||(s[15]=e=>z.save()),loading:d(k).status.wait},{default:f((()=>[g("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}},_i={class:"card"},xi={class:"card-body"},Vi={class:"text-muted text-uppercase mt-0"},ki=m("br",null,null,-1),zi=m("br",null,null,-1),Si={key:0},Ui={class:"d-inline-flex align-items-center"},Ci=m("span",{class:"ms-1"},"绑定 inis 社区账号",-1),Oi={class:"m-b-20"},ji=m("span",{class:"badge bg-success font-white"}," 更多 ",-1),qi={class:"text-muted"},Ri={class:"d-flex flex-column align-items-center"},Ki={class:"flex-center"},Ii={class:"container-xxl"},Ji=m("br",null,null,-1),Ai=m("span",{class:"ms-1"},"绑定 inis 社区账号",-1),Ni={class:"row mb-3 mt-3"},Di=m("label",{class:"col-3 col-form-label"},"帐号：",-1),Ei={class:"col-9"},$i={class:"row mb-3"},Pi=m("label",{class:"col-3 col-form-label"},"密码：",-1),Ti={class:"col-9 d-flex"},Wi=m("div",{class:"flex-center"},[m("a",{href:"https://inis.cc",target:"_blank",class:"text-dark"},"没有账号？去注册")],-1),Bi={class:"modal-footer d-flex justify-content-center"},Li={__name:"bind",setup(n,{expose:h}){const w=e({struct:{account:null,password:null},status:{bind:!1,finish:!1,dialog:!1,loading:!0}}),x={init:async()=>{w.status.finish=!1,w.status.loading=!0;const{code:e,data:s}=await a.get("/inis/device/user");w.status.loading=!1,200===e&&(w.struct=s,w.status.bind=!0,w.status.finish=!0)},change:async e=>{if(e)return w.status.bind=e;const{code:s,msg:l}=await a.del("/inis/device/bind");return 200!==s?(w.status.bind=!0,t.error(l)):void 0},show(){w.status.dialog=!0},save:async()=>{if(l.is.empty(w.struct.account))return t.warn("请输入账号！");if(l.is.empty(w.struct.password))return t.warn("请输入密码！");w.status.wait=!0;const{code:e,msg:s}=await a.post("/inis/device/bind",w.struct);if(w.status.wait=!1,200!==e)return t.error(s);w.status.bind=!0,w.status.dialog=!1}};return s((async()=>{await x.init()})),h({init:x.init}),(e,s)=>{const a=o("el-tooltip"),t=o("el-switch"),l=o("el-image"),n=o("el-alert"),h=o("el-input"),k=o("el-button"),z=o("el-dialog"),S=c("loading");return i(),u(y,null,[r((i(),u("div",_i,[m("div",xi,[p(V,{name:"bind",color:"rgb(var(--assist-color))",size:"43px",class:"position-absolute opacity-25",style:{right:"2rem"}}),m("h6",Vi,[p(a,{placement:"top"},{content:f((()=>[g(" ● 程序后端许多功能都依赖于 inis 社区"),ki,g(" ● 绑定仅限于为您提供更好的服务体验，不涉及您的程序任何敏感信息，请放心使用"),zi,d(w).status.bind?(i(),u("span",Si,"● 当前绑定账号："+_(d(w).struct.account),1)):v("",!0)])),default:f((()=>[m("span",Ui,[p(V,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),Ci])])),_:1})]),m("h2",Oi,[p(t,{modelValue:d(w).status.bind,"onUpdate:modelValue":s[0]||(s[0]=e=>d(w).status.bind=e),onChange:x.change,disabled:!d(w).status.bind,"active-text":"绑定","inactive-text":"解绑"},null,8,["modelValue","onChange","disabled"])]),ji,m("span",qi,[g(" 其它配置信息，"),m("span",{onClick:s[1]||(s[1]=e=>x.show()),class:"text-white pointer"},"点我配置")])])])),[[S,d(w).status.loading]]),p(z,{modelValue:d(w).status.dialog,"onUpdate:modelValue":s[7]||(s[7]=e=>d(w).status.dialog=e),class:"custom sm","close-on-click-modal":!1},{header:f((()=>[m("div",Ri,[m("div",Ki,[p(l,{src:"https://inis.cn/assets/imgs/logo-white.png",style:{height:"52px"},class:"my-1 py-1"})])])])),default:f((()=>[m("div",Ii,[p(a,{placement:"top"},{content:f((()=>[g(" 程序后端许多功能都依赖于 inis 社区，绑定仅限于为您提供更好的服务体验，不涉及您的程序任何敏感信息，请放心使用。"),Ji])),default:f((()=>[p(n,{type:"success",closable:!1,center:"",class:"mb-3 box-shadow-light d-inline-flex align-items-center pointer"},{title:f((()=>[p(V,{name:"!",size:"15px",color:"var(--el-color-success)"}),Ai])),_:1})])),_:1}),m("div",Ni,[Di,m("div",Ei,[p(h,{modelValue:d(w).struct.account,"onUpdate:modelValue":s[2]||(s[2]=e=>d(w).struct.account=e),class:"custom",placeholder:"帐号 | 邮箱 | 手机号"},null,8,["modelValue"])])]),m("div",$i,[Pi,m("div",Ti,[p(h,{modelValue:d(w).struct.password,"onUpdate:modelValue":s[3]||(s[3]=e=>d(w).struct.password=e),onKeyup:s[4]||(s[4]=b((e=>x.save()),["enter"])),"show-password":"",class:"custom",placeholder:"请输入密码"},null,8,["modelValue"])])]),Wi])])),footer:f((()=>[m("div",Bi,[p(k,{onClick:s[5]||(s[5]=e=>d(w).status.dialog=!1)},{default:f((()=>[g("取 消")])),_:1}),p(k,{onClick:s[6]||(s[6]=e=>x.save()),loading:d(w).status.wait},{default:f((()=>[g(_(d(w).status.wait?"绑定中 ...":"绑 定"),1)])),_:1},8,["loading"])])])),_:1},8,["modelValue"])],64)}}},Mi={class:"container-fluid container-box"},Xi={class:"row d-none d-lg-flex"},Fi={class:"col-lg-6 d-flex"},Yi={class:"input-group custom-search me-1"},Gi=m("input",{class:"form-control custom search mimic",autocomplete:"new-password",type:"text",placeholder:"这是个假搜索"},null,-1),Hi={class:"col-lg-6 d-flex justify-content-end",style:{"z-index":"-1"}},Qi={class:"btn btn-auto h-35px mimic",disabled:"",type:"button"},Zi={class:"row mt-3"},eu={class:"col-12"},su=m("span",{class:"fw-bolder font-12"},"安全",-1),au={class:"row"},tu={class:"col-md-4"},lu={class:"col-md-4"},nu={class:"col-md-4"},ou={class:"col-md-4"},cu={class:"col-md-4"},iu={class:"col-md-4"},uu=m("span",{class:"fw-bolder font-12"},"优化",-1),ru={class:"row"},du={class:"col-md-4"},mu={class:"col-md-4"},pu={class:"col-md-4"},fu=m("span",{class:"fw-bolder font-12"},"存储",-1),gu={class:"row"},bu={class:"col-md-4"},hu={class:"col-md-4"},vu={class:"col-md-4"},yu={class:"col-md-4"},wu=m("span",{class:"fw-bolder font-12"},"短信",-1),_u={class:"row"},xu={class:"col-md-4"},Vu={class:"col-md-4"},ku={class:"col-md-4"},zu=m("span",{class:"fw-bolder font-12"},"其他",-1),Su={class:"row"},Uu={class:"col-md-4"},Cu={class:"col-md-4"},Ou={class:"col-md-4"},ju=m("span",{class:"fw-bolder font-12"},"inis 社区",-1),qu={class:"row"},Ru={class:"col-md-4"},Ku={__name:"system",setup(a){const{ctx:t,proxy:l}=C();k();const n=e({item:{title:"系统配置",tabs:"security",menu:{...z,menuList:[{label:"刷新",icon:'<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="14" height="14">\n                    <path fill="rgb(var(--menu-icon-color))" d="M608 928c-229.76 0-416-186.24-416-416h-0.128c0-0.416 0.128-0.768 0.128-1.184a95.904 95.904 0 1 0-191.872-1.184c0 0.384-0.128 0.768-0.128 1.184l0.032 0.384c0 0.288 0.096 0.544 0.096 0.8H0c0 282.784 229.216 512 512 512 282.016 0 510.592-227.968 511.872-509.632C1022.592 743.072 836.928 928 608 928z"></path>\n                    <path fill="rgb(var(--menu-icon-color))" d="M1023.872 512H1024c0-282.784-229.216-512-512-512C230.016 0 1.408 227.968 0.128 509.632 1.408 280.96 187.072 96 416 96c229.76 0 416 186.24 416 416h0.128c0 0.416-0.128 0.768-0.128 1.184a96 96 0 0 0 96 96 95.872 95.872 0 0 0 95.872-94.816c0-0.416 0.128-0.768 0.128-1.184l-0.032-0.384c0-0.288-0.096-0.544-0.096-0.8z"></path>\n                </svg>',fn:()=>c.refresh()}]}},refresh:{inis:["device-bind"],other:["site-info","page","article"],optimize:["cache-redis","cache-file","cache-ram"],sms:["sms-email","sms-aliyun","sms-tencent"],storage:["storage-local","storage-oss","storage-cos","storage-kodo"],security:["api-key","qps","page-limit","jwt","allow-register","qps-black"]}});s((async()=>{n.item.menu.menuList.push({line:!0},...await S())}));const c={refresh(...e){let s=[...n.refresh[n.item.tabs]];e=0===e.length?s:e.filter((e=>s.includes(e)));for(let a of e)l.$refs[a].init()}};return document.addEventListener("contextmenu",(e=>{var s;e.preventDefault(),null==(s=l.$refs.mouse)||s.show(e.x,e.y)})),(e,s)=>{const a=o("i-svg"),t=o("el-tab-pane"),l=o("el-tabs");return i(),u(y,null,[m("div",Mi,[m("div",Xi,[m("div",Fi,[m("div",Yi,[p(a,{name:"search",color:"rgb(var(--icon-color))",size:"18px"}),Gi]),m("button",{onClick:s[0]||(s[0]=e=>c.refresh()),class:"btn btn-auto mx-1 mimic",type:"button"},"刷新")]),m("div",Hi,[m("button",Qi,_(d(n).item.title),1)])]),m("div",Zi,[m("div",eu,[p(l,{modelValue:d(n).item.tabs,"onUpdate:modelValue":s[1]||(s[1]=e=>d(n).item.tabs=e),id:"tabs-area",class:"circle"},{default:f((()=>[p(t,{name:"security"},{label:f((()=>[su])),default:f((()=>[m("div",au,[m("div",tu,[p(j,{ref:"api-key"},null,512)]),m("div",lu,[p(q,{ref:"qps"},null,512)]),m("div",nu,[p(K,{ref:"qps-black"},null,512)]),m("div",ou,[p(R,{ref:"page-limit"},null,512)]),m("div",cu,[p(ot,{ref:"jwt"},null,512)]),m("div",iu,[p(qa,{ref:"allow-register"},null,512)])])])),_:1}),p(t,{name:"optimize"},{label:f((()=>[uu])),default:f((()=>[m("div",ru,[m("div",du,[p(Ft,{ref:"cache-redis",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",mu,[p(xl,{ref:"cache-file",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",pu,[p(Pl,{ref:"cache-ram",onRefresh:c.refresh},null,8,["onRefresh"])])])])),_:1}),p(t,{name:"storage"},{label:f((()=>[fu])),default:f((()=>[m("div",gu,[m("div",bu,[p(cn,{ref:"storage-local",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",hu,[p(Xn,{ref:"storage-oss",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",vu,[p(No,{ref:"storage-cos",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",yu,[p(vc,{ref:"storage-kodo",onRefresh:c.refresh},null,8,["onRefresh"])])])])),_:1}),p(t,{name:"sms"},{label:f((()=>[wu])),default:f((()=>[m("div",_u,[m("div",xu,[p(ke,{ref:"sms-email",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",Vu,[p(us,{ref:"sms-aliyun",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",ku,[p(aa,{ref:"sms-tencent",onRefresh:c.refresh},null,8,["onRefresh"])])])])),_:1}),p(t,{name:"other"},{label:f((()=>[zu])),default:f((()=>[m("div",Su,[m("div",Uu,[p(I,{ref:"page",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",Cu,[p(J,{ref:"article",onRefresh:c.refresh},null,8,["onRefresh"])]),m("div",Ou,[p(wi,{ref:"site-info",onRefresh:c.refresh},null,8,["onRefresh"])])])])),_:1}),p(t,{name:"inis"},{label:f((()=>[ju])),default:f((()=>[m("div",qu,[m("div",Ru,[p(Li,{ref:"device-bind",onRefresh:c.refresh},null,8,["onRefresh"])])])])),_:1})])),_:1},8,["modelValue"])])])]),p(d(O),U({ref:"mouse"},d(n).item.menu),null,16)],64)}}};export{Ku as default};
