import{r as l,h as a,p as e,m as s,a as t,B as o,o as n,c,C as i,e as u,b as d,d as r,w as m,f as p,F as b,j as v,k as f,t as g}from"./1690460619.index.js";const h={class:"card"},w={class:"card-body"},y={class:"text-muted text-uppercase mt-0"},x=d("br",null,null,-1),k=d("br",null,null,-1),j={class:"d-inline-flex align-items-center"},V=d("span",{class:"ms-1"},"文章、页面",-1),_={class:"m-b-20"},C=d("span",{class:"badge bg-success font-white"}," 更多 ",-1),T={class:"text-muted"},M=d("strong",{class:"flex-center"},"文章 和 页面 详细配置",-1),z={class:"row"},E={class:"col-md-4"},L={class:"form-group mb-3"},U={class:"form-label"},A=d("br",null,null,-1),I=d("br",null,null,-1),R=d("span",{class:"ms-1"},"编辑器：",-1),H={class:"font-13"},J={class:"text-muted float-end"},N={class:"col-md-4"},O={class:"form-group mb-3"},S={class:"form-label"},B=d("span",{class:"ms-1"},"允许评论：",-1),F={class:"font-13"},q={class:"text-muted float-end"},D={class:"col-md-4"},G={class:"form-group mb-3"},K={class:"form-label"},P=d("span",{class:"ms-1"},"显示评论：",-1),Q={class:"font-13"},W={class:"text-muted float-end"},X={__name:"article-page",setup(X,{expose:Y}){const Z=l({struct:{key:"ARTICLE",json:{editor:"tinymce",comment:{allow:1,show:1}}},status:{finish:!1,loading:!0,dialog:!1},select:{editor:[{value:"tinymce",label:"富文本"},{value:"vditor",label:"Markdown"}],comment:{allow:[{value:1,label:"允许"},{value:0,label:"禁止"}],show:[{value:1,label:"显示"},{value:0,label:"隐藏"}]}}});a((async()=>{await $.init()}));const $={init:async()=>{Z.status.finish=!1,Z.status.loading=!0;const{code:l,data:a}=await e.get("/api/config/one",{key:"ARTICLE"});Z.status.loading=!1,200===l&&(Z.struct=a,Z.status.finish=!0)},change:async l=>{const{code:a,msg:t}=await e.post("/api/config/save",{key:"ARTICLE",json:JSON.stringify({...Z.struct.json,editor:l})});200!==a&&(Z.struct.json.editor="tinymce"===Z.struct.json.editor?"vditor":"tinymce",s.error(t))},show(){if(!Z.status.finish)return s.warn("配置获取失败，无法进行配置！");Z.status.dialog=!0},save:async()=>{Z.status.wait=!0;const{code:l,msg:a}=await e.post("/api/config/save",{...Z.struct,json:JSON.stringify(Z.struct.json)});if(Z.status.wait=!1,200!==l)return s.error("保存失败："+a);Z.status.dialog=!1}};return Y({init:$.init}),(l,a)=>{const e=t("i-svg"),s=t("el-tooltip"),X=t("el-switch"),Y=t("el-option"),ll=t("el-select"),al=t("el-button"),el=t("el-dialog"),sl=o("load");return n(),c(b,null,[i((n(),c("div",h,[d("div",w,[r(e,{name:"editor",color:"rgb(var(--assist-color))",size:"43px",class:"position-absolute opacity-25",style:{right:"2rem"}}),d("h6",y,[r(s,{placement:"top"},{content:m((()=>[p(" ● Markdown编辑器：Vditor支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。"),x,p(" ● 富文本编辑器：TinyMCE是一个基于浏览器的所见即所得富文本编辑器，用于编辑HTML文档。"),k])),default:m((()=>[d("span",j,[r(e,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),V])])),_:1})]),d("h2",_,[r(X,{modelValue:u(Z).struct.json.editor,"onUpdate:modelValue":a[0]||(a[0]=l=>u(Z).struct.json.editor=l),onChange:$.change,disabled:!u(Z).status.finish,"active-value":"tinymce","inactive-value":"vditor","active-text":"富文本","inactive-text":"Markdown"},null,8,["modelValue","onChange","disabled"])]),C,d("span",T,[p(" 其它配置信息，"),d("span",{onClick:a[1]||(a[1]=l=>$.show()),class:"text-white pointer"},"点我配置")])])])),[[sl,[u(Z).status.loading,null,null]]]),r(el,{modelValue:u(Z).status.dialog,"onUpdate:modelValue":a[7]||(a[7]=l=>u(Z).status.dialog=l),class:"custom",draggable:"","close-on-click-modal":!1},{header:m((()=>[M])),default:m((()=>[d("div",z,[d("div",E,[d("div",L,[d("label",U,[r(s,{placement:"top"},{content:m((()=>[p(" ● Markdown编辑器：Vditor支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。"),A,p(" ● 富文本编辑器：TinyMCE是一个基于浏览器的所见即所得富文本编辑器，用于编辑HTML文档。"),I])),default:m((()=>[d("span",null,[r(e,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),R])])),_:1})]),r(ll,{modelValue:u(Z).struct.json.editor,"onUpdate:modelValue":a[2]||(a[2]=l=>u(Z).struct.json.editor=l),class:"d-block custom font-13",placeholder:"请选择"},{default:m((()=>[(n(!0),c(b,null,v(u(Z).select.editor,(l=>(n(),f(Y,{key:l.value,label:l.label,value:l.value},{default:m((()=>[d("span",H,g(l.label),1),d("small",J,g(l.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),d("div",N,[d("div",O,[d("label",S,[r(s,{content:"是否允许用户评论",placement:"top"},{default:m((()=>[d("span",null,[r(e,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),B])])),_:1})]),r(ll,{modelValue:u(Z).struct.json.comment.allow,"onUpdate:modelValue":a[3]||(a[3]=l=>u(Z).struct.json.comment.allow=l),class:"d-block custom font-13",placeholder:"请选择"},{default:m((()=>[(n(!0),c(b,null,v(u(Z).select.comment.allow,(l=>(n(),f(Y,{key:l.value,label:l.label,value:l.value},{default:m((()=>[d("span",F,g(l.label),1),d("small",q,g(l.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),d("div",D,[d("div",G,[d("label",K,[r(s,{content:"是否显示评论",placement:"top"},{default:m((()=>[d("span",null,[r(e,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),P])])),_:1})]),r(ll,{modelValue:u(Z).struct.json.comment.show,"onUpdate:modelValue":a[4]||(a[4]=l=>u(Z).struct.json.comment.show=l),class:"d-block custom font-13",placeholder:"请选择"},{default:m((()=>[(n(!0),c(b,null,v(u(Z).select.comment.show,(l=>(n(),f(Y,{key:l.value,label:l.label,value:l.value},{default:m((()=>[d("span",Q,g(l.label),1),d("small",W,g(l.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])])])])),footer:m((()=>[r(al,{onClick:a[5]||(a[5]=l=>u(Z).status.dialog=!1)},{default:m((()=>[p("取 消")])),_:1}),r(al,{onClick:a[6]||(a[6]=l=>$.save()),loading:u(Z).status.wait},{default:m((()=>[p("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}};export{X as _};
